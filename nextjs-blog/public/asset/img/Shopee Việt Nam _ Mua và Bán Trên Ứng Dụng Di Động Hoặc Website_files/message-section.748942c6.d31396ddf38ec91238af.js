(window.miniJsonp=window.miniJsonp||[]).push([[17],{"0ike":function(e,t){e.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M5.75 2.75v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75h-12A.75.75 0 012 15.5v-12a.75.75 0 01.75-.75h3zm4.175 7.614l2.651-2.652-1.06-1.06-2.652 2.651-2.652-2.651-1.06 1.06 2.651 2.652-2.651 2.652 1.06 1.06 2.652-2.651 2.652 2.651 1.06-1.06-2.651-2.652zM7.25 2h3a.75.75 0 01.75.75v.75H6.5v-.75A.75.75 0 017.25 2z"></path></svg>'},10:function(e,t){},FpyM:function(e,t){e.exports='<svg data-name="图层 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="chat-icon"><g data-name="Layer 1"><path d="M512 1024A512.2 512.2 0 01312.75 40.2a512.12 512.12 0 01398.6 943.5A507.07 507.07 0 01512 1024zm0-960a447.88 447.88 0 00-316.8 764.8A448 448 0 10686.45 99.2 444.4 444.4 0 00512 64z"></path><path d="M448 736a31.55 31.55 0 01-22.6-9.4l-192-192a32 32 0 1145.3-45.3L448 658.7l297.4-297.4a32 32 0 1145.3 45.3l-320 320A32 32 0 01448 736z"></path></g></svg>'},FvWG:function(e,t){e.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><g fill-rule="evenodd"><path d="M2.05 13H1V4a1 1 0 011-1h9.738v2h3.481a1 1 0 01.97.757L17 9v4h-1.05a2.5 2.5 0 00-4.9 0h-4.1a2.5 2.5 0 00-4.9 0zM12 6v2h3.807l-.524-2H12z"></path><circle cx="4.5" cy="13.5" r="1.5"></circle><circle cx="13.5" cy="13.5" r="1.5"></circle></g></svg>'},HsjP:function(e,t,n){(function(t){var r,s,a,o,c,i,u,l,d,p,f,A,g,h,E,m,b,v,_,O,S,y,x,C,M,j,I,w,T,B,R,k,P,D,N,q,F,L,G,U,W;window,e.exports=(r=n("q1tI"),s=n("XnKn"),a=n("tvxL"),o=n("5rFJ"),c=n("4j81"),i=n("/MKj"),u=n("6SzI"),l=n("bA1l"),d=n("Ogvq"),p=n("TSYQ"),f=n("+xQE"),A=n("3mXP"),g=n("XzT5"),h=n("vO9j"),E=n("Lp0C"),m=n("r+Xj"),b=n("p6iB"),v=n("e4V/"),_=n("lQul"),O=n("b4o9"),S=n("Wx0F"),y=n("H6ri"),x=n("7G9T"),C=n("anaU"),M=n("Ce8j"),j=n("kPLt"),I=n("oeg4"),w=n("lPiR"),T=n("Qf4c"),B=n("wjmy"),R=n("FpyM"),k=n("vLVT"),P=n("ZkkK"),D=n("cW3+"),N=n("pvLd"),q=n("JKOH"),F=n("FvWG"),L=n("ucpa"),G=n("0ike"),U=n("9rZX"),W=n("TeOP"),function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=280)}([function(e,t){e.exports=r},function(e,t){e.exports=s},function(e,t){e.exports=a},function(e,t){e.exports=o},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){e.exports=n(140)},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=c},function(e,t){e.exports=i},function(e,t){e.exports=u},function(e,n,r){"use strict";var s=r(4),a=r.n(s),o=r(17),c=r.n(o),i=r(18),u=r.n(i),l=r(6),d=r.n(l),p=r(19),f=r.n(p),A=r(20),g=r.n(A),h=r(11),E=r.n(h),m=r(0),b=r.n(m),v=r(2),_=r(7),O=r(1),S=r(12),y=r(8),x={setReplyToMessage:S.setReplyToMessage,deleteMessageRequested:S.deleteMessageRequested,updateHasConflict:S.updateHasConflict},C=Object(y.connect)((function(e){return{scrollToMessageId:Object(v.scrollToMessageIdSelector)(e),hasReplyPermission:Object(v.hasReplyPermissionSelector)(e),hasDeletePermission:Object(v.hasDeletePermissionSelector)(e),currentConversationId:Object(v.currentConversationIdSelector)(e),deleteConfigDuration:Object(v.deleteConfigDurationSelector)(e)}}),x)((function(e){return b.a.createElement(_.MessageToolbar,e)})),M=r(212),j=r(216),I=r(217),w=r(218),T=r(220),B=r(228);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var k=b.a.memo((function(e){var n=e.message,r=e.isSubAccount,s=e.isScChat,o=e.shopId,c=e.isSend,i=e.region,u=e.shopAccess,l=(u=void 0===u?{}:u).hasViewOrderAccess,d=void 0!==l&&l,p=u.hasViewProductAccess,f=void 0!==p&&p,A=e.visitShopSellerCenterRequested,g=n.isFaking,h=n.id,E=n.sourceContent,v=n.source_type,_=n.send_status,S=n.conversation_id,y="order"===v,x="product"===v;if(Object(m.useEffect)((function(){var e,n=a()({},"".concat(v,"_id"),null==E||null===(e=E.content)||void 0===e?void 0:e.id),r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({message_id:h,conversation_id:S},n);y&&t({operation:O.TrackerOperation.IMPRESSION,shopId:o,trackerName:"impressionOrderFromSourceInSpecialMessage",data:r}),x&&t({operation:O.TrackerOperation.IMPRESSION,shopId:o,trackerName:"impressionProductFromSourceInSpecialMessage",data:r})}),[]),!E)return null;var C=!g&&[O.MessageSendStatus.SUCCEED,null].includes(_)&&c;return x?b.a.createElement(B.a,{content:E.content,showSentLink:C,isSubAccount:r,isScChat:s,messageId:h,hasAccess:f,conversationId:S,visitShopSellerCenterRequested:A}):y?b.a.createElement(T.a,{content:E.content,isSendByMe:c,isSubAccount:r,shopId:o,isScChat:s,region:i,messageId:h,showSentLink:C,conversationId:S,hasAccess:d,visitShopSellerCenterRequested:A}):void 0}));k.displayName="MessageSource";var P={visitShopSellerCenterRequested:v.visitShopSellerCenterRequested},D=Object(y.connect)((function(e){return{shopAccess:Object(v.shopAccessSelector)(e)}}),P)(k),N=r(29),q=r(67),F=r.n(q),L=r(109);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var U=O.MessageTypes.MSG_TYPE_WEBVIEW,W=O.MessageTypes.MSG_TYPE_NOTIFICATION,Y=O.MessageTypes.MSG_TYPE_OFFER,z=O.MessageTypes.MSG_TYPE_VIDEO,H=O.MessageTypes.MSG_TYPE_TEXT,V=O.MessageTypes.MSG_TYPE_NEW_FAQ,Q=O.MessageTypes.MSG_TYPE_FAQ_QUESTION_LIST,X=O.MessageTypes.MSG_TYPE_FAQ_CATEGORY_LIST,K=["index","timeFlag","lastMessageFlag","messageFillStatus","messageSourceFillStatus"],Z=[V,Q,X];n.a=function(e){var n=function(n){f()(s,n);var r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var s=E()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return g()(this,n)}}(s);function s(e,n){var o;c()(this,s),o=r.call(this,e,n);var i=e.index,u=e.message,l=e.newMessageFlag,p=e.exposedMessageIds,f=void 0===p?[]:p,A=e.addExposedMessageId,g=e.locale,h=e.currentFaqSessionInfo,E=h.faqSessionId,m=h.sessionExpiryTime,b=e.conversationShopId,_=u.id,S=u.type,y=u.content,x=u.faq_session_id;(0===i||S===Y||l)&&(o.needRemeasure=!0),o.handleReload=o.handleReload.bind(d()(o)),o.handleResendMessage=o.handleResendMessage.bind(d()(o)),o.handleCancelMessage=o.handleCancelMessage.bind(d()(o)),o.handleMessageIsSend=o.handleMessageIsSend.bind(d()(o)),o.timer=null,o.messageNode=null,o.shouldExpose=!0,o.clearTimer=o.clearTimer.bind(d()(o)),o.handleMouseEnter=o.handleMouseEnter.bind(d()(o)),o.handleMouseLeave=o.handleMouseLeave.bind(d()(o)),o.state={isHover:!1};var C=Z.includes(S);if(o.needExpose="function"==typeof IntersectionObserver&&(N.a[S]&&!f.includes(_)||C),o.needExpose){var M={root:document.querySelector("#messagesContainer"),threshold:.5};o.observer=new IntersectionObserver((function(e){var n=e[0];if(n&&n.isIntersecting&&n.intersectionRatio>=.5){if(o.timer||!o.shouldExpose||C||(o.shouldExpose=!1,o.timer=setTimeout((function(){t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({operation:O.TrackerOperation.IMPRESSION,trackerName:N.a[S]},Object(N.b)({message:u,conversationShopId:b,isSend:o.handleMessageIsSend(u)}))),o.clearTimer(),A&&A(_)}),1e3)),C&&o.shouldExpose){o.shouldExpose=!1;var r=y.intents,s=void 0===r?[]:r,c=y.categories,i=void 0===c?[]:c,l=y.other_faq_types,d=void 0===l?[]:l,p=y.questions,f=void 0===p?[]:p;(s.length||i.length||d.length||f.length)&&Object(L.a)(E,x,m)&&Object(v.collectChatbotReportTask)(Object(O.handleReportItems)(y,S===V,g))}}else n&&n.intersectionRatio<=0&&(o.shouldExpose=!0)}),M)}return o}return u()(s,[{key:"componentDidMount",value:function(){var e=this.props,t=e.message,n=e.hasSourceMessageMap;void 0===n[t.id]&&(n[t.id]=t.hasMessageSource),this.needExpose&&this.observer.observe(this.messageNode),this.measureMessage()}},{key:"componentWillUnmount",value:function(){this.clearTimer(),this.needExpose&&this.observer.unobserve(this.messageNode)}},{key:"componentDidUpdate",value:function(e){var t=this,n=e.hasSourceMessageMap,r=e.message,s=e.showWarningMessageIds,a=this.props,o=a.message,c=a.showWarningMessageIds,i=!1;if(r.type===Y)i=(r.textContent&&r.textContent.status)!==(o.textContent&&o.textContent.status);else{var u=["hasMessageSource","newMessageFlag","errorCode","status","send_status"];o.type!==U&&u.push("content"),(i=u.some((function(e){return r[e]!==o[e]})))||(i=K.some((function(n){return t.props[n]!==e[n]})))}n[o.id]!==o.hasMessageSource&&(i=!0,n[o.id]=o.hasMessageSource),r.type===H&&s.indexOf(r.id)!==c.indexOf(o.id)&&(i=!0),!Object(O.isDeletedMessage)(r)&&Object(O.isDeletedMessage)(o)&&(i=!0),i&&(this.needRemeasure=i),this.measureMessage()}},{key:"clearTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"handleReload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.message,r=t.fillMessageRequested;r({message:n,isSource:e})}},{key:"measureMessage",value:function(){this.needRemeasure&&(this.props.measure(),this.needRemeasure=!1)}},{key:"handleResendMessage",value:function(){var e=this.props,n=e.message,r=e.resendMessageRequested,s=e.conversationId,a=e.conversationShopId,o=n.id;n.type===z&&t({shopId:a,trackerName:"clickResendVideo",data:{message_id:o,conversation_id:s}}),r({conversationId:s,message:n})}},{key:"handleCancelMessage",value:function(){var e=this.props,n=e.message,r=e.cancelSendingMessageRequested,s=e.conversationId,a=e.conversationShopId,o=n.id;t({shopId:a,trackerName:"clickCancelVideo",data:{message_id:o,conversation_id:s}}),r({id:o,conversationId:s})}},{key:"handleMessageIsSend",value:function(e){var t=this.props.conversationBuyerId;return e.to_id===t}},{key:"getMessageClass",value:function(e){var t=e.isSend,n=e.isSystem,r=e.isChatbot,s=e.isSecurityTips;return n?F.a.message:r||s?"":t?F.a.messageSend:F.a.messageReceive}},{key:"renderMessage",value:function(t){var n=this,r=this.props,s=r.message,a=r.measure,o=r.timeFlag,c=r.isScChat,i=r.isSubAccount,u=r.newMessageFlag,l=r.isLastSystemMessage,d=r.showWarningMessageIds,p=r.shop,f=r.conversationId,A=r.conversationShopId,g=r.conversationBuyerId,h=r.conversationStatus,E=r.isInFaqHistoryModal,m=void 0!==E&&E,v=r.messageFillStatus,S=r.messageSourceFillStatus,y=s.type,x=s.hasMessageSource,T=s.send_status,B=s.content,R=void 0===B?{}:B,k=s.from_shop_id,P=s.request_id,N=s.sourceContent,q=!t&&u,L=y===O.MessageTypes.MSG_TYPE_TEXT&&!t&&-1!==d.indexOf(s.id),G=y===O.MessageTypes.FAQ_TYPE_BOT_RESPONSE_MESSAGE,Y=y===W||Object(O.getMessageIsRatecard)(y,R)&&(t||i),z=y===O.MessageTypes.MSG_TYPE_SECURITY_TIPS,H=this.getMessageClass({isSend:t,isSystem:Y,isChatbot:G,isSecurityTips:z}),V=G?"":F.a.bubble,Q=!(x||o||l||Y)||o&&Y?"4px":"8px",X=(p&&p.country?p.country:"SG").toLowerCase(),K="closed"===h,Z=Object(O.isDeletedMessage)(s);return b.a.createElement(b.a.Fragment,null,q&&b.a.createElement(j.a,null),o&&b.a.createElement("div",{className:F.a.messageTime},o),x&&b.a.createElement("div",{style:{marginTop:o?"1.5em":"0.75em"}},S?b.a.createElement(_.Processor,{status:S,messageType:"source",content:N,reloadRequest:function(){return n.handleReload(!0)}}):b.a.createElement(D,{message:s,isSubAccount:i,isScChat:c,shopId:A,isSend:t,region:X})),b.a.createElement("div",{style:{marginTop:Q},className:H},t&&b.a.createElement(I.a,{isClosed:K,message:s,resendMessage:this.handleResendMessage}),t&&!Y&&b.a.createElement(w.a,{type:y,status:T,requestId:P,handleCancelMessage:this.handleCancelMessage}),Z?b.a.createElement(_.DeletedMessage,{isSend:t}):b.a.createElement(C,{isSend:t,message:s,isInFaqHistoryModal:m,isClosed:K,isHoverBaseMsg:this.state.isHover},b.a.createElement("div",{className:V},v?b.a.createElement(_.Processor,{status:v,messageType:y===U?R.type:y,content:R,reloadRequest:function(){return n.handleReload()},isScChat:c}):b.a.createElement(e,{message:s,isScChat:c,isSend:t,measure:a,isSubAccount:i,shop:p,region:X,conversationId:f,conversationShopId:A,conversationBuyerId:g,conversationStatus:h,isInFaqHistoryModal:m,handleMessageIsSend:this.handleMessageIsSend})))),b.a.createElement(M.a,{message:s,buyerId:g,shop:p}),L&&b.a.createElement(_.TextWarning,{shopId:k,region:X}))}},{key:"handleMouseEnter",value:function(){this.setState({isHover:!0})}},{key:"handleMouseLeave",value:function(){this.setState({isHover:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,r=t.message,s=t.isLastMessage,a=t.className,o=this.renderMessage(this.handleMessageIsSend(r)),c="".concat(F.a.root," ").concat(s?F.a.lastMessage:""," ").concat(a);return b.a.createElement("div",{style:n,className:c,ref:function(t){return e.messageNode=t},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},o)}}]),s}(b.a.PureComponent);return n.defaultProps={showWarningMessageIds:[]},n}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"showMyRateCard",(function(){return f.b})),n.d(t,"showRateCard",(function(){return f.c})),n.d(t,"evaluationRequested",(function(){return f.a})),n.d(t,"watchEvaluation",(function(){return f.d})),n.d(t,"sendMessagesFailedByOffline",(function(){return p.e})),n.d(t,"resetMessagesFailedByOffline",(function(){return p.d})),n.d(t,"resendOfflineMessagesOnce",(function(){return p.b})),n.d(t,"resendOfflineMessagesOnceSucceed",(function(){return p.c})),n.d(t,"updateResendConversationMessage",(function(){return p.f})),n.d(t,"watchOffline",(function(){return p.g})),n.d(t,"resendMessageRequested",(function(){return i.a})),n.d(t,"watchResend",(function(){return i.b})),n.d(t,"sendMessagesRequested",(function(){return c.i})),n.d(t,"sendMessagesSucceeded",(function(){return c.j})),n.d(t,"sendingMessages",(function(){return c.m})),n.d(t,"sendMessagesToPending",(function(){return c.k})),n.d(t,"sendMessagesFailed",(function(){return c.h})),n.d(t,"abortAllSendingMessages",(function(){return c.a})),n.d(t,"cancelSendingMessageRequested",(function(){return c.b})),n.d(t,"cancelSendingMessageSucceeded",(function(){return c.c})),n.d(t,"sendVideoMessageRequested",(function(){return c.l})),n.d(t,"handleSendSucceededMessages",(function(){return c.f})),n.d(t,"handleFaqExpiredMessage",(function(){return c.e})),n.d(t,"sendMessages",(function(){return c.g})),n.d(t,"watchSendWithCancel",(function(){return c.o})),n.d(t,"watchSend",(function(){return c.n})),n.d(t,"updateMessageFillStatusMap",(function(){return d.d})),n.d(t,"fillMessageRequested",(function(){return d.c})),n.d(t,"fillMessageContent",(function(){return d.b})),n.d(t,"watchFill",(function(){return d.e})),n.d(t,"fetchMessagesRequested",(function(){return o.c})),n.d(t,"fetchMessagesSucceeded",(function(){return o.f})),n.d(t,"updateFetchMessagesRequestedStatus",(function(){return o.h})),n.d(t,"setSecurityTipsMessage",(function(){return o.g})),n.d(t,"fetchConversationMessagesSaga",(function(){return o.b})),n.d(t,"fetchMessagesRequestedWithPreloadSaga",(function(){return o.e})),n.d(t,"fetchMessagesRequestedSaga",(function(){return o.d})),n.d(t,"watchFetchMessage",(function(){return o.i})),n.d(t,"receiveMessageRequested",(function(){return ce})),n.d(t,"receiveMessageSucceeded",(function(){return ie})),n.d(t,"resetNewConversationQueue",(function(){return ue})),n.d(t,"resetOldConversationQueue",(function(){return le})),n.d(t,"resetConversationQueue",(function(){return de})),n.d(t,"handleNewConversationMessageQueue",(function(){return me})),n.d(t,"watchNewConversationMessageQueue",(function(){return be})),n.d(t,"watchOldConversationMessageQueue",(function(){return ve})),n.d(t,"handleCurrentConversationChange",(function(){return Oe})),n.d(t,"watchReceive",(function(){return Se})),n.d(t,"translateMessagesRequested",(function(){return l.d})),n.d(t,"changeTranslateStatus",(function(){return l.a})),n.d(t,"showTranslateFeedback",(function(){return l.c})),n.d(t,"sendTranslateFeedback",(function(){return l.b})),n.d(t,"watchTranslate",(function(){return l.e})),n.d(t,"replaceHttpLinkWithHttps",(function(){return M.d})),n.d(t,"updateVideoInfo",(function(){return M.e})),n.d(t,"deleteVideoInfo",(function(){return M.b})),n.d(t,"uploadMonitor",(function(){return M.f})),n.d(t,"uploadVideoGetToken",(function(){return M.i})),n.d(t,"uploadVideGetResult",(function(){return M.g})),n.d(t,"makeServiceList",(function(){return M.c})),n.d(t,"uploadVideo",(function(){return M.h})),n.d(t,"fetchFaqMessagesRequested",(function(){return D})),n.d(t,"fetchFaqMessagesSucceeded",(function(){return N})),n.d(t,"updateFetchFaqMessagesRequestedStatus",(function(){return q})),n.d(t,"updateCurrentFaqId",(function(){return F})),n.d(t,"showFaqHistoryModal",(function(){return L})),n.d(t,"watchFaqHistorySagas",(function(){return W})),n.d(t,"HIGHLIGHT_TIMEOUT",(function(){return xe.a})),n.d(t,"setReplyToMessage",(function(){return xe.j})),n.d(t,"resetReplyToMessage",(function(){return xe.d})),n.d(t,"scrollToMessage",(function(){return xe.f})),n.d(t,"setScrollToMessageId",(function(){return xe.k})),n.d(t,"resetScrollToMessageId",(function(){return xe.e})),n.d(t,"setInScrollToMessage",(function(){return xe.i})),n.d(t,"setCurrentConversationReplyToMessage",(function(){return xe.h})),n.d(t,"resetCurrentConversationReplyToMessage",(function(){return xe.c})),n.d(t,"scrollToMessageSaga",(function(){return xe.g})),n.d(t,"watchReplySaga",(function(){return xe.l})),n.d(t,"deleteMessageRequested",(function(){return Ce.b})),n.d(t,"deleteMessagePostRequested",(function(){return Ce.a})),n.d(t,"watchDeleteMessage",(function(){return Ce.c})),n.d(t,"handleSensitiveUrl",(function(){return O})),n.d(t,"deleteConversationMessageHash",(function(){return u.b})),n.d(t,"messageSyncUpdate",(function(){return we})),n.d(t,"updateMessagesRelated",(function(){return Me.c})),n.d(t,"clearChatRoomRefer",(function(){return Me.a})),n.d(t,"setEntryPoint",(function(){return Pe})),n.d(t,"updateHasConflict",(function(){return Le})),n.d(t,"sagas",(function(){return Ye})),n.d(t,"reducerMap",(function(){return ze}));var r=n(4),s=n.n(r),a=n(9),o=n(47),c=n(41),i=n(79),u=n(83),l=n(105),d=n(39),p=n(80),f=n(77),A=n(5),g=n.n(A),h=n(3),E=n(2),m=n(27),b=n(13),v=g.a.mark(S),_=g.a.mark(y),O=Object(a.createActions)(s()({},b.a.HANDLE_SENSITIVE_URL,(function(e){return{href:e.href}}))).handleSensitiveUrl;function S(e){var t;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.href,n.next=3,Object(h.put)(Object(E.showModal)({type:"CONFIRM_MODAL",title:{key:"common.navigation.cofirm_titile"},actions:{cancel:{label:{key:"common.cancel"},handler:function(){m.store.dispatch(Object(E.closeModal)())}},confirm:{label:{key:"common.navigation.confirm"},handler:function(){m.store.dispatch(Object(E.closeModal)());var e=window.open();e.opener=null,e.location=t}}},additions:{content:{key:"common.navigation.cofirm_content"},modalStyle:{width:"352px"},contentStyle:{paddingTop:"8px",paddingBottom:"13px"}}}));case 3:case"end":return n.stop()}}),v)}function y(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.takeEvery)(O,S);case 2:case"end":return e.stop()}}),_)}var x,C,M=n(42),j=n(84),I=n(1),w=n(63);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=g.a.mark(U),k=g.a.mark(W),P=Object(a.createActions)((x={},s()(x,b.a.FETCH_FAQ_MESSAGES_REQUESTED,(function(e){var t=e.sourceId,n=e.shopId,r=e.reset;return{sourceId:t,shopId:n,reset:void 0!==r&&r}})),s()(x,b.a.FETCH_FAQ_MESSAGES_SUCCEEDED,(function(e){var t=e.messageIds,n=e.sourceId,r=e.faqHistoryStatus,s=e.offset,a=e.hasMore;return{messageIds:t,sourceId:n,faqHistoryStatus:r,offset:s,hasMore:void 0===a||a}})),s()(x,b.a.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS,(function(e){return{status:e.status}})),s()(x,b.a.UPDATE_CURRENT_FAQ_ID,(function(e){return{id:e.id}})),s()(x,b.a.SHOW_FAQ_HISTORY_MODAL,(function(e){return{sourceId:e.sourceId,shopId:e.shopId}})),x)),D=P.fetchFaqMessagesRequested,N=P.fetchFaqMessagesSucceeded,q=P.updateFetchFaqMessagesRequestedStatus,F=P.updateCurrentFaqId,L=P.showFaqHistoryModal,G=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;return new Promise((function(s,a){Object(E.fetch)({parent:"conversation",resource:"bundle_message",params:{shop_id:t,offset:n,limit:r,source_id:e}}).then((function(e){var t=e.bundle_message,n=e.total;Object(w.a)(t),s({messages:t,total:n})})).catch((function(e){a(e)}))}))};function U(e){var t,n,r,s,a,o,c,i,u,l,p,f,A,m,b;return g.a.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload,n=t.sourceId,r=t.shopId,s=t.reset,g.prev=1,g.next=4,Object(h.put)(F({id:n}));case 4:return g.next=6,Object(h.select)(E.currentFaqHistorySeletor);case 6:if(a=g.sent,o=a.offset,c=void 0===o?0:o,!(void 0!==(i=a.hasMore)&&!i||s&&c)){g.next=13;break}return g.abrupt("return",null);case 13:return g.next=15,Object(h.put)(q({status:s?I.DataFetchStatus.INIT_PENDING:I.DataFetchStatus.PENDING}));case 15:return g.next=17,G(n,r,c);case 17:return u=g.sent,l=u.messages,p=u.total,f=c+l.length,l.sort((function(e,t){return Object(j.a)(e.id,t.id)})),l=l.filter((function(e){return"webview"!==e.type})),A=Object(E.normalize)("messages",l),m=A.result,b=A.entities,g.next=26,Object(h.put)(Object(E.updateEntities)({entities:b}));case 26:return g.next=28,Object(h.call)(d.b,l);case 28:return g.next=30,Object(h.put)(N({sourceId:n,offset:f,hasMore:f<p,faqHistoryStatus:I.DataFetchStatus.SUCCEED,messageIds:m}));case 30:g.next=36;break;case 32:return g.prev=32,g.t0=g.catch(1),g.next=36,Object(h.put)(q({status:s?I.DataFetchStatus.INIT_FAILED:I.DataFetchStatus.FAILED}));case 36:case"end":return g.stop()}}),R,null,[[1,32]])}function W(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.takeEvery)(D,U);case 2:case"end":return e.stop()}}),k)}var Y=(C={},s()(C,b.a.FETCH_FAQ_MESSAGES_SUCCEEDED,(function(e,t){var n=t.payload,r=n.messageIds,a=n.sourceId,o=n.faqHistoryStatus,c=n.offset,i=n.hasMore,u=e.faqHistoryHash,l=(u[a]||{all:[]}).all,d=Array.from(new Set(l.concat(r)));return B(B({},e),{},{faqHistoryHash:B(B({},u),{},s()({},a,{all:d,offset:c,hasMore:i})),faqHistoryStatus:o})})),s()(C,b.a.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS,(function(e,t){var n=t.payload.status;return B(B({},e),{},{faqHistoryStatus:n})})),s()(C,b.a.UPDATE_CURRENT_FAQ_ID,(function(e,t){var n=t.payload.id;return B(B({},e),{},{faqId:n})})),C);function z(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V=g.a.mark(he),Q=g.a.mark(Ee),X=g.a.mark(me),K=g.a.mark(be),Z=g.a.mark(ve),J=g.a.mark(Oe),$=g.a.mark(Se);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne,re=I.MessageTypes.MSG_TYPE_OFFER,se=I.MessageTypes.MSG_TYPE_VIDEO,ae=I.MessageTypes.MSG_TYPE_NOTIFICATION,oe=Object(a.createActions)({RECEIVE_MESSAGE_REQUESTED:function(e){return{message:e.message}},RECEIVE_MESSAGE_SUCCEEDED:function(e){return{conversationId:e.conversationId,message:e.message}},RESET_NEW_CONVERSATION_QUEUE:function(){return{}},RESET_OLD_CONVERSATION_QUEUE:function(){return{}},RESET_CONVERSATION_QUEUE:function(){return{}}}),ce=oe.receiveMessageRequested,ie=oe.receiveMessageSucceeded,ue=oe.resetNewConversationQueue,le=oe.resetOldConversationQueue,de=oe.resetConversationQueue,pe=2e3,fe=2e3,Ae=[],ge=[];function he(e){var t,n,r,s,a,o,c,i;return g.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.content,e.from_id,e.send_by_yourself,n=e.conversation_id,s=(r=t||{}).offer_id,a=r.model_id,r.shop_id,o=r.product_id,c=[],i={},u.next=6,Object(h.select)(Object(E.relatedOfferIdsSelector)(n,a,s,o));case 6:return u.sent.forEach((function(e){var t=e.id;i[t]=te(te({},e),{},{status:I.OfferStatus.CANCELLED})})),c.push(Object(h.put)(Object(E.batchUpdateRecord)({name:"offers",records:i}))),u.next=11,Object(h.all)(c);case 11:case"end":return u.stop()}}),V)}function Ee(e){var t,n,r,s,a,o,i,u,l,p,f,A,m,b,v,_,O,S,y,x,C,j,T,B,R,k,P,D,N;return g.a.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload.message,n=t.id,r=t.type,s=t.request_id,a=t.conversation_id,o=t.send_by_yourself,i=t.content,u=t.created_at,w.b.includes(r)&&Object(w.a)(t),g.next=5,Object(h.select)((function(e){return e.conversationReducer}));case 5:return l=g.sent,p=l.conversationIdsMap,f=l.currentConversationId,A=l.currentConversationCanRead,g.next=11,Object(h.select)(Object(E.getConversation)(a));case 11:if(m=g.sent,b=m.id&&void 0!==m.faking,p&&p[a.toString()]||b){g.next=18;break}Ae.push(t),g.next=98;break;case 18:if(r!==re){g.next=22;break}return g.next=22,Object(h.call)(he,t);case 22:if(v=f===a,_=Object(I.getChatBotParams)(t,{updateMaxGeneralOptionHideTime:o}),O=Object(I.getCrmPreviewParams)(t),!v){g.next=97;break}return g.next=28,Object(h.select)(E.curConvsMessageSelector);case 28:if(S=g.sent,!o){g.next=70;break}y=!1,x=!1,C=!1,j=z(S),g.prev=34,j.s();case 36:if((T=j.n()).done){g.next=46;break}if(B=T.value,R=B.id,k=B.retryRequestId,x=R===s,C=k===s,!((y=R===n)||x||C)){g.next=44;break}return g.abrupt("break",46);case 44:g.next=36;break;case 46:g.next=51;break;case 48:g.prev=48,g.t0=g.catch(34),j.e(g.t0);case 51:return g.prev=51,j.f(),g.finish(51);case 54:if(y){g.next=68;break}if(!x&&!C){g.next=60;break}return g.next=58,Object(h.call)(c.f,[t],a);case 58:g.next=68;break;case 60:return g.next=62,Object(h.call)(E.updateOrReplaceAction,S,[t],"messages",["content"]);case 62:return g.next=64,Object(h.call)(d.b,[t]);case 64:return g.next=66,Object(h.put)(Object(E.updateRecord)({name:"conversations",id:a,record:te(te({latest_message_id:n,latest_message_type:r,latest_message_content:i,last_message_time:u},_),O)}));case 66:return g.next=68,Object(h.put)(ie({conversationId:a,message:t}));case 68:g.next=89;break;case 70:if(r!==se){g.next=73;break}return g.next=73,Object(h.put)(Object(M.e)({id:s,info:{shouldPreload:!0}}));case 73:return g.next=75,Object(h.call)(E.updateOrReplaceAction,S,[t],"messages",["content"]);case 75:return g.next=77,Object(h.call)(d.b,[t]);case 77:return g.next=79,Object(h.select)(E.currentConversationSelector);case 79:if(P=g.sent,D=P.unread_count,N=A?D:D+1,0!==D||A||r===ae){g.next=85;break}return g.next=85,Object(h.spawn)(E.handleUnreadCountChangeAction,Object(E.updateUnreadCount)({type:E.unreadCountActions.RECEIVE_UNREADABLE_MESSAGE,conversation:P}));case 85:return g.next=87,Object(h.put)(Object(E.updateRecord)({name:"conversations",id:a,record:te(te({latest_message_id:n,latest_message_type:r,latest_message_content:i,last_message_time:u,unread_count:N},_),O)}));case 87:return g.next=89,Object(h.put)(ie({conversationId:a,message:t}));case 89:if(!b){g.next=92;break}return g.next=92,Object(h.call)(E.fetchConversationsRequestedSaga,Object(E.fetchConversationsRequested)({direction:"latest"}));case 92:if(o||!A){g.next=95;break}return g.next=95,Object(h.call)(E.markMessagesRequestedSaga,Object(E.markMessagesRequested)({conversationId:a,isRead:!0,latestMessageId:n}));case 95:g.next=98;break;case 97:ge.push(t);case 98:case"end":return g.stop()}}),Q,null,[[34,48,51,54]])}function me(){var e,t,n,r,s,a,o,c=arguments;return g.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e=c.length>0&&void 0!==c[0]&&c[0],!(t=Ae.length)){i.next=19;break}return i.next=5,Object(h.select)(E.isSubAccountSelector);case 5:return n=i.sent,r=Ae.splice(0,t).sort((function(e,t){return e.created_timestamp-t.created_timestamp})),i.next=9,Object(h.select)((function(e){return e.conversationReducer}));case 9:if(s=i.sent,a=s.maxLatestTimestampNano,o=s.maxLatestReceivedMessageId,!(n?Object(I.greaterThan)(r[0].id,o):a<=r[0].created_timestamp*Math.pow(10,9))){i.next=19;break}return i.next=16,Object(h.call)(E.fetchConversationsRequestedSaga,Object(E.fetchConversationsRequested)({direction:"latest"}));case 16:if(!e){i.next=19;break}return i.next=19,Object(h.spawn)(E.handleUnreadCountChangeAction,Object(E.updateUnreadCount)({type:E.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT}));case 19:case"end":return i.stop()}}),X)}function be(){var e,t;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(h.delay)(pe);case 3:if(e=Ae.length){n.next=8;break}pe=8e3===pe?pe:2*pe,n.next=20;break;case 8:if(pe=2e3,t=Ae[e-1].id,ne===t){n.next=14;break}return ne=t,n.next=14,Object(h.spawn)(E.handleUnreadCountChangeAction,Object(E.updateUnreadCount)({type:E.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT}));case 14:return n.next=16,Object(h.select)(E.showChatWindowSelector);case 16:if(!n.sent){n.next=20;break}return n.next=20,Object(h.call)(me,!0);case 20:n.next=0;break;case 22:case"end":return n.stop()}}),K)}function ve(){var e;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(h.delay)(fe);case 3:if(e=ge.length){t.next=8;break}fe=8e3===fe?fe:2*fe,t.next=9;break;case 8:return t.delegateYield(g.a.mark((function t(){var n,r,s,a,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.put)(Object(E.updateFetchConversationsDirection)({direction:"latest"}));case 2:return n=ge.splice(0,e),fe=2e3,r=Array.from(new Set(n.map((function(e){return e.conversation_id})))),t.next=7,Object(h.select)(Object(E.getConversations)(r));case 7:return s=t.sent,a={},o=0,n.forEach((function(e){var t=e.id,n=e.type,r=e.content,c=e.created_at,i=e.conversation_id,u=e.send_by_yourself,l=Object(I.getChatBotParams)(e,{updateMaxGeneralOptionHideTime:u}),d=Object(I.getCrmPreviewParams)(e),p=te(te({latest_message_id:t,latest_message_type:n,latest_message_content:r,last_message_time:c},l),d),f=a[i],A=!u&&n!==ae;if(f)t>f.latest_message_id?a[i]=te(te(te({},f),p),{},{unread_count:A?f.unread_count+1:f.unread_count}):a[i]=te(te({},f),{},{unread_count:A?f.unread_count+1:f.unread_count});else{var g=s.find((function(e){return e.id===i}))||{},h=g.unread_count,E=void 0===h?0:h;g.shop_id,a[i]=te(te({},p),{},{unread_count:A?E+1:E}),A&&0===E&&(o+=1)}})),t.next=13,Object(h.put)(Object(E.batchUpdateRecord)({name:"conversations",records:a,checkProp:"latest_message_id"}));case 13:return t.next=15,Object(h.spawn)(E.handleUnreadCountChangeAction,Object(E.updateUnreadCount)({type:E.unreadCountActions.MESSAGE_QUEUE_UPDATE,messageQueueUpdate:{totalIncrease:o}}));case 15:case"end":return t.stop()}}),t)}))(),"t0",9);case 9:t.next=0;break;case 11:case"end":return t.stop()}}),Z)}function _e(){var e=Ae.length,t=ge.length;e&&Ae.splice(0,e),t&&ge.splice(0,t)}function Oe(e){var t,n,r,s,a,o,c,i,u,l,d;return g.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(!(t=ge.filter((function(t){return t.conversation_id===e}))).length){p.next=12;break}return t.forEach((function(e){var t=ge.findIndex((function(t){return t.id===e.id}));ge.splice(t,1)})),n=t.sort((function(e,t){return t.latest_message_id-e.latest_message_id})),r=n[0],s=r.id,a=r.type,o=r.content,c=r.created_at,i=r.send_by_yourself,u=Object(I.getChatBotParams)(r,{updateMaxGeneralOptionHideTime:i}),l=Object(I.getCrmPreviewParams)(r),d=te(te({latest_message_id:s,latest_message_type:a,latest_message_content:o,last_message_time:c},u),l),p.next=11,Object(h.put)(Object(E.updateRecord)({name:"conversations",id:e,record:d}));case 11:return p.abrupt("return",s);case 12:return p.abrupt("return",null);case 13:case"end":return p.stop()}}),J)}function Se(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.takeEvery)(ce,Ee);case 2:return e.next=4,Object(h.takeEvery)(de,_e);case 4:case"end":return e.stop()}}),$)}var ye=s()({},ie,(function(e,t){var n,r=t.payload,a=r.conversationId,o=r.message,c=o.id,i=o.request_id,u=e.messagesRelatedMap,l=u[a]||{},d=l.all,p=void 0===d?[]:d,f=l.sending,A=void 0===f?[]:f;return n=p.includes(c)?p:[c].concat(p).filter((function(e){return e!==i})),te(te({},e),{},{messagesRelatedMap:te(te({},u),{},s()({},a,te(te({},l),{},{all:n,sending:A.filter((function(e){return!A.includes(i)}))})))})})),xe=n(78),Ce=n(106),Me=n(38),je=g.a.mark(Te),Ie=g.a.mark(Be),we=Object(a.createActions)(s()({},b.a.MESSAGE_SYNC_UPDATE,(function(e){return{conversation:e.conversation}}))).messageSyncUpdate;function Te(e){var t,n,r,s,a,c,i,u,l,d,p,f,A,m,b,v,_,O,S;return g.a.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload.conversation,n=t.id,r=t.shop_id,g.prev=2,g.next=5,Object(h.select)(Object(E.getConvsMessagesRelatedSelector)(n));case 5:if(a=g.sent,c=a.all,i=void 0===c?[]:c,u=a.timeNow,l=a.oldestMessageId,0!==i.length){g.next=9;break}return g.abrupt("return");case 9:return g.next=11,Object(h.call)(E.fetch,{subServer:"coreapi",parent:"conversation",resource:"updated_message_list",params:{shop_id:r,conversation_id:n,last_update_time:u||"0"}});case 11:if(d=g.sent,p=d.messages,f=void 0===p?[]:p,A=d.page_result,f.sort((function(e,t){return t.id-e.id})),!(f.length>0)){g.next=18;break}return m=Object(E.normalize)("messages",f),b=m.entities,g.next=18,Object(h.put)(Object(E.updateEntities)({entities:b}));case 18:if(v=null===(s=f[0])||void 0===s?void 0:s.id,O=(_=A||{}).has_more,!(S=_.next_last_update_time)){g.next=23;break}return g.next=23,Object(h.put)(Object(Me.c)({conversationId:n,updateKey:I.MessagesRelatedKey.TIME_NOW,updateValue:S}));case 23:if(!(O&&l<v&&f.length>0)){g.next=26;break}return g.next=26,Object(h.call)(Te,{payload:{conversation:t}});case 26:g.next=35;break;case 28:if(g.prev=28,g.t0=g.catch(2),!(g.t0 instanceof E.CustomError)){g.next=35;break}return g.next=33,Object(h.put)(Object(Me.c)({conversationId:n,updateKey:I.MessagesRelatedKey.TIME_NOW,updateValue:"0"}));case 33:return g.next=35,Object(h.put)(Object(o.c)({conversationId:n,reset:!0}));case 35:case"end":return g.stop()}}),je,null,[[2,28]])}function Be(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.takeEvery)(we,Te);case 2:case"end":return e.stop()}}),Ie)}function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pe=Object(a.createActions)(s()({},b.a.SET_ENTRY_POINT,(function(e){return{type:e.type,conversationId:e.conversationId}}))).setEntryPoint,De=s()({},b.a.SET_ENTRY_POINT,(function(e,t){var n=t.payload;return ke(ke({},e),{},{entryPoint:n})}));function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fe,Le=Object(a.createActions)(s()({},b.a.UPDATE_HAS_CONFLICT,(function(e){return{hasConflict:e.hasConflict}}))).updateHasConflict,Ge=s()({},b.a.UPDATE_HAS_CONFLICT,(function(e,t){var n=t.payload.hasConflict;return qe(qe({},e),{},{toBottomHasConflict:n})}));function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ye=[o.i,c.n,i.b,Se,y,l.e,d.e,p.g,f.d,c.o,W,ve,be,xe.l,Ce.c,Be,Me.d],ze={messageReducer:Object(a.handleActions)(We(We(We(We(We(We(We(We(We(We(We(We(We({},De),o.a),c.d),ye),u.a),p.a),M.a),Y),Ge),De),d.a),xe.b),Me.b),(Fe={entryPoint:{},status:"pendingInit",messagesRelatedMap:{},messageFillStatusMap:{},videoMap:{1234:{percentage:"10",size:"1300"}},offlineMessages:{}},s()(Fe,"entryPoint",{}),s()(Fe,"toBottomHasConflict",!1),s()(Fe,"faqHistoryHash",{}),s()(Fe,"faqId",null),s()(Fe,"faqHistoryStatus",""),s()(Fe,"reply",{toMessageId:{},inScrollToMessage:!1,scrollToMessageId:""}),Fe))}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.DELETE_CONVERSATION_MESSAGE_HASH="DELETE_CONVERSATION_MESSAGE_HASH",e.SET_ENTRY_POINT="SET_ENTRY_POINT",e.EVALUATION_REQUESTED="EVALUATION_REQUESTED",e.FETCH_FAQ_MESSAGES_REQUESTED="FETCH_FAQ_MESSAGES_REQUESTED",e.FETCH_FAQ_MESSAGES_SUCCEEDED="FETCH_FAQ_MESSAGES_SUCCEEDED",e.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS="UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS",e.UPDATE_CURRENT_FAQ_ID="UPDATE_CURRENT_FAQ_ID",e.SHOW_FAQ_HISTORY_MODAL="SHOW_FAQ_HISTORY_MODAL",e.FETCH_MESSAGES_REQUESTED="FETCH_MESSAGES_REQUESTED",e.FETCH_MESSAGES_SUCCEEDED="FETCH_MESSAGES_SUCCEEDED",e.UPDATE_FETCH_MESSAGES_REQUESTED_STATUS="UPDATE_FETCH_MESSAGES_REQUESTED_STATUS",e.HANDLE_SENSITIVE_URL="HANDLE_SENSITIVE_URL",e.SEND_MESSAGES_FAILED_BY_OFFLINE="SEND_MESSAGES_FAILED_BY_OFFLINE",e.RESET_MESSAGES_FAILED_BY_OFFLINE="RESET_MESSAGES_FAILED_BY_OFFLINE",e.RESEND_OFFLINE_MESSAGES_ONCE="RESEND_OFFLINE_MESSAGES_ONCE",e.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED="RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED",e.FILL_MESSAGE_REQUESTED="FILL_MESSAGE_REQUESTED",e.RECEIVE_MESSAGE_REQUESTED="RECEIVE_MESSAGE_REQUESTED",e.RECEIVE_MESSAGE_SUCCEEDED="RECEIVE_MESSAGE_SUCCEEDED",e.RESET_NEW_CONVERSATION_QUEUE="RESET_NEW_CONVERSATION_QUEUE",e.RESET_OLD_CONVERSATION_QUEUE="RESET_OLD_CONVERSATION_QUEUE",e.RESET_CONVERSATION_QUEUE="RESET_CONVERSATION_QUEUE",e.RESEND_MESSAGE_REQUESTED="RESEND_MESSAGE_REQUESTED",e.SEND_MESSAGES_REQUESTED="SEND_MESSAGES_REQUESTED",e.SEND_MESSAGES_SUCCEEDED="SEND_MESSAGES_SUCCEEDED",e.SENDING_MESSAGES="SENDING_MESSAGES",e.SEND_MESSAGES_TO_PENDING="SEND_MESSAGES_TO_PENDING",e.SEND_MESSAGES_FAILED="SEND_MESSAGES_FAILED",e.ABORT_ALL_SENDING_MESSAGES="ABORT_ALL_SENDING_MESSAGES",e.CANCEL_SENDING_MESSAGE_REQUESTED="CANCEL_SENDING_MESSAGE_REQUESTED",e.CANCEL_SENDING_MESSAGE_SUCCEEDED="CANCEL_SENDING_MESSAGE_SUCCEEDED",e.SEND_VIDEO_MESSAGE_REQUESTED="SEND_VIDEO_MESSAGE_REQUESTED",e.SEND_PRODUCTS_MESSAGE_REQUESTED="SEND_PRODUCTS_MESSAGE_REQUESTED",e.TRANSLATE_MESSAGES_REQUESTED="TRANSLATE_MESSAGES_REQUESTED",e.CHANGE_TRANSLATE_STATUS="CHANGE_TRANSLATE_STATUS",e.UPDATE_VIDEO_INFO="UPDATE_VIDEO_INFO",e.DELETE_VIDEO_INFO="DELETE_VIDEO_INFO",e.MESSAGE_SYNC_UPDATE="MESSAGE_SYNC_UPDATE",e.SHOW_TRANSLATE_FEEDBACK="SHOW_TRANSLATE_FEEDBACK",e.SEND_TRANSLATE_FEEDBACK="SEND_TRANSLATE_FEEDBACK",e.UPDATE_MESSAGE_FILL_STATUS_MAP="UPDATE_MESSAGE_FILL_STATUS_MAP",e.CHATBOT_INTENTS_REPORT_REQUEST="CHATBOT_INTENTS_REPORT_REQUEST",e.UPDATE_HAS_CONFLICT="UPDATE_HAS_CONFLICT",e.UPDATE_MESSAGES_RELATED="UPDATE_MESSAGES_RELATED",e.UPDATE_MESSAGES_RELATED="UPDATE_MESSAGES_RELATED",e.CLEAR_CHAT_ROOM_REFER="CLEAR_CHAT_ROOM_REFER"}(r||(r={}))},function(e,t,n){"use strict";var r,s=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function o(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],s=0;s<e.length;s++){var c=e[s],i=t.base?c[0]+t.base:c[0],u=n[i]||0,l="".concat(i," ").concat(u);n[i]=u+1;var d=o(l),p={css:c[1],media:c[2],sourceMap:c[3]};-1!==d?(a[d].references++,a[d].updater(p)):a.push({identifier:l,updater:g(p,t),references:1}),r.push(l)}return r}function i(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=s(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,l=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,n,r){var s=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,s);else{var a=document.createTextNode(s),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function p(e,t,n){var r=n.css,s=n.media,a=n.sourceMap;if(s?e.setAttribute("media",s):e.removeAttribute("media"),a&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,A=0;function g(e,t){var n,r,s;if(t.singleton){var a=A++;n=f||(f=i(t)),r=d.bind(null,n,a,!1),s=d.bind(null,n,a,!0)}else n=i(t),r=p.bind(null,n,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else s()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var s=o(n[r]);a[s].references--}for(var i=c(e,t),u=0;u<n.length;u++){var l=o(n[u]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=i}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,s,a=e[1]||"",o=e[3];if(!o)return a;if(t&&"function"==typeof btoa){var c=(n=o,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(s," */")),i=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[a].concat(i).concat([c]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var s={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(s[o]=!0)}for(var c=0;c<e.length;c++){var i=[].concat(e[c]);r&&s[i[0]]||(n&&(i[2]?i[2]="".concat(n," and ").concat(i[2]):i[2]=n),t.push(i))}},t}},function(e,t){e.exports=l},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(91);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(62).default,s=n(6);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"t",(function(){return a}));var r=n(48),s=n.n(r),a=s.a.t.bind(s.a)},,function(e,t,n){var r=n(88),s=n(89),a=n(69),o=n(90);e.exports=function(e,t){return r(e)||s(e,t)||a(e,t)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(137),s=n(138),a=n(69),o=n(139);e.exports=function(e){return r(e)||s(e)||a(e)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},,function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return i})),n(24);var r=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},s=function(e,t){return e>t},a=function(e){return e[e.length-1]},o=function(e,t){return e?function(){}:t},c=function(e,t){for(var n=e.length-1;n>=0;){var r=e[n];if(!t.includes(r.id))return n;n--}},i=function(e,t){return e.length===t.length&&e.every((function(e,n){var r=t[n];return JSON.stringify(e)===JSON.stringify(r)}))}}).call(this,n(21).t)},function(e,t){e.exports=d},,function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return S}));var r,s,a=n(4),o=n.n(a),c=n(1);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=c.MessageTypes.MSG_TYPE_ORDER,d=c.MessageTypes.MSG_TYPE_PRODUCT,p=c.MessageTypes.MSG_TYPE_OFFER,f=c.MessageTypes.MSG_TYPE_VOUCHER,A=c.MessageTypes.MSG_TYPE_VIDEO,g=c.MessageTypes.MSG_TYPE_TEXT,h=c.MessageTypes.MSG_TYPE_BUNDLE_DEAL,E=c.MessageTypes.MSG_TYPE_FLASH_SALE,m=c.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,b=c.MessageTypes.MSG_TYPE_ITEM_LIST,v=c.MessageTypes.MSG_TYPE_SHOPPING_CART,_=c.MessageTypes.MSG_TYPE_RATE_CARD,O=(r={},o()(r,p,"impressionOfferMessage"),o()(r,l,"impressionOrderMessage"),o()(r,d,"impressionProductMessage"),o()(r,f,"impressionVoucherMessage"),o()(r,A,"impressionVideoMessage"),s={},o()(s,h,"impressionBundleDealCard"),o()(s,E,"impressionFlashSaleCard"),o()(s,f,"impressionVoucherCard"),o()(s,b,"impressionProductListCard"),o()(s,d,"impressionProductMessage"),o()(s,m,"impressionRateCard"),o()(s,v,"impressionCartCard"),o()(s,A,"impressionVideoMessage"),o()(s,l,"impressionOrderMessage"),s),S=function(e){var t=e.message,n=e.conversationShopId,r=e.isSend,s=e.extraParams,a=void 0===s?{}:s,o=t.id,i=t.type,b=t.content,v=t.source,O=t.to_id,S=t.from_id,y=t.request_id,x=t.crm_activity_id,C=t.textContent,M=void 0===C?{}:C,j=t.conversation_id,I={crm_activity_id:x||"",from_source:x?"CRM":""},w=b["".concat(i,"_id")];switch(i){case g:I={message_type:c.ApiMessageTypes[g],is_sender:r};break;case h:I.bundle_deal_id=b.bundle_deal_id;break;case E:I.flash_sale_id=b.flash_sale_id;break;case m:I.order_id=b.order_id;break;case d:I={product_id:w,product_shopid:n};break;case l:I={order_id:w,order_shopid:n};break;case p:I={offer_id:w,product_id:b.product_id,offer_shopid:n};break;case f:var T=M,B=T.status,R=void 0===B?"":B,k=T.claimed;I.voucher_id=b.voucher_id,r||(I=u(u({},I),{},{source:v,voucher_status:R===c.VoucherStatus.FINISHED?"expired":k?"claimed":"unclaimed",is_sender:r,promotion_id:b.voucher_id,promotion_shopid:n}));break;case A:I={message_id:o===y?0:o,is_sender:r,to_user_id:O,from_user_id:S,video_original_duration:b.duration_seconds};break;case _:I={is_sender:r}}return{data:u(u({conversation_id:j,message_id:o},a),I),shopId:n}}},function(e,t){e.exports=p},function(e,t,n){"use strict";n.r(t);var r=n(23),s=n.n(r),a={};Object.entries({"input-field":["fetchMessageShortcutsGroupRequested","updateFetchMessageShortcutsGroupStatus","fetchMessageShortcutsGroupSucceeded","setCurrentGroupType","setCurrentGroupId","fetchOffersRequested","fetchOffersSucceed","updateFetchOffersRequestedStatus","getPendingOffersCountRequested","getPendingOffersCountSucceed","replyOfferRequested","fetchAllOrdersRequested","fetchOrdersRequested","fetchOrdersSucceed","updateFetchOrdersStatus","fetchAllOrders","fetchOrders","fetchProductsRequested","fetchMyShopProducts","fetchProductsSucceed","updateMyShopProductsRequestedStatus","updateOtherShopProductsRequestedStatus","updateAllShopProductsRequestedStatus","updateMyShopSearchKeyword","updateOtherShopSearchKeyword","updateSelectedProductTab","fetchAllProductsRequested","fetchAllShopProducts","fetchProducts","initPacks","initStickers","selectSticker","updateCurrentSticker","fetchSingleStickerRequested","fetchSingleStickerSucceeded","updateFetchPacksRequestedStatus","updateFetchStickersRequestedStatus","fetchStickersRequested","fetchStickersRequestedSaga","claimVoucherRequested","fetchVouchersRequested","fetchVouchersSucceeded","updateFetchVouchersRequestedStatus"],"message-section":["updateHasConflict","deleteConversationMessageHash","deleteMessageRequested","deleteMessagePostRequested","setEntryPoint","evaluationRequested","showMyRateCard","showRateCard","fetchFaqMessagesRequested","fetchFaqMessagesSucceeded","updateFetchFaqMessagesRequestedStatus","updateCurrentFaqId","showFaqHistoryModal","fetchMessagesRequested","fetchMessagesSucceeded","updateFetchMessagesRequestedStatus","setSecurityTipsMessage","fetchConversationMessagesSaga","fetchMessagesRequestedWithPreloadSaga","fetchMessagesRequestedSaga","updateMessageFillStatusMap","fillMessageRequested","fillMessageContent","handleSensitiveUrl","sendMessagesFailedByOffline","resetMessagesFailedByOffline","resendOfflineMessagesOnce","resendOfflineMessagesOnceSucceed","updateResendConversationMessage","receiveMessageRequested","receiveMessageSucceeded","resetNewConversationQueue","resetOldConversationQueue","resetConversationQueue","handleNewConversationMessageQueue","handleCurrentConversationChange","setReplyToMessage","resetReplyToMessage","scrollToMessage","setScrollToMessageId","resetScrollToMessageId","setInScrollToMessage","setCurrentConversationReplyToMessage","resetCurrentConversationReplyToMessage","resendMessageRequested","sendMessagesRequested","sendMessagesSucceeded","sendingMessages","sendMessagesToPending","sendMessagesFailed","abortAllSendingMessages","cancelSendingMessageRequested","cancelSendingMessageSucceeded","sendVideoMessageRequested","sendProductsMessageRequested","handleSendSucceededMessages","handleFaqExpiredMessage","sendMessages","messageSyncUpdate","translateMessagesRequested","changeTranslateStatus","showTranslateFeedback","sendTranslateFeedback","updateMessagesRelated","clearChatRoomRefer","updateVideoInfo","deleteVideoInfo","uploadVideoGetToken","uploadVideGetResult","uploadVideo"]}).forEach((function(e){var t=s()(e,2),n=t[0];t[1].forEach((function(e){a[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.payload,s=t.isLazy;return{id:n,action:e,payload:r,isLazy:s}}}))})),t.default=a},,,,function(e,t){e.exports=f},,,function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"d",(function(){return O}));var r,s=n(62),a=n.n(s),o=n(4),c=n.n(o),i=n(5),u=n.n(i),l=n(9),d=n(3),p=n(1),f=n(13);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=u.a.mark(_),E=u.a.mark(O),m=Object(l.createActions)((r={},c()(r,f.a.UPDATE_MESSAGES_RELATED,(function(e){return{conversationId:e.conversationId,updateKey:e.updateKey,updateValue:e.updateValue}})),c()(r,f.a.CLEAR_CHAT_ROOM_REFER,(function(e){return{conversationId:e.conversationId}})),r)),b=m.updateMessagesRelated,v=m.clearChatRoomRefer;function _(e){var t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.conversationId,n.next=3,Object(d.put)(b({conversationId:t,updateKey:p.MessagesRelatedKey.REFER,updateValue:null}));case 3:case"end":return n.stop()}}),h)}function O(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.takeEvery)(v,_);case 2:case"end":return e.stop()}}),E)}t.b=c()({},f.a.UPDATE_MESSAGES_RELATED,(function(e,t){var n=t.payload,r=n.conversationId,s=n.updateKey,o=n.updateValue,i=e.messagesRelatedMap,u=i[r]||{},l=u[s];return g(g({},e),{},{messagesRelatedMap:g(g({},i),{},c()({},r,g(g({},u),{},c()({},s,"object"===a()(l)&&o&&"object"===a()(o)?g(g({},l),o):o))))})}))},function(e,t,n){"use strict";n.d(t,"d",(function(){return G})),n.d(t,"c",(function(){return U})),n.d(t,"b",(function(){return Y})),n.d(t,"e",(function(){return V}));var r,s=n(24),a=n.n(s),o=n(4),c=n.n(o),i=n(5),u=n.n(i),l=n(9),d=n(3),p=n(1),f=n(2),A=n(77),g=n(13);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=u.a.mark(Y),b=u.a.mark(z),v=u.a.mark(H),_=u.a.mark(V),O="source",S="content",y=p.MessageFillStatus.FILLED,x=p.MessageFillStatus.FAILED,C=p.MessageFillStatus.FILLING,M=p.MessageTypes.MSG_TYPE_PRODUCT,j=p.MessageTypes.MSG_TYPE_ORDER,I=p.MessageTypes.MSG_TYPE_OFFER,w=p.MessageTypes.MSG_TYPE_VOUCHER,T=p.MessageTypes.MSG_TYPE_FEED_STORY,B=p.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,R=p.MessageTypes.MSG_TYPE_BUNDLE_MESSAGE,k=p.MessageTypes.MSG_TYPE_SHOPPING_CART,P=p.MessageTypes.MSG_TYPE_RATE_CARD,D=p.MessageTypes.MSG_TYPE_RATE_CARDS,N=p.MessageTypes.MSG_TYPE_WEBVIEW,q=p.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,F=[M,j,I,w,P,T,B,R,k,N,q],L=Object(l.createActions)((r={},c()(r,g.a.UPDATE_MESSAGE_FILL_STATUS_MAP,(function(e){return{status:e.status,messageIds:e.messageIds}})),c()(r,g.a.FILL_MESSAGE_REQUESTED,(function(e){return{message:e.message,isSource:e.isSource}})),r)),G=L.updateMessageFillStatusMap,U=L.fillMessageRequested,W=function(e,t,n){var r,s=t["".concat(e,"_id")];return e===B&&(s=t.order_id),e===P?t.card_id:e===q?null==t||null===(r=t.bot_order_info)||void 0===r?void 0:r.order_id:s||n};function Y(e){var t,n,r,s,a,o,c,i,l,A,g,h,E,b,v,_,S,y,x,M=arguments;return u.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=M.length>1&&void 0!==M[1]?M[1]:{},n=t.sync,r=void 0!==n&&n,s=t.reFillType,a=e[0].conversation_id,u.next=5,Object(d.select)(f.isSubAccountSelector);case 5:return o=u.sent,u.next=8,Object(d.select)(f.curConvsMessageSelector);case 8:return c=u.sent,u.next=11,Object(d.select)(f.currentUserIdSelector);case 11:return i=u.sent,u.next=14,Object(d.select)(Object(f.getConversationShopId)(a));case 14:return l=u.sent,u.next=17,Object(d.select)(f.messageFillStatusMapSelector);case 17:return A=u.sent,g={},h=[],E=[],s?(b=e[0],v="".concat(s===O?"source-":"").concat(b.id),g={messageId:[v]},h=[v]):e.forEach((function(e){var t=e.type,n=e.content,r=e.id,s=e.source_type,a=e.source_content,u=void 0===a?{}:a,d=c.find((function(e){var t=e.id;return r===t})),f=!1,m=!1;if(null!=d&&d.textContent){f=!0;var b=d.content,v=d.textContent,_=void 0===v?{}:v;switch(t){case N:m=b.type===D&&_.status===p.EvaluationStatus.UNRATED;break;case P:m=_.status===p.EvaluationStatus.UNRATED;break;case I:m=_.status===p.OfferStatus.PENDING;break;case R:m=!1;break;default:F.includes(t)&&(m=!0)}}else f=A[r]===C;if(!f||m){var O;if(s&&u){var S=u["".concat(s,"_id")];if(S&&![-1,0].includes(S)){var y="".concat("source-").concat(r);m?E.push(y):h.push(y),O=W(s,u,y),(g[O]||(g[O]=[]))&&g[O].push(y)}}if(F.includes(t)&&n){var x=!1;switch(t){case j:x=o&&l!==n.shop_id;break;case P:x=i!==e.to_id}x||(m?E.push(r):h.push(r),O=W(t,n,r),(g[O]||(g[O]=[]))&&g[O].push(r))}}})),u.next=24,Object(d.put)(G({status:C,messageIds:h}));case 24:if(_=Object.keys(g),!r){u.next=32;break}return S=[],_.forEach((function(t){var n=g[t];S.push(Object(d.call)(z,e,n,E))})),u.next=30,Object(d.all)(S);case 30:u.next=39;break;case 32:if(!_.length){u.next=39;break}return y=_.shift(),x=g[y],u.next=37,Object(d.spawn)(z,e,x,E);case 37:u.next=32;break;case 39:case"end":return u.stop()}}),m)}function z(e,t,n){var r,s,o,c,i,l,g,h,m,v,_,O,S,C,F,L,U,W,Y,z,H,V,Q,X,K,Z,J,$,ee,te,ne,re,se;return u.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:o=t[0],c=o,(i=o.includes("source-"))&&(c=o.split("source-")[1]),l=e.find((function(e){return e.id===c})),h=(g=l).content,m=g.type,v=g.source_type,_=g.source_content,C=(S=i?_:h)["".concat(O=i?v:m,"_id")],(F=m===q?null==h||null===(r=h.bot_order_info)||void 0===r?void 0:r.shop_id:S.shop_id)||(F=l.to_shop_id),u.prev=11,u.t0=O,u.next=u.t0===M?15:u.t0===j||u.t0===B||u.t0===q?19:u.t0===I?23:u.t0===w?27:u.t0===T?31:u.t0===k?35:u.t0===P?39:u.t0===R?44:u.t0===N?48:62;break;case 15:return u.next=17,Object(d.call)(f.showProduct,{payload:{id:C,shopId:F}});case 17:return L=u.sent,u.abrupt("break",62);case 19:return u.next=21,Object(d.call)(f.showOrder,{payload:{id:C||h.order_id||(null==h||null===(s=h.bot_order_info)||void 0===s?void 0:s.order_id),shopId:F,isChatbotOrder:O===q}});case 21:return L=u.sent,u.abrupt("break",62);case 23:return u.next=25,Object(d.call)(f.showOffer,{payload:{id:C,shopId:F}});case 25:return L=u.sent,u.abrupt("break",62);case 27:return u.next=29,Object(d.call)(f.showVoucher,{shopId:F,id:C});case 29:return L=u.sent,u.abrupt("break",62);case 31:return u.next=33,Object(d.call)(f.showFeedStory,{payload:{id:C,creatorId:h.creator_id}});case 33:return L=u.sent,u.abrupt("break",62);case 35:return u.next=37,Object(d.call)(f.showCartReminder,{cartItems:h.cart_items,shopId:F});case 37:return L=u.sent,u.abrupt("break",62);case 39:return u.next=41,Object(d.call)(A.c,{shopId:F,ids:h.card_id,type:m});case 41:return U=u.sent,L=U[0],u.abrupt("break",62);case 44:return u.next=46,Object(d.call)(f.showFaqHistory,{payload:{id:c,ids:h.messages.slice(0,3)}});case 46:return L=u.sent,u.abrupt("break",62);case 48:if(W=h.url,z=(Y=void 0===W?"":W).split("/"),(H=z[z.length-2])!==D){u.next=61;break}return V={},Q=Object(p.getUrlParam)("id",Y),t.forEach((function(e){e.includes("source-")||(V[e]={content:E(E({},h),{},{id:Q,type:H})})})),u.next=57,Object(d.put)(Object(f.batchUpdateRecord)({name:"messages",records:V}));case 57:return u.next=59,Object(d.call)(A.c,{ids:[Q],shopId:Object(p.getUrlParam)("shop_id",Y),type:m});case 59:X=u.sent,L=X[0];case 61:return u.abrupt("break",62);case 62:if(L){u.next=66;break}return u.next=65,Object(d.put)(G({status:x,messageIds:t.filter((function(e){return!n.includes(e)}))}));case 65:return u.abrupt("return");case 66:K={},Z=a()(t);case 68:if(!Z.length){u.next=78;break}return J=Z.shift(),u.next=72,Object(d.select)(Object(f.getMessageSelector)(J));case 72:$=u.sent,ee={},te={type:O,content:L},J.includes("source-")&&!Object(p.simpleEqualCheck)(te,null==$?void 0:$.sourceContent)?(ee=K[J.split("source-")[1]]||{},K[J.split("source-")[1]]=E(E({},ee),{},{sourceContent:te})):Object(p.simpleEqualCheck)(L,null==$?void 0:$.textContent)||(ee=K[J]||{},K[J]=E(E({},ee),{},{textContent:L})),u.next=68;break;case 78:return u.next=80,Object(d.put)(Object(f.batchUpdateRecord)({name:"messages",records:K}));case 80:ne=e.filter((function(e){var n;return t.includes(null===(n=e.quoted_msg)||void 0===n?void 0:n.id)}));case 81:if(!ne.length){u.next=90;break}return re=ne.shift(),u.next=85,Object(d.select)(Object(f.getMessageSelector)(re.quoted_msg.id));case 85:return se=u.sent,u.next=88,Object(d.put)(Object(f.updateRecord)({name:"messages",id:re.id,record:{quoted_msg:E({},se)}}));case 88:u.next=81;break;case 90:return u.next=92,Object(d.put)(G({status:y,messageIds:t}));case 92:u.next=98;break;case 94:return u.prev=94,u.t1=u.catch(11),u.next=98,Object(d.put)(G({status:x,messageIds:t.filter((function(e){return!n.includes(e)}))}));case 98:case"end":return u.stop()}}),b,null,[[11,94]])}function H(e){var t,n,r;return u.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.message,r=t.isSource,s.next=3,Object(d.call)(Y,[n],{reFillType:r?O:S});case 3:case"end":return s.stop()}}),v)}function V(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.takeEvery)(U,H);case 2:case"end":return e.stop()}}),_)}t.a=c()({},g.a.UPDATE_MESSAGE_FILL_STATUS_MAP,(function(e,t){var n=t.payload,r=n.status,s=n.messageIds,a=Object.assign({},e.messageFillStatusMap);return s.forEach((function(e){r===y?delete a[e]:a[e]=r})),E(E({},e),{},{messageFillStatusMap:E({},a)})}))},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,n.apply(this,arguments)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){"use strict";(function(e,s){r.d(n,"i",(function(){return Se})),r.d(n,"j",(function(){return ye})),r.d(n,"m",(function(){return xe})),r.d(n,"k",(function(){return Ce})),r.d(n,"h",(function(){return Me})),r.d(n,"a",(function(){return je})),r.d(n,"b",(function(){return Ie})),r.d(n,"c",(function(){return we})),r.d(n,"l",(function(){return Te})),r.d(n,"f",(function(){return Fe})),r.d(n,"e",(function(){return Le})),r.d(n,"g",(function(){return Ge})),r.d(n,"o",(function(){return He})),r.d(n,"n",(function(){return Ve}));var a,o=r(23),c=r.n(o),i=r(24),u=r.n(i),l=r(4),d=r.n(l),p=r(5),f=r.n(p),A=r(55),g=r.n(A),h=r(27),E=r(210),m=r.n(E),b=r(148),v=r.n(b),_=r(211),O=r.n(_),S=r(9),y=r(3),x=r(2),C=r(84),M=r(78),j=r(79),I=r(47),w=r(80),T=r(83),B=r(39),R=r(42),k=r(1),P=r(109),D=f.a.mark(Re),N=f.a.mark(ke),q=f.a.mark(Pe),F=f.a.mark(Ne),L=f.a.mark(Fe),G=f.a.mark(Le),U=f.a.mark(Ge),W=f.a.mark(We),Y=f.a.mark(Ye),z=f.a.mark(ze),H=f.a.mark(He),V=f.a.mark(Ve);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}v.a.init();var K=k.MessageTypes.MSG_TYPE_IMAGE,Z=k.MessageTypes.MSG_TYPE_TEXT,J=k.MessageTypes.MSG_TYPE_WEBVIEW,$=k.MessageTypes.MSG_TYPE_VIDEO,ee=(k.MessageTypes.MSG_TYPE_ITEM_LIST,k.MessageTypes.MSG_TYPE_RATE_CARDS),te=k.MessageTypes.MSG_TYPE_RATE_CARD,ne=k.MessageTypes.MSG_TYPE_FAQ_QUESTION,re=k.MessageTypes.MSG_TYPE_FAQ_FEEDBACK,se=k.MessageTypes.MSG_TYPE_FAQ_CATEGORY_CHOICE,ae=k.MessageTypes.MSG_TYPE_FAQ_TYPE_CHOICE,oe=k.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,ce=k.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,ie=k.MessageErrorCode.DEFAULT,ue=k.MessageErrorCode.FORBIDDEN,le=k.MessageErrorCode.LIMITING,de=k.MessageErrorCode.CUSTOM_ERROR,pe=k.MessageErrorCode.BLACKLIST,fe=k.MessageErrorCode.CANCEL_ORDER,Ae=k.MessageErrorCode.UNVERIFIED_PHONE_NUMBER,ge=k.MessageErrorCode.EXCEED_DAILY_LIMIT,he=k.MessageErrorCode.UNTRUSTED_NETWORK,Ee=k.MessageErrorCode.NEED_CAPTCHA,me=k.MessageErrorCode.DFP_ERROR,be=k.MessageErrorCode.SPAMMER,ve=k.MessageErrorCode.FAQ_EXPIRED,_e=k.MessageErrorCode.FAQ_SESSION_OLD,Oe=Object(S.createActions)({SEND_MESSAGES_REQUESTED:function(e){var t=e.id,n=e.conversationId,r=e.messages,s=e.more;return{id:t,conversationId:n,messages:r,more:void 0===s?{}:s}},SEND_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,requestIdToMessageId:e.requestIdToMessageId}},SENDING_MESSAGES:function(e){var t=e.conversationId,n=e.requestIds,r=e.isCancelable;return{conversationId:t,requestIds:n,isCancelable:void 0!==r&&r}},SEND_MESSAGES_TO_PENDING:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},SEND_MESSAGES_FAILED:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},ABORT_ALL_SENDING_MESSAGES:function(){return{}},CANCEL_SENDING_MESSAGE_REQUESTED:function(e){return{id:e.id,conversationId:e.conversationId}},CANCEL_SENDING_MESSAGE_SUCCEEDED:function(e){return{id:e.id,conversationId:e.conversationId}},SEND_VIDEO_MESSAGE_REQUESTED:function(e){var t=e.conversationId,n=e.message,r=e.isResend;return{conversationId:t,message:n,isResend:void 0!==r&&r}}}),Se=Oe.sendMessagesRequested,ye=Oe.sendMessagesSucceeded,xe=Oe.sendingMessages,Ce=Oe.sendMessagesToPending,Me=Oe.sendMessagesFailed,je=Oe.abortAllSendingMessages,Ie=Oe.cancelSendingMessageRequested,we=Oe.cancelSendingMessageSucceeded,Te=Oe.sendVideoMessageRequested;function Be(e,t){return delete e.errorCode,delete e.error,X(X({},e),{},{chat_send_option:{force_send_cancel_order_warning:t,comply_cancel_order_warning:!t}})}function Re(t){var n,r,s,a,o,c,i;return f.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return n=t.payload,r=n.conversationId,s=n.message,a=n.isResend,u.next=3,Object(y.call)(R.i,r);case 3:if(null!==(o=u.sent)){u.next=8;break}return u.next=7,Object(y.call)(x.setToastInformationSaga,Object(x.setToastInformation)({toast:{show:!0,type:"fail",message:e("toast.chat_bot_limit")}}));case 7:return u.abrupt("return");case 8:if(!1!==o){u.next=12;break}return u.next=11,Object(y.call)(x.setToastInformationSaga,Object(x.setToastInformation)({error:null}));case 11:return u.abrupt("return");case 12:return c=a?s.id:g()(),i=X({},o),a&&(i.precent=0),u.next=17,Object(y.put)(Object(R.e)({id:c,info:i}));case 17:return u.next=19,Object(y.put)(Se({id:c,conversationId:r,messages:[X(X({},s),{},{type:$})],more:{isResend:a}}));case 19:case"end":return u.stop()}}),D)}function ke(e,t){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(y.delay)(1e3);case 2:return n.next=4,Object(y.put)(Ce({conversationId:e,requestIds:t}));case 4:case"end":return n.stop()}}),N)}function Pe(e,t){var n,r,s,a,o,c,i,u,l,d,p,A,g,E,m,b;return f.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(n=e.type,r=e.request_id,s=e.content,a=s.url,o=s.file,c=s.duration_seconds,i=s.video_url,u=n===$,f.prev=2,n!==K||a){f.next=24;break}return(l=new window.FormData).append("file",o),l.append("conversation_id",t),f.next=9,Object(y.call)(x.fetch,{method:"POST",subServer:"coreapi",resource:"images",payload:l});case 9:d=f.sent,p=d.url,A=d.thumbnail,g=d.thumb_width,E=d.thumb_height,m=d.file_server_id,e.content.url_hash=p.split("/").pop(),e.content.url=p,e.content.thumb_url=A,e.content.thumb_width=g,e.content.thumb_height=E,e.content.file_server_id=m,delete e.content.file,f.next=30;break;case 24:if(!u||i){f.next=30;break}return f.next=27,Object(y.call)(R.h,{id:r,file:o,duration:c,onProgress:function(e){h.store.dispatch(Object(R.e)({id:r,info:{percent:e}}))}});case 27:b=f.sent,e.content=X(X({},e.content),b),delete e.content.file;case 30:return f.abrupt("return",!0);case 33:if(f.prev=33,f.t0=f.catch(2),f.t1=u,!f.t1){f.next=39;break}return f.next=39,Object(y.put)(Object(R.e)({id:r,info:{percent:void 0}}));case 39:return f.abrupt("return",!1);case 40:case"end":return f.stop()}}),q,null,[[2,33]])}var De=["request_id","to_id","type","content","shop_id","order_id","source","chat_send_option","source_content","source_type","entry_point"];function Ne(e,t,n){var r,a,o,c,i,u,l,d,p,A,g,h;return f.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return r="",a={},De.forEach((function(t){e[t]&&(a[t]=e[t]),a[t]&&a[t].localUrl&&(r=a[t].localUrl,delete a[t].localUrl)})),e.retryRequestId&&(a.request_id=e.retryRequestId),o=JSON.stringify(X(X({},a),{},{device_id:n,source:Object(k.checkIsScChat)()?"minichat":"pc_mall"})),c=""+Date.parse(new Date)/1e3,i={},f.prev=7,u=m()(o).toString(),f.next=11,O.a.x(u,c,1,(s.env.COUNTRY||"SG").toUpperCase());case 11:i=f.sent,f.next=17;break;case 14:f.prev=14,f.t0=f.catch(7),i={"X-Sap-Access-S":o.request_id,"X-Sap-Access-T":c,"X-Sap-Access-F":"error"};case 17:return f.prev=17,f.next=20,v.a.getClientCheckData();case 20:l=f.sent,f.next=26;break;case 23:f.prev=23,f.t1=f.catch(17),l="error";case 26:return d=Math.floor(Date.now()/1e3),f.prev=27,p=X(X({},i),{},{"X-Dfp-Access-F":l}),f.next=31,Object(y.select)(x.captchaSignatureSelector);case 31:if(!(A=f.sent)){f.next=36;break}return p["X-Dfp-Access-S"]=A,f.next=36,Object(y.call)(x.updateCaptchaSignatureSaga,Object(x.updateCaptchaSignature)({signature:""}));case 36:return f.next=38,Object(y.call)(x.fetch,{method:"POST",resource:"messages",payload:o,headers:X({},p)});case 38:return g=f.sent,r&&(g.content.localUrl=r),t&&Object(k.removeItem)("mini-sc_redirect"),f.abrupt("return",X(X({},g),{},{created_at:new Date,created_timestamp:d}));case 44:f.prev=44,f.t2=f.catch(27),f.t3=!0,f.next=f.t3===f.t2 instanceof x.Forbidden?49:f.t3===f.t2 instanceof x.Limiting?51:f.t3===f.t2 instanceof x.CustomError?53:f.t3===f.t2 instanceof x.Blacklist?55:f.t3===f.t2 instanceof x.CancelOrderWarning?58:f.t3===f.t2 instanceof x.UnverifiedPhoneNumber?60:f.t3===("message_exceed_daily_limit"===f.t2.message)?62:f.t3===("request_block_errorrequest block error."===f.t2.message)?64:f.t3===("need_captcha"===f.t2.message)?66:f.t3===("dfp_block_error"===f.t2.message)||f.t3===("captcha_error"===f.t2.message)?68:f.t3===("soft_spammer_error"===f.t2.message)?70:f.t3===("faq_session_expire"===f.t2.message)?72:f.t3===_e?74:77;break;case 49:return h=ue,f.abrupt("break",78);case 51:return h=le,f.abrupt("break",78);case 53:return h=de,f.abrupt("break",78);case 55:return h=pe,e.message_option=k.MessageOption.MSG_OPT_CENSORED_BLACKLIST,f.abrupt("break",78);case 58:return h=fe,f.abrupt("break",78);case 60:return h=Ae,f.abrupt("break",78);case 62:return h=ge,f.abrupt("break",78);case 64:return h=he,f.abrupt("break",78);case 66:return h=Ee,f.abrupt("break",78);case 68:return h=me,f.abrupt("break",78);case 70:return h=be,f.abrupt("break",78);case 72:return h=ve,f.abrupt("break",78);case 74:return f.next=76,Object(y.spawn)(Le,!1);case 76:return f.abrupt("break",78);case 77:h=ie;case 78:return r&&(e.content.localUrl=r),f.abrupt("return",X(X({},e),{},{requestId:e.request_id,created_timestamp:d,errorCode:h,error:f.t2}));case 80:case"end":return f.stop()}}),F,null,[[7,14],[17,23],[27,44]])}var qe=function(e){return e.content&&e.content.translation&&e.content.translation.text};function Fe(e,t){var n,r,s,a,o,c,i,u,l,p,A,g,h,E;return f.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return n=[],r=[],f.next=4,Object(y.select)(x.currentConversationIdSelector);case 4:if((s=f.sent)===t){f.next=12;break}return f.next=8,Object(y.select)(Object(x.getConvsMessagesRelatedSelector)(t));case 8:return n=f.sent,f.next=11,Object(y.select)(Object(x.getMessagesSelector)(n.all));case 11:r=f.sent;case 12:return f.next=14,Object(y.put)(Object(B.d)({conversationId:t,status:k.MessageFillStatus.FILLED,messageIds:e.map((function(e){return e.id}))}));case 14:return f.next=16,Object(y.select)(x.curConvsMessageSelector);case 16:if(a=f.sent,o=Object(x.normalize)("messages",a).entities.messages||{},c=[],(i=e.map((function(e){var n,i=e.request_id,u=e.id,l=(e.content,e.type);if(o[i]){l===$&&c.push(Object(y.put)(Object(R.b)({id:i}))),c.push(Object(y.put)(Object(x.deleteRecord)({name:"messages",id:i})));var d=X(X({},o[i]),{},{translateStatus:qe(e)?k.TranslationStatus.SHOW:k.TranslationStatus.FAILED});return o[u]?null:Object(k.deepMerge)(d,e)}if((n=s!==t?r.filter((function(e){return e&&e.retryRequestId===i})):a.filter((function(e){return e.retryRequestId===i}))).length){var p=n[0].request_id;c.push(Object(y.put)(Object(x.deleteRecord)({name:"messages",id:p})));var f=X(X({},o[p]),{},{translateStatus:qe(e)?k.TranslationStatus.SHOW:k.TranslationStatus.FAILED}),A=o[u]?null:Object(k.deepMerge)(f,e);return A&&A.retryRequestId&&(A.original_request_id=p),A}return null})).filter(Boolean)).length){f.next=22;break}return f.abrupt("return");case 22:return f.next=24,Object(y.call)(x.updateOrReplaceAction,o,i,"messages");case 24:return f.next=26,Object(y.put)(ye({conversationId:t,requestIdToMessageId:i.reduce((function(e,t){return t.original_request_id?X(X({},e),{},d()({},t.original_request_id,t.id)):X(X({},e),{},d()({},t.request_id,t.id))}),{})}));case 26:return i.sort((function(e,t){return t.id-e.id})),f.next=29,Object(y.all)(c);case 29:return u=i[0],l=u.id,p=u.content,A=u.created_at,g=u.created_timestamp,h=u.type,E=u.message_option,f.next=32,Object(y.put)(Object(x.updateRecord)({name:"conversations",id:t,record:{latest_message_id:l,latest_message_type:h,latest_message_content:p,last_message_time:A,last_message_option:E,max_general_option_hide_time:g,crm_message_preview:{},unread_count:0,flag:"normal"}}));case 32:case"end":return f.stop()}}),L)}function Le(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.put)(Object(x.showModal)({type:"CONFIRM_MODAL",actions:{confirm:{label:{key:"common.ok"},handler:function(){h.store.dispatch(Object(x.closeModal)())}}},additions:{content:{key:"faq.expired".concat(e?".chat_with_seller":"")},modalStyle:{width:"348px",minWidth:"348px"},contentStyle:{paddingBottom:0,lineHeight:"20px"},confirmStyle:{width:"auto",padding:"0 16px",height:"32px",lineHeight:"32px"}}}));case 2:case"end":return t.stop()}}),G)}function Ge(n){var r,s,a,o,c,i,l,d,p,A,E,m,b,v,_,O,S,C,M,I,T,B,R,P,D,N,q,F,L,G,W,Y,z,H;return f.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(r=n.conversationId,s=n.requestIds,a=n.messages,o=n.more,i=(c=void 0===o?{}:o).isRedirect,l=c.isCancelable,a[0].content.type===ee||a[0].type===te){f.next=5;break}return f.next=5,Object(y.put)(xe({conversationId:r,requestIds:s,isCancelable:l}));case 5:if(d=a.length,f.t0=!l,!f.t0){f.next=10;break}return f.next=10,Object(y.spawn)(ke,r,s);case 10:return p=0,A=[],E=[],m=[],f.next=16,Object(y.select)(x.networkStatusSelector);case 16:return b=f.sent,f.next=19,Object(y.call)(k.getItem,"device_id");case 19:if(v=f.sent,"offline"!==b){f.next=26;break}_=a.map((function(e){return X(X({},e),{},{requestId:e.request_id})})),m.push.apply(m,u()(_)),E.push.apply(E,u()(_)),f.next=55;break;case 26:if(!(p<d)){f.next=55;break}return O=a[p],f.next=30,Object(y.call)(Pe,O,r);case 30:if(S=f.sent,C=void 0,S){f.next=37;break}C=X(X({},O),{},{requestId:O.request_id}),E.push(C),f.next=52;break;case 37:return f.next=39,Object(y.call)(Ne,O,i,v);case 39:if(!(C=f.sent).errorCode){f.next=50;break}if(M=O.type,I=O.content,!(M===J&&I&&I.type===ee||M===te)){f.next=47;break}return f.next=45,Object(y.call)(x.setToastInformationSaga,Object(x.setToastInformation)({error:C.error}));case 45:f.next=48;break;case 47:E.push(C);case 48:f.next=51;break;case 50:A.push(C);case 51:C.error&&C.error.offlineError&&m.push(C);case 52:p++,f.next=26;break;case 55:if(!A.length){f.next=59;break}return A.forEach((function(e){e.send_status=k.MessageSendStatus.SUCCEED})),f.next=59,Object(y.call)(Fe,A,r);case 59:if(!E.length){f.next=116;break}return f.next=62,Object(y.select)(x.currentConversationIdSelector);case 62:if(f.sent!==r){f.next=76;break}if(!(T=E.find((function(e){return e.errorCode===Ee})))){f.next=70;break}return f.next=68,Object(y.put)(Object(x.updateCaptchaVisible)({visible:!0,resendMessagePayload:{conversationId:r,messageId:T.id}}));case 68:f.next=76;break;case 70:if(B=[ie,de],R=E.find((function(e){return B.includes(e.errorCode)})),f.t1=R,!f.t1){f.next=76;break}return f.next=76,Object(y.call)(x.setToastInformationSaga,Object(x.setToastInformation)({error:R.error}));case 76:return P=[],E.forEach((function(e){var n=e.errorCode,r=e.error,s=e.request_id,a=e.type,o=e.content,c=e.to_id,i=e.from_id,u=e.shop_id,l=e.conversation_id,d=e.message_option;n===le&&P.push(Object(y.call)(x.setToastInformationSaga,Object(x.setToastInformation)({error:r})));var p={errorCode:n,translateStatus:k.TranslationStatus.FAILED,retryRequestId:g()()};a===$&&t({operation:k.TrackerOperation.IMPRESSION,trackerName:"impressionResendVideo",data:{message_id:0,conversation_id:l,is_sender:!0,from_user_id:i,to_user_id:c,video_original_duration:o.duration_seconds},shopId:u}),(a===Z&&n===pe||[$,K].includes(a))&&(p.content=o),Object(k.hasTargetMessageOption)(d,k.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(p.message_option=d),P.push(Object(y.put)(Object(x.updateRecord)({name:"messages",id:s,record:p})))})),f.next=80,Object(y.all)(P);case 80:return D=E.map((function(e){return e.requestId})),f.next=83,Object(y.put)(Me({conversationId:r,requestIds:D}));case 83:if(N=[fe,he,me,ge,be,ve,_e],!(q=E.find((function(e){return N.includes(e.errorCode)})))){f.next=116;break}return f.next=88,Object(y.select)(x.currentConversationShopSelectors);case 88:F=f.sent,L=(F||{}).country,G=L&&L.toLowerCase(),f.t2=q.errorCode,f.next=f.t2===fe?94:f.t2===ge?100:f.t2===be?103:f.t2===ve?106:f.t2===_e?109:112;break;case 94:return f.next=96,Object(y.select)(Object(x.getMessageSelector)(q.request_id));case 96:return W=f.sent,f.next=99,Object(y.put)(Object(x.showModal)({type:"Cancel_ORDER_WARNING_MODAL",title:{key:"cancel_order.modal.title"},additions:{content:{key:"cancel_order.modal.content"},region:G||"sg"},actions:{cancel:{label:{key:"cancel_order.modal.send_it"},handler:function(){h.store.dispatch(Object(x.closeModal)());var e=Be(W,!0);h.store.dispatch(Object(j.a)({conversationId:r,message:e}))}},confirm:{label:{key:"cancel_order.modal.not_send"},handler:function(){h.store.dispatch(Object(x.closeModal)());var e=Be(W,!1);h.store.dispatch(Object(j.a)({conversationId:r,message:e}))}}}}));case 99:return f.abrupt("break",116);case 100:return f.next=102,Object(y.put)(Object(x.showModal)({type:"CONFIRM_MODAL",additions:{content:{key:"label.exceed.daily.limit.warning"}},actions:{confirm:{label:{key:"label.modal.confirm"},handler:function(){return h.store.dispatch(Object(x.closeModal)())}}}}));case 102:return f.abrupt("break",116);case 103:return f.next=105,Object(y.put)(Object(x.showModal)({type:"SPAMMER_MODAL",title:{key:"modal.translation_spammer.title"},additions:{content:{key:"modal.translation_spammer.content"},region:G||"sg"},actions:{confirm:{label:{key:"common.ok"},handler:function(){return h.store.dispatch(Object(x.closeModal)())}}}}));case 105:return f.abrupt("break",116);case 106:return f.next=108,Object(y.spawn)(Le,!0);case 108:return f.abrupt("break",116);case 109:return f.next=111,Object(y.spawn)(Le,!1);case 111:return f.abrupt("break",116);case 112:return Y=q.errorCode===me,z='<a style="color: #395692" target="blank" href="'.concat(Object(k.getShopeeCustomerService)(G),'">').concat(e("text.shopee_cs"),"</a>"),f.next=116,Object(y.put)(Object(x.showModal)({type:"CONFIRM_MODAL",title:{key:"modal.title.".concat(Y?"common_error":"untrusted_network")},additions:{withCloseIcon:!0,renderContentAsHtml:!0,content:e("modal.content.".concat(Y?"common_error_hint":"untrusted_network"),{someone:z})},actions:{confirm:{label:{key:"common.ok"}}}}));case 116:if(!m.length){f.next=121;break}return H=m.map((function(e){return e.requestId})),f.next=120,Object(y.put)(Object(w.e)({conversationId:r,requestIds:H}));case 120:Object(x.networkJudge)();case 121:case"end":return f.stop()}}),U)}var Ue=[ne,re,se,ae,oe,ce];function We(e){var t,n,r,s,a,o,c,i,u,l,d,p,A,g,h,E,m,b,v,_,O,S,j,w,B,R;return f.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(n=e.payload,r=n.id,s=n.conversationId,a=n.messages,o=n.more,c=null===(t=a[0])||void 0===t?void 0:t.type,!Ue.includes(c)){f.next=18;break}return f.next=5,Object(y.select)(x.currentFaqSessionInfoSelector);case 5:if(u=f.sent,l=u.faqSessionId,d=u.sessionExpiryTime,void 0!==l){f.next=12;break}return f.next=11,Object(y.call)(x.setToastInformationSaga,Object(x.setToastInformation)({error:null}));case 11:return f.abrupt("return");case 12:if(p=(null===(i=a[0])||void 0===i?void 0:i.content)||{},A=p.faq_session_id,Object(P.a)(l,A,d)){f.next=18;break}return g="0"===d||l===A&&(new Date).getTime()>d/1e6,f.next=17,Object(y.spawn)(Le,g);case 17:return f.abrupt("return");case 18:if(!Object(k.checkIsScChat)()){f.next=21;break}return f.next=21,Object(y.put)(Object(x.reportRequested)({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 21:return f.next=23,Object(y.select)(Object(x.getConversation)(s));case 23:if(h=f.sent,E=h.to_id,!o.isResend){f.next=30;break}return f.next=29,Ge({conversationId:s,messages:a,requestIds:[a[0].request_id],more:{isCancelable:!!r}});case 29:return f.abrupt("return");case 30:return f.next=32,Object(y.select)(x.inlocationSelector);case 32:return m=f.sent,f.next=35,Object(y.select)(x.inScrollToMessageSelector);case 35:if(b=f.sent,!m&&!b){f.next=50;break}if(f.t0=b,!f.t0){f.next=42;break}return f.next=42,Object(y.put)(Object(M.i)({inScrollToMessage:!1}));case 42:if(f.t1=m,!f.t1){f.next=46;break}return f.next=46,Object(y.put)(Object(x.updateLocationMode)({inlocation:!1}));case 46:return f.next=48,Object(y.put)(Object(T.b)({conversationId:s}));case 48:return f.next=50,Object(y.call)(I.d,{payload:{conversationId:s,reset:!0,source:k.MessageSource.SEND}});case 50:return f.next=52,Object(y.select)(x.entryPointSelector);case 52:return v=f.sent,f.next=55,Object(y.select)(x.curConvsMessageSelector);case 55:return f.sent,f.next=58,Object(y.call)(k.getItem,"mini-sc_redirect");case 58:return _=f.sent,O=h.shop_id,S=a.map((function(e){var t;return Object(C.c)({id:r,recipientID:E,message:e,redirectInfo:_,conversationId:s,replyToMessageId:null==e||null===(t=e.replyToMessage)||void 0===t?void 0:t.id,shopId:O,entryPoint:v})})),f.next=63,Object(y.select)(x.currentUserIdSelector);case 63:return j=f.sent,f.next=66,Object(y.select)(x.currentUserSelector);case 66:return w=f.sent,B=S.map((function(e,t){var n,r=X({},e);r.from_id=j;var s,o=r.type,c=r.content;if(["product","order","voucher"].includes(o)){var i="".concat(o,"_id"),u=c[i],l=a.find((function(e){return e.content[i]===u}));l&&(r.textContent=l.textContent)}else o===Z&&(r.translateStatus=k.TranslationStatus.PENDING);return null!==(n=a[t])&&void 0!==n&&n.replyToMessage&&(r.quoted_msg=null===(s=a[t])||void 0===s?void 0:s.replyToMessage),r.from_user_name=w.username||w.name,r})),R=Object(x.normalize)("messages",B),f.next=71,Object(y.put)(Object(x.updateEntities)({entities:R.entities}));case 71:return f.next=73,Ge({conversationId:s,messages:S,requestIds:R.result,more:{isRedirect:!!_,isCancelable:!!r}});case 73:case"end":return f.stop()}}),W)}function Ye(){var e,t;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(y.select)(x.messagesRelatedMapSelector);case 2:return e=n.sent,t=[],Object.entries(e).forEach((function(e){var n=c()(e,2),r=n[0],s=n[1].sending||[];s.length&&t.push(Object(y.put)(Me({conversationId:r,requestIds:s})))})),n.next=7,Object(y.all)(t);case 7:case"end":return n.stop()}}),Y)}function ze(e){var t,n,r;return f.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.id,r=t.conversationId,s.next=3,Object(y.put)(we({id:n,conversationId:r}));case 3:return s.next=5,Object(y.put)(Object(x.deleteRecord)({name:"messages",id:n}));case 5:case"end":return s.stop()}}),z)}function He(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.takeEveryWithCancel)(Se,We,we);case 2:case"end":return e.stop()}}),H)}function Ve(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.takeEvery)(Ie,ze);case 2:return e.next=4,Object(y.takeEvery)(Te,Re);case 4:return e.next=6,Object(y.takeLatest)(je,Ye);case 6:case"end":return e.stop()}}),V)}n.d=(a={},d()(a,xe,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=n.isCancelable,o=e.messagesRelatedMap,c=o[r]||{},i=c.sending||[];i=a?i.concat(s):i;var u=c.all||[],l=c.failed||[];return X(X({},e),{},{messagesRelatedMap:X(X({},o),{},d()({},r,X(X({},c),{},{all:s.reverse().filter((function(e){return!u.includes(e)})).concat(u),failed:l.filter((function(e){return!s.includes(e)})),sending:i})))})})),d()(a,Ce,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=e.messagesRelatedMap,o=a[r]||{},c=o.sending||[],i=o.all||[],u=o.failed||[],l=s.filter((function(e){return i.includes(e)&&!u.includes(e)}));return X(X({},e),{},{messagesRelatedMap:X(X({},a),{},d()({},r,X(X({},o),{},{sending:c.concat(l)})))})})),d()(a,ye,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIdToMessageId,a=e.messagesRelatedMap,o=a[r]||{},c=(o.all||[]).map((function(e){return s[e]?s[e]:e})),i=o.sending||[];return X(X({},e),{},{messagesRelatedMap:X(X({},a),{},d()({},r,X(X({},o),{},{all:c,offset:c[c.length-1],sending:i.filter((function(e){return!s.hasOwnProperty(e)}))})))})})),d()(a,Me,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=e.messagesRelatedMap,o=a[r]||{},c=o.failed||[],i=o.sending||[];return X(X({},e),{},{messagesRelatedMap:X(X({},a),{},d()({},r,X(X({},o),{},{sending:i.filter((function(e){return!s.includes(e)})),failed:c.concat(s)})))})})),d()(a,we,(function(e,t){var n=t.payload,r=n.id,s=n.conversationId,a=e.messagesRelatedMap,o=a[s]||{},c=o.all||[],i=o.sending||[];return X(X({},e),{},{messagesRelatedMap:X(X({},a),{},d()({},s,X(X({},o),{},{all:c.filter((function(e){return e!==r})),sending:i.filter((function(e){return e!==r}))})))})})),a)}).call(this,r(21).t,r(152))},function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return S})),n.d(t,"e",(function(){return x})),n.d(t,"b",(function(){return C})),n.d(t,"f",(function(){return B})),n.d(t,"i",(function(){return R})),n.d(t,"g",(function(){return D})),n.d(t,"c",(function(){return q})),n.d(t,"h",(function(){return F}));var r,s,a=n(4),o=n.n(a),c=n(5),i=n.n(c),u=n(3),l=n(9),d=n(2),p=n(116),f=n.n(p),A=n(13);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=i.a.mark(R),m=i.a.mark(k),b=i.a.mark(P),v=i.a.mark(D),_=i.a.mark(F),O=function(e){return e?e/3*1e3:8e3},S=function(e){return e.startsWith("http:")?e.replace("http:","https:"):e},y=Object(l.createActions)((r={},o()(r,A.a.UPDATE_VIDEO_INFO,(function(e){var t=e.id,n=e.info;return{id:t,info:void 0===n?{}:n}})),o()(r,A.a.DELETE_VIDEO_INFO,(function(e){return{id:e.id}})),r)),x=y.updateVideoInfo,C=y.deleteVideoInfo,M="get_config_error",j="upload_error",I="report_upload_error",w="push_timeout",T="query_result_error";function B(e,t){Object(d.fetch)({method:"POST",subServer:"coreapi",parent:"video",resource:"monitor",payload:JSON.stringify({step:e,reason:t})}).catch((function(){return{}}))}function R(e){var t,n,r,s,a;return i.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(u.select)(Object(d.getConversationShopId)(e));case 3:return t=o.sent,o.next=6,Object(u.call)(d.fetch,{method:"POST",subServer:"coreapi",parent:"video",resource:"preupload",payload:JSON.stringify({conversation_id:e,shop_id:t})});case 6:if(n=o.sent,r=n.is_allowed,s=n.data,a=void 0===s?{}:s,r){o.next=14;break}return o.next=13,Object(u.call)(B,M,"Not Allowed");case 13:return o.abrupt("return",null);case 14:return o.abrupt("return",a);case 17:return o.prev=17,o.t0=o.catch(0),o.next=21,Object(u.call)(B,M);case 21:return o.abrupt("return",!1);case 22:case"end":return o.stop()}}),E,null,[[0,17]])}function k(e){var t,n,r,s,a;return i.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=performance.now(),n=e.file,r=e.onProgress,s=e.serviceList,a=new f.a(s),o.next=5,a.upload({mediaFile:n,mediaType:p.MediaType.video});case 5:return a.on(p.UploaderEvents.mediaProgress,(function(e){return r(.95*e.percent*100)})),o.next=8,a.done().then((function(e){var n=performance.now();return Object(d.collectAsyncTask)(d.ReportPoint.VIDEO_UPLOAD,n-t),{error:!1,data:e}})).catch((function(){return B(j),!1}));case 8:return o.abrupt("return",o.sent);case 9:case"end":return o.stop()}}),m)}function P(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u.call)(d.fetch,{method:"POST",subServer:"coreapi",parent:"video",resource:"report_upload",payload:JSON.stringify(e)});case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),t.next=10,Object(u.call)(B,I);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),b,null,[[0,6]])}function D(e){var t;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(u.call)(d.fetch,{subServer:"coreapi",parent:"video",resource:"upload_status",params:{vid:e}});case 3:return t=n.sent,n.abrupt("return",t);case 7:return n.prev=7,n.t0=n.catch(0),n.next=11,Object(u.call)(B,T);case 11:return n.abrupt("return",{});case 12:case"end":return n.stop()}}),v,null,[[0,7]])}var N=function(e){var t=e.video,n=e.thumbnail,r=e.duration;return{video_url:t,thumb_url:n,thumb_width:e.width,thumb_height:e.height,duration_seconds:Math.ceil(r/1e3)}};function q(t,n){var r=[];return t.forEach((function(t,s){var a=t.service_id,o=t.token,c=t.upload_domain,i=t.domain,u=t.bucket,l=t.slice_size;r.push({vid:n,bucket:u,sliceSize:l,biz:120,env:e.env.SERVER_ENV,country:e.env.COUNTRY,serviceID:a,serviceIndex:s,authorization:o,domain:S(i),uploadDomain:S(c)})})),r}function F(e){var t,n,r,s,a,o,c,l,p,f,A,g,h,E,m,b,v,S,y,C,M,j,I,R;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=new Error("upload fail"),n=e.id,r=e.file,s=e.duration,a=e.onProgress,o=void 0===a?function(){return{}}:a,i.next=4,Object(u.select)(Object(d.selectVideoInfoByKey)(n));case 4:return c=i.sent,p=(l=c||{}).vid,(f=l.services).forEach((function(e,t){"txcloud"===e.service_id&&f.unshift(f.splice(t,1)[0])})),i.next=9,Object(u.call)(k,{file:r,serviceList:q(f,p),onProgress:o});case 9:if(A=i.sent){i.next=12;break}throw t;case 12:if(g=f[0],h=g.service_id,E=g.domain,m="txcloud"===h,b=A.data.video,v=b.md5,S=b.extendId,y=b.url,!m||y){i.next=17;break}throw t;case 17:return i.next=19,Object(u.call)(P,{vid:p,md5:v,service_id:h,extend_id:S,file_size:r.size,video_url:y||"".concat(E,"/").concat(p,".ori.mp4")});case 19:if(i.sent){i.next=22;break}throw t;case 22:return i.next=24,Object(u.delay)(O(s));case 24:C=180;case 25:if(!(C>0)){i.next=58;break}return i.next=28,Object(u.select)(Object(d.selectVideoInfoByKey)(n));case 28:if("successful"!==(c=i.sent).status){i.next=31;break}return i.abrupt("return",N(c.uploadResult));case 31:if("failed"!==c.status){i.next=35;break}return i.next=34,Object(u.call)(B,T,"failed");case 34:throw t;case 35:return i.next=37,Object(u.call)(D,p);case 37:if(M=i.sent,(j=M.status)&&"reported"!==j){i.next=45;break}return i.next=42,Object(u.delay)(3e3);case 42:C-=3,i.next=56;break;case 45:return i.next=47,Object(u.put)(x({id:n,info:{status:j}}));case 47:if("successful"!==j){i.next=53;break}return(I=performance.getEntriesByName("REPORT_UPLOAD_".concat(p),"mark")[0])&&(performance.mark("SERVICE_DONE_".concat(p)),R=performance.getEntriesByName("SERVICE_DONE_".concat(p))[0].startTime-I.startTime,performance.clearMarks("REPORT_UPLOAD_".concat(p)),performance.clearMarks("SERVICE_DONE_".concat(p)),Object(d.collectAsyncTask)(d.ReportPoint.SERVICE_DONE,R)),i.abrupt("return",N(M));case 53:return i.next=55,Object(u.call)(B,T,j);case 55:throw t;case 56:i.next=25;break;case 58:return i.next=60,Object(u.call)(B,w,status);case 60:throw t;case 61:case"end":return i.stop()}}),_)}t.a=(s={},o()(s,A.a.UPDATE_VIDEO_INFO,(function(e,t){var n=t.payload,r=n.id,s=n.info,a=e.videoMap[r]||{};return h(h({},e),{},{videoMap:h(h({},e.videoMap),{},o()({},r,h(h({},a),s)))})})),o()(s,A.a.DELETE_VIDEO_INFO,(function(e,t){var n=t.payload.id,r=e.videoMap;return delete r[n],h(h({},e),{},{videoMap:h({},r)})})),s)}).call(this,n(152))},,function(e,t){e.exports=A},function(e,t,n){var r=n(14),s=n(268);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},,function(e,t,n){"use strict";n.d(t,"c",(function(){return k})),n.d(t,"f",(function(){return P})),n.d(t,"h",(function(){return D})),n.d(t,"g",(function(){return N})),n.d(t,"b",(function(){return F})),n.d(t,"e",(function(){return W})),n.d(t,"d",(function(){return Y})),n.d(t,"i",(function(){return H}));var r,s=n(24),a=n.n(s),o=n(54),c=n.n(o),i=n(4),u=n.n(i),l=n(5),d=n.n(l),p=n(9),f=n(3),A=n(2),g=n(84),h=n(63),E=n(39),m=n(38),b=n(1),v=n(55),_=n.n(v),O=["offset"];function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=d.a.mark(F),C=d.a.mark(L),M=d.a.mark(G),j=d.a.mark(U),I=d.a.mark(W),w=d.a.mark(Y),T=d.a.mark(z),B=d.a.mark(H),R=Object(p.createActions)({FETCH_MESSAGES_REQUESTED:function(e){return{conversationId:e.conversationId,reset:e.reset,direction:e.direction,messageId:e.messageId,cachedLatestId:e.cachedLatestId,cachedOldestId:e.cachedOldestId,source:e.source,isPreload:e.isPreload,messageList:e.messageList}},FETCH_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,messageIds:e.messageIds,limit:e.limit,persist:e.persist,status:e.status,messageRequestIds:e.messageRequestIds,direction:e.direction,reset:e.reset,cachedOldestId:e.cachedOldestId,shouldAutoFetch:e.shouldAutoFetch}},UPDATE_FETCH_MESSAGES_REQUESTED_STATUS:function(e){return{status:e.status}},SET_SECURITY_TIPS_MESSAGE:function(e){return{messageId:e.messageId,conversationId:e.conversationId}}}),k=R.fetchMessagesRequested,P=R.fetchMessagesSucceeded,D=R.updateFetchMessagesRequestedStatus,N=R.setSecurityTipsMessage,q=function(e){var t=e.conversationId,n=e.shopId,r=e.offset,s=e.limit,a=void 0===s?20:s,o=e.direction,c=void 0===o?"older":o,i=(e.source,{shop_id:n,offset:r,limit:"around"===c?Math.ceil(a/2):a,direction:c});return new Promise((function(e,n){Object(A.fetch)({parent:"conversations",parentId:t,resource:"messages",params:i}).then((function(t){var n=t.messages,r=void 0===n?[]:n;Object(h.a)(r),e({messages:r,limit:a})})).catch((function(e){n(e)}))}))};function F(e){var t,n,r;return d.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.msgId,n=e.shopId,s.next=3,Object(f.call)(A.fetch,{parent:"conversation",resource:"get_messages",params:{message_id:t,shop_id:n,limit:10,direction:"around"}});case 3:return r=s.sent,Object(h.a)((null==r?void 0:r.get_messages)||[]),s.abrupt("return",r);case 6:case"end":return s.stop()}}),x)}function L(e,t){var n,r;return d.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(f.select)(Object(A.getConvsMessagesRelatedSelector)(e));case 2:return r=s.sent,s.abrupt("return",null===(n=r.preloaded)||void 0===n?void 0:n[t]);case 4:case"end":return s.stop()}}),C)}function G(e){var t,n,r,s,a;return d.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.next=3,Object(f.call)(Y,{payload:y(y({},t),{},{isPreload:!0,reset:!1,direction:"older"})});case 3:if(!(n=o.sent)){o.next=21;break}return r=n.offset,s=c()(n,O),a=t.conversationId,o.next=9,Object(f.call)(L,a,r);case 9:if(o.sent!==b.FetchMessageStatus.FETCHING){o.next=19;break}return o.next=13,Object(f.put)(P(y({},s)));case 13:return o.next=15,Object(f.put)(Object(m.c)({conversationId:a,updateKey:b.MessagesRelatedKey.PRELOADED,updateValue:u()({},r,null)}));case 15:return o.next=17,Object(f.fork)(G,{payload:t});case 17:o.next=21;break;case 19:return o.next=21,Object(f.put)(Object(m.c)({conversationId:a,updateKey:b.MessagesRelatedKey.PRELOADED,updateValue:u()({},r,s)}));case 21:case"end":return o.stop()}}),M)}function U(e){var t,n,r,s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.reset||"around"===e.direction){a.next=8;break}return a.next=3,Object(f.select)((function(e){return e.messageReducer}));case 3:return t=a.sent,n=t.messagesRelatedMap,r=e.conversationId,s=n[r]||{},a.abrupt("return",0===(s.all||[]).length);case 8:return a.abrupt("return","older"===e.direction);case 9:case"end":return a.stop()}}),j)}function W(e){var t;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,U(t);case 3:if(!n.sent){n.next=13;break}return n.next=7,Object(f.call)(Y,{payload:t});case 7:if(!n.sent){n.next=11;break}return n.next=11,Object(f.fork)(G,{payload:t});case 11:n.next=15;break;case 13:return n.next=15,Object(f.call)(Y,{payload:t});case 15:case"end":return n.stop()}}),I)}function Y(e){var t,n,r,s,o,c,i,l,p,g,h,v,_,O,S,x,C,M,j,I,T,B,R,k,N,F,G,U,W,z;return d.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,n=t.conversationId,r=t.reset,s=t.direction,o=t.messageId,c=t.source,i=t.isPreload,l=t.shouldFillSync,p=t.messageList,d.prev=1,d.next=4,Object(f.select)((function(e){return e.conversationReducer}));case 4:return g=d.sent,h=g.persist,d.next=8,Object(f.select)(Object(A.getConversationShopId)(n));case 8:return v=d.sent,d.next=11,Object(f.select)((function(e){return e.messageReducer}));case 11:if(_=d.sent,O=_.messagesRelatedMap,S=O[n]||{},!r||"around"===s){d.next=20;break}x=0,s="older",C=!0,d.next=33;break;case 20:d.t0=s,d.next="older"===d.t0?23:"latest"===d.t0?26:"around"===d.t0?29:32;break;case 23:return x=S.oldestMessageId,C=S.hasMoreOlderMessage,d.abrupt("break",33);case 26:return x=S.latestMessageId,C=S.hasMoreLatestMessage,d.abrupt("break",33);case 29:return x=o,C=!0,d.abrupt("break",33);case 32:return d.abrupt("break",33);case 33:if(C){d.next=41;break}return d.next=36,Object(f.select)(A.messageHttpStatusSelector);case 36:if(!d.sent.includes("failed")){d.next=40;break}return d.next=40,Object(f.put)(D({status:b.DataFetchStatus.SUCCEED}));case 40:return d.abrupt("return");case 41:if(i){d.next=44;break}return d.next=44,Object(f.put)(D({status:r||"around"===s?b.DataFetchStatus.INIT_PENDING:b.DataFetchStatus.PENDING}));case 44:if(!i){d.next=49;break}return d.next=47,Object(f.put)(Object(m.c)({conversationId:n,updateKey:b.MessagesRelatedKey.PRELOADED,updateValue:u()({},x,b.FetchMessageStatus.PRELOADING)}));case 47:d.next=65;break;case 49:return d.next=51,Object(f.call)(L,n,x);case 51:if(!(I=d.sent)){d.next=65;break}if(I!==b.FetchMessageStatus.PRELOADING){d.next=59;break}return d.next=56,Object(f.put)(Object(m.c)({conversationId:n,updateKey:b.MessagesRelatedKey.PRELOADED,updateValue:u()({},x,b.FetchMessageStatus.FETCHING)}));case 56:return d.abrupt("return",!1);case 59:if(I===b.FetchMessageStatus.FETCHING){d.next=65;break}return d.next=62,Object(f.put)(P(y({},I)));case 62:return d.next=64,Object(f.put)(Object(m.c)({conversationId:n,updateKey:b.MessagesRelatedKey.PRELOADED,updateValue:u()({},x,null)}));case 64:return d.abrupt("return",!0);case 65:if(!p||!p.length){d.next=70;break}M=p,j=20,d.next=75;break;case 70:return d.next=72,Object(f.call)(q,{conversationId:n,shopId:v,offset:x,direction:s,source:c});case 72:T=d.sent,M=T.messages,j=T.limit;case 75:if(M.sort((function(e,t){return t.id-e.id})),B=M.map((function(e){return e.id})),!M.length){d.next=87;break}return R=a()(M),M.forEach((function(e){var t=e.quoted_msg;if(t){if(R.some((function(e){return e.id===t.id}))||Object(b.isDeletedMessage)(t))return;R=[].concat(a()(R),[t])}})),d.next=82,Object(f.select)(A.messageEntitiesSelector);case 82:return k=d.sent,d.next=85,Object(f.call)(A.updateOrReplaceAction,k,R,"messages",["content"]);case 85:return d.next=87,Object(f.call)(E.b,R,{isSync:l});case 87:if(N=new Map,F=M.reduce((function(e,t){var n=t.request_id,r=t.id;return e.has(n)||e.set(n,r),e}),N),G={reset:r,limit:j,offset:x,direction:s,messageIds:B,conversationId:n,persist:h,status:b.DataFetchStatus.SUCCEED,messageRequestIds:F},!i){d.next=92;break}return d.abrupt("return",G);case 92:return U=!1,(W=S.cachedLatestId)||(W=(S.all||[])[0],G.cachedLatestId=W),W&&r&&(z=B[B.length-1]||x,Object(b.greaterThan)(z,W)?U=!0:G.cachedLatestId=null),G.shouldAutoFetch=U,d.next=99,Object(f.put)(P(G));case 99:if(!U){d.next=102;break}return d.next=102,Object(f.fork)(Y,{payload:{direction:"older",conversationId:n}});case 102:return("around"===s||p&&p.length)&&o&&A.EventBus.emit("scrollToMessage",o),d.abrupt("return",G);case 106:if(d.prev=106,d.t1=d.catch(1),i){d.next=111;break}return d.next=111,Object(f.put)(D({status:r?b.DataFetchStatus.INIT_FAILED:b.DataFetchStatus.FAILED}));case 111:case"end":return d.stop()}}),w,null,[[1,106]])}function z(e){var t,n,r,s,a,o,c,i,u,l;return d.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(t=e.payload,n=t.conversationId,"older"===t.direction){d.next=4;break}return d.abrupt("return");case 4:return d.next=6,Object(f.select)(Object(A.getConversationShopId)(n));case 6:return r=d.sent,d.next=9,Object(f.select)(Object(A.shopSelector)(r));case 9:if(s=d.sent,a=s?s.country:Object(b.getRuntimeRegion)(),!["br","tw"].includes(a.toLowerCase())){d.next=33;break}return d.next=14,Object(f.select)(A.messagesRelatedMapSelector);case 14:if(o=d.sent,!(c=o[n])){d.next=33;break}if(!c.securityTipsMessageId){d.next=19;break}return d.abrupt("return");case 19:if(c.hasMoreOlderMessage){d.next=33;break}return d.next=22,Object(f.select)(A.messageEntitiesSelector);case 22:if(i=d.sent,u=Object(b.makeSecurityTipsMessage)(_()(),n),!c.oldestMessageId){d.next=29;break}return d.next=27,Object(f.select)(Object(A.getMessageSelector)(c.oldestMessageId));case 27:(l=d.sent)&&(u.created_timestamp=l.created_timestamp);case 29:return d.next=31,Object(f.call)(A.updateOrReplaceAction,i,[u],"messages");case 31:return d.next=33,Object(f.put)(N({messageId:u.id,conversationId:n}));case 33:case"end":return d.stop()}}),T)}function H(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.takeEvery)(k,W);case 2:return e.next=4,Object(f.takeEvery)(P,z);case 4:case"end":return e.stop()}}),B)}t.a=(r={},u()(r,P,(function(e,t){var n=t.payload,r=n.limit,s=n.status,a=n.conversationId,o=n.messageIds,c=n.persist,i=n.messageRequestIds,l=n.direction,d=n.reset,p=n.cachedLatestId,f=n.shouldAutoFetch,A=e.messagesRelatedMap,h=A[a]||{},E={};switch(l){case"older":E.hasMoreOlderMessage=o.length>=r;break;case"latest":E.latestMessageId=o[0],E.hasMoreLatestMessage=o.length>=r;break;case"around":E.latestMessageId=o[0],E.hasMoreOlderMessage=!0,E.hasMoreLatestMessage=!0,h={}}d&&"around"!==l&&(E.hasMoreLatestMessage=!1);var m=(h.all||[]).map((function(e){return i.has(e)?i.get(e):e})),b=h.failed||[],v=Object(g.b)(m,o);return E.oldestMessageId=f?o[o.length-1]:v[v.length-1],p&&(E.cachedLatestId=p),y(y({},e),{},{status:s,messagesRelatedMap:y(y({},A),{},u()({},a,y(y({},h),{},{all:v,failed:b.filter((function(e){return!i.has(e)}))},E))),persist:c})})),u()(r,D,(function(e,t){var n=t.payload.status;return y(y({},e),{},{status:n})})),u()(r,N,(function(e,t){var n=t.payload,r=n.conversationId,s=n.messageId,a=e.messagesRelatedMap,o=a[r]||{};return y(y({},e),{},u()({},"messagesRelatedMap",y(y({},a),{},u()({},r,y(y({},o),{},{securityTipsMessageId:s})))))})),r)},function(e,t){e.exports=g},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),s=n.n(r).a.createContext({});s.displayName="ImgCacheContext"},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l}));var r=n(23),s=n.n(r),a=n(26),o=function(e,t,n,r){var s=e.slice(n,r+1),o=t.slice(n,r+1);return!Object(a.b)(s,o)},c=function(e,t){var n=t.length,r=e.length;return!(n||!r)||(n?t[0].id:null)===(r?e[0].id:null)},i=function(e,t){var n=s()(e,2),r=n[0],a=n[1];return r<=t&&a>=t},u=function(e,t){var n=null;if(t.length){var r=Object(a.e)(e,t);if(r){var s=e[r+1];n=s&&s.id}}return n},l=function(e,t){return e&&e.length&&t?e.findIndex((function(e){return e.id===t})):null}},function(e,t,n){var r=n(136);e.exports=function(e,t){if(null==e)return{};var n,s,a=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(103),s=n(104);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var c=0;c<16;++c)t[a+c]=o[c];return t||s(o)}},function(e,t){e.exports=h},function(e,t){e.exports=E},function(e,t,n){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAMAAAAJixmgAAABIFBMVEUAAADr7vnt8Prt8Pnt8fvt8fvt8PvEpaPs8Prt8fvt8Pvo7Pbo7fjr7/nn7Pfs7/rv8f3h5fDg5PDi5/Hn6/To6/Te4+7s7/np7fni5vHo7Pjm6vfk6fbf4/De4/Dc4O3d4u3i5/TZ3uvP1OHZ3ura3urvWz7y9f7/gmrW2ufvWz7Y3enxXUDW2uj4bVLyYET/g2vvWz7xXkL+eF70ZUn2Zkr+d13w8/zj5/Dm6vTj5vH3a0//gGf5blP4bVHN09/L0N3y9f7S1+Po7PbX2+fl6fPw8vvP1OHr7vfd4eza3+rs7/ng5e/u8Pre4u3U2eXv8/zj5/Hi5vH////Y3enl5/LwWz7yYUX09fn2Z0z/f2f5bVL8c1n4+fv/eV/u8Pak0IEiAAAAP3RSTlMABwwZEhYkBSAQHAQzLzcrJ0JKPi4pRx86Oj5CRlRQWE1PXe3Lp+rn6djDsJNrD6aLg/PHWSXwh4Ht37uejXhSf/O8AAAHjUlEQVR42uzWS2oDMRBF0TfTMkImctMI9z8T24FsokXbJvtfRqwWxJ+JZzao7tnBpSiqBAAAAAAAAAAAAAAAAABPuLaqWic72uNFKzuqFFzJjOk3+ZIZ4zkZZMbhlBxkxm5JRpnRx7jEOMmKKSa9zBjnpNat7b7gVySswd1d73C82KtM9Ro83vUWfZn7NXjSPzecV6UG+9Trb3p3p+xbZQoPK9wsWVChXOd95669MWtkQ5gzK73dnNWlHuFH3liv+ty7lRXhfb0fm58X2nxq5YL3zXvm+8eeHewmCwQBHB9YNEqXGq1iuPkqXwhkjUiKpIkX0vd/i8+NG6sG1llbBlb9zUUOHv4ZwmXIelUxdO0fMaCgD/6knD4Ea702/Nrwa8P933BKONTB7ohPw1U45SP3GV7pQbT6ETGQPokBHTeaXYrkllNiQIaFs2she+BgP6yzfNhgFtZjqZ6twe60SZpu6YYumGuCtSzd8OCj0ZYYtMzxGBu4/FmCWRDdstWzKtgN3m/b6tkUPOAYG2LQmnGAstGzJ9iZzFE2evYE+xOcjZ41wc4CSRCDlnhDJCHEhm7aC2YjJKFnzYb9JZLQsycYS+hZE8ywhJ41wd4AKSYGLXE9pFjPmmBnjBTrWRMMLlKsZ0+w82zB4ODECenE0B5ksJ5FGwZ4cxASYtCqt9uSJCYd6FqiZ9mGexwsL9Wz1Uxdqps9SPD1pbrZQwTXXarJJElxx5wY/7HxUk3l6y5pVUqp+DLVfKkmUtzhuzyp4sJM46Xah1p9CE7Lc9+FEXfaxAUSO2Oy96J4VyO7tlN4YzCHOt0HJ+W1RBd7Hf3RjEGN7oP3p70m6meKqVV0wWrFLpMnbWhLZqg4RsaZVJVSlRmINMYAbz4//uZq350Hi1LaHx/U59o0+L3BCDz+8xSM4aDz4H0pCVV/HpyjcI25zy8MAKAnwcn5hiuVmyEmDwJ+GCQPoPPgC9Xp/Za5KHMpOAyKA38u/wX1lRa5gcn8MGjLNoKze0f1VrmJhRmnPxsuqvKoWJsYDhenQfD6E6x6q93ayOjM8Paw3gSr93mfr+8KVpa3+PDX/nNXvz9pA3Ecx48KgkxnFIZTBB1gFkP2eG5Prr1eKXeUNjCW7Nn+//9idz1+iPZKvx3Iyes0NkJi3n5aZflMVe+QQVVXrqqbGROs/gP/FVccdNgRkCnB6o6OeyHAwSWjgv9wuBKMtYNgnuPkDy7CFMxYmM+/5HACYqGt42/MAimYEuz+inE4aK9ZwTO4AoDsfT/BfOqOBo4wcqcsXzASzAqmWsHQeW404VQpxz5kgHZjlsuG4GDgvPJ7HqwBrM2P5pIazEdOkjGjAgIyJDhN6OhMqQgua46G+cFTZ27ghVzuHXpjZ847wIUDRxkyusLdZTEqwzY2PTicr8uidYvneoKADAmONIeqLJdGr3hOrAmc2JBgHbWjFyVRD/fXEwRiRHCkE6p9SbLfjvR9zxNTGsGPztgRxhEhUeIZxi8fIRiDF1YDc5GWjA4MmDjKgWi46obWm8RPMajLhGDdHUsH0ozoRQMJ9IfaiGDNxEzWDEkabyB8R/tEtmciawKShg2E3l4XJiQCHw1vLHBCfP2hY+ErAjF34eFIoCTVSLIAExsfTFIXVu+pouxMCNbGSMRP5Q6FyoEs7GYNPpSFvQzBQ8lCe5yYEB96dKauQP00xBV+IBADFtZgrsD8NDNX6KHyYSxMPWGC0wSe8IRAzF2YeFKE9dQ7rtE+J/a3B4eeEGI95gk/EYTRwZGaeMPAT6j8zhbGWuFECPzUl38UEYTZwdFUYjgZn0pP6N0tnFLMAonjJDSQflpov/AW2RiHgcTk9frBsyDWL8MWNjpYIGGMkZffZ+HcAyzJ8GBbFCuc4PnMMpeGwqr4YBa2BcIWKJFPu08oZ2tAG5sRbCcfVexzlozPlsXZJzYjWMeOYSriXh+KMTVgY6wF33iZ7FP+EiXxr4IrD4eysPhQ/Gg917elVXE/a5cpwfZmmBAqEaJqlR5V+vtb2M5zcvv2uCiulCz05gpFnJOdU2dZ3PvW6bQbtbNP1WIBIejC8NKr8+tGq9PJuXD+4GfFnaVW4/r8SnTvQqF0fHrRvlvAbzyx+JGdx0jpde7WtS9Oj0tbzC5W6rX71rrcC0OLu3asJayK71oJ7mv1ShH9J6tar7W/JLB3qbv8XGpLd49E6bcTfJHatXrVyjvs8cfbSx0bAFqb5DLW7pFY9zLV7cdj6NQnldPmbRr7jTWU+54KFpe36ZqnlROUTeGoftPcxN6Jru7mti/mLuPiB3HV3OymflTYWFs9u8mia++UCl3pXiw0+t2u7L3J6Kya0vyhdP45o3/t3U0OgkAMhuFSRkUGhUQN7llzB+9/KoOTKCFE4/9k+j5dddl8m26a9t3ph7p+N3F8Qr3w8+G21TZRVZvNPc1KWqGTdDfJG6fs6mjsH6tf5STwZROTw33NG0of5l2acZk4LwzJRbSMUzvUyNB/gIrLTXGyMEacMaJrU1RETRERr4aEzSMzw0uQGSFX3gRBJFa3+vtlOL6MbAEAAAAAAAAAAAAAAID0nAFUiEuaAG9VMQAAAABJRU5ErkJggg=="},,,function(e,t,n){var r=n(14),s=n(276);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return g}));var r,s=n(4),a=n.n(s),o=n(2),c=n(1),i=c.MessageTypes.MSG_TYPE_ITEM_LIST,u=c.MessageTypes.MSG_TYPE_ADD_ON_DEAL,l=c.MessageTypes.MSG_TYPE_BUNDLE_DEAL,d=c.MessageTypes.MSG_TYPE_FLASH_SALE,p=(r={},a()(r,i,{listKey:"chat_product_infos",cleaner:o.itemListDetailCleaner}),a()(r,u,{listKey:"add_on_deal_item_list",cleaner:o.addOnDealItemDetailCleaner}),a()(r,l,{listKey:"bundle_deal_item_list",cleaner:o.bundleDealItemDetailCleaner}),a()(r,d,{listKey:"flash_sale_item",cleaner:o.flashSaleItemDetailCleaner}),r),f=[i,u,l,d],A=function(e){var t=e.type,n=e.content,r=e.country,s=n.shop_id;if(p[t]){var a=p[t],d=a.listKey,f=a.cleaner,A=e.content[d];e.content[d]=A.slice(0,c.MAX_SHOWING_ITEM_COUNT).map((function(e){return f(e,r,s)}))}if(t===i){var g=n.chat_product_infos;e.content.exceedMaxCount=g.length>c.MAX_SHOWING_ITEM_COUNT}else if(t===u){var h=n.add_on_deal_rule;e.content.add_on_deal_rule=Object(o.addOnDealRuleCleaner)(h,r)}else if(t===l){var E=n.bundle_rule;e.content.bundle_rule=Object(o.bundleDealRuleCleaner)(E,r)}},g=function(e){Array.isArray(e)?e.forEach((function(e){A(e),e.quoted_msg&&A(e.quoted_msg)})):(A(e),e.quoted_msg&&A(e.quoted_msg))}},,function(e,t,n){var r=n(14),s=n(267);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(14),s=n(270);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(14),s=n(271);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(14),s=n(277);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(70);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0},,,,function(e,t,n){"use strict";(function(e){var r=n(57),s=n.n(r),a=n(75),o=n.n(a),c=n(0),i=n.n(c),u=n(81),l=n.n(u),d=n(30),p=n.n(d),f=n(1),A=n(58),g=function(t){var n=Object(c.useRef)(null),r=Object(c.useRef)(0),s=Object(f.throttle)((function(e){var s=t.loadMoreOffset,a=t.onLoadMore,o=t.onScroll,c=t.status,i=n.current,u=i.scrollHeight,l=i.scrollTop,d=i.clientHeight;if(c===f.DataFetchStatus.PENDING)return!1;u-l-d<=s&&r.current<l&&a&&a(),r.current=l,o&&o()}),200),a=t.listData,u=t.customRootClass,d=t.makeItem,g=t.status,h=t.emptyImage,E=t.emptyText,m=t.emptyClassName;return i.a.createElement("div",{className:p()(l.a.root,u),onScroll:s,ref:n},g===f.DataFetchStatus.SUCCEED||g===f.DataFetchStatus.PENDING||g===f.DataFetchStatus.FAILED?a.length>0?a.map((function(e,t){return d(e,t)})):i.a.createElement(o.a,{classname:m||l.a.empty,image:h||A.a,text:E||e("common.scroll_list.no_data")}):"")};g.defaultProps={loadMoreOffset:10,emptyImage:A.a},t.a=s()(g)}).call(this,n(21).t)},function(e,t){e.exports=m},function(e,t){e.exports=b},function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"d",(function(){return O}));var r=n(4),s=n.n(r),a=n(5),o=n.n(a),c=n(9),i=n(3),u=n(1),l=n(2),d=n(13),p=o.a.mark(m),f=o.a.mark(b),A=o.a.mark(_),g=o.a.mark(O);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){var r,s;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(i.select)(Object(l.rateCardSelector)(e));case 2:if((r=a.sent)&&r.status!==u.EvaluationStatus.UNRATED){a.next=8;break}return s="webview"===n?{parent:"rating_cards",parentId:e,resource:"get"}:{subServer:"workbenchapi",resource:"rating_card",id:e},a.next=7,Object(i.call)(l.fetch,E(E({},s),{},{params:t}));case 7:r=a.sent;case 8:return a.abrupt("return",r);case 9:case"end":return a.stop()}}),p)}function b(e){var t,n,r,s,a,c,u,d,p,A,g,h,E,b,v;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.ids,n=e.shopId,r=e.type,s=Array.isArray(t)?t:[t],a={},"0"!==n&&(a.shop_id=n),o.next=6,Object(i.select)(l.isSubAccountSelector);case 6:return c=o.sent,o.next=9,Object(i.select)(l.currentUserShopIdSelector);case 9:if(o.sent===parseInt(n)||c){o.next=23;break}return u=[],s.forEach((function(e){return u.push(Object(i.call)(m,e,a,r))})),o.next=15,Object(i.all)(u);case 15:if(d=o.sent,"rating_card"!==r){o.next=20;break}return p=Object(l.normalize)("rateCards",d),A=p.entities,o.next=20,Object(i.put)(Object(l.updateEntities)({entities:A}));case 20:return o.abrupt("return",d);case 23:return g="rating_cards",a.ids="[".concat(s.join(","),"]"),o.next=27,Object(i.call)(l.fetch,{resource:g,params:a});case 27:if(h=o.sent,E=h[g],"rating_card"!==r){o.next=33;break}return b=Object(l.normalize)("rateCards",h[g]),v=b.entities,o.next=33,Object(i.put)(Object(l.updateEntities)({entities:v}));case 33:return o.abrupt("return",E||[]);case 34:case"end":return o.stop()}}),f)}var v=Object(c.createActions)(s()({},d.a.EVALUATION_REQUESTED,(function(e){var t=e.messageId,n=e.grade,r=e.reason;return{messageId:t,grade:n,reason:void 0===r?[]:r,otherReason:e.otherReason}}))).evaluationRequested;function _(e){var t,n,r,s,a,c,d,p,f,g,h,m,b,v,_,O,S;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.messageId,r=t.grade,s=t.reason,a=t.otherReason,o.next=3,Object(i.select)(Object(l.getMessageSelector)(n));case 3:if(c=o.sent,d=c.from_shop_id,p=c.textContent,f=c.type,g=f===u.MessageTypes.MSG_TYPE_WEBVIEW,h=p.id,o.prev=7,m={grade:r,reason:s},b={},g?b={parent:"rating_cards",resource:"evaluate"}:(m.other_reason=a,b={subServer:"workbenchapi",parent:"rating_card"}),d&&(m.shop_id=d),!g){o.next=19;break}return o.next=15,Object(i.call)(l.fetch,E(E({method:"PUT"},b),{},{parentId:h,payload:JSON.stringify(m)}));case 15:return o.next=17,Object(i.put)(Object(l.updateRecord)({name:"rateCards",id:h,record:{grade:r,status:u.EvaluationStatus.RATED}}));case 17:o.next=24;break;case 19:return o.next=21,Object(i.call)(l.fetch,E(E({method:"PUT"},b),{},{parentId:h,payload:JSON.stringify(m)}));case 21:return v=o.sent,o.next=24,Object(i.put)(Object(l.updateRecord)({name:"rateCards",id:h,record:{grade:r,status:u.EvaluationStatus.RATED,reason_ids:v.reason_ids,other_reason:v.other_reason}}));case 24:o.next=34;break;case 26:return o.prev=26,o.t0=o.catch(7),O=Date.now(),null!==o.t0&&void 0!==o.t0&&null!==(_=o.t0.error)&&void 0!==_&&_.error_code&&((S=o.t0.error.error_code)===u.EvaluationErrorCode.RATED&&(O=u.EvaluationStatus.RATED),S===u.EvaluationErrorCode.EXPIRED&&(O=u.EvaluationStatus.EXPIRED)),o.next=32,Object(i.put)(Object(l.updateRecord)({name:"rateCards",id:h,record:{status:O}}));case 32:return o.next=34,Object(i.call)(l.setToastInformationSaga,Object(l.setToastInformation)({error:o.t0}));case 34:case"end":return o.stop()}}),A,null,[[7,26]])}function O(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.takeLatest)(v,_);case 2:case"end":return e.stop()}}),g)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h})),n.d(t,"j",(function(){return m})),n.d(t,"d",(function(){return b})),n.d(t,"f",(function(){return v})),n.d(t,"k",(function(){return _})),n.d(t,"e",(function(){return O})),n.d(t,"i",(function(){return S})),n.d(t,"h",(function(){return y})),n.d(t,"c",(function(){return x})),n.d(t,"g",(function(){return C})),n.d(t,"l",(function(){return I}));var r,s=n(4),a=n.n(s),o=n(5),c=n.n(o),i=n(9),u=n(2),l=n(3),d=n(47),p=n(1),f=c.a.mark(I);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=1500,E=Object(i.createActions)({SET_REPLY_TO_MESSAGE:function(e){return{messageId:e.messageId}},RESET_REPLY_TO_MESSAGE:function(){return{}},SCROLL_TO_MESSAGE:function(e){return{messageId:e.messageId}},SET_SCROLL_TO_MESSAGE_ID:function(e){return{messageId:e.messageId}},RESET_SCROLL_TO_MESSAGE_ID:function(){},SET_IN_SCROLL_TO_MESSAGE:function(e){return{inScrollToMessage:e.inScrollToMessage}},SET_CURRENT_CONVERSATION_REPLY_TO_MESSAGE:function(e){return{messageId:e.messageId,currentConversationId:e.currentConversationId}},RESET_CURRENT_CONVERSATION_REPLY_TO_MESSAGE:function(e){return{currentConversationId:e.currentConversationId}}}),m=E.setReplyToMessage,b=E.resetReplyToMessage,v=E.scrollToMessage,_=E.setScrollToMessageId,O=E.resetScrollToMessageId,S=E.setInScrollToMessage,y=E.setCurrentConversationReplyToMessage,x=E.resetCurrentConversationReplyToMessage,C=c.a.mark((function t(n){var r,s,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.payload.messageId,t.next=3,Object(l.select)(u.curMessagesRelatedSelector);case 3:if(t.sent.all.includes(r)){t.next=14;break}return t.next=7,Object(l.select)(u.currentConversationSelector);case 7:return s=t.sent,t.next=10,Object(l.call)(d.d,{payload:{conversationId:s.id,direction:"around",reset:!0,messageId:r,shouldFillSync:!0}});case 10:return t.next=12,Object(l.put)(S({inScrollToMessage:!0}));case 12:t.next=22;break;case 14:return t.next=16,Object(l.select)(Object(u.getMessageSelector)(r));case 16:if(a=t.sent,!Object(p.isDeletedMessage)(a)){t.next=21;break}return t.next=20,Object(l.call)(u.setToastInformationSaga,Object(u.setToastInformation)({toast:{show:!0,type:"fail",message:e("message.notfound")}}));case 20:return t.abrupt("return");case 21:u.EventBus.emit("scrollToMessage",r);case 22:return t.next=24,Object(l.put)(_({messageId:r}));case 24:return t.next=26,Object(l.delay)(h);case 26:return t.next=28,Object(l.select)(u.scrollToMessageIdSelector);case 28:if(t.sent!==r){t.next=32;break}return t.next=32,Object(l.put)(O());case 32:case"end":return t.stop()}}),t)})),M=c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload.messageId,e.next=3,Object(l.select)(u.currentConversationIdSelector);case 3:return r=e.sent,e.next=6,Object(l.put)(y({currentConversationId:r,messageId:n}));case 6:case"end":return e.stop()}}),e)})),j=c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.select)(u.currentConversationIdSelector);case 2:return t=e.sent,e.next=5,Object(l.put)(x({currentConversationId:t}));case 5:case"end":return e.stop()}}),e)}));function I(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.takeEvery)(v,C);case 2:return e.next=4,Object(l.takeEvery)(b,j);case 4:return e.next=6,Object(l.takeEvery)(m,M);case 6:case"end":return e.stop()}}),f)}t.b=(r={},a()(r,y,(function(e,t){var n=t.payload,r=n.currentConversationId,s=void 0===r?"":r,o=n.messageId,c=void 0===o?"":o;return s&&c?g(g({},e),{},{reply:g(g({},e.reply),{},{toMessageId:g(g({},e.reply.toMessageId),{},a()({},s,c))})}):e})),a()(r,x,(function(e,t){var n=t.payload.currentConversationId,r=void 0===n?"":n;return r?g(g({},e),{},{reply:g(g({},e.reply),{},{toMessageId:g(g({},e.reply.toMessageId),{},a()({},r,""))})}):e})),a()(r,_,(function(e,t){return g(g({},e),{},{reply:g(g({},e.reply),{},{scrollToMessageId:t.payload.messageId})})})),a()(r,O,(function(e){return g(g({},e),{},{reply:g(g({},e.reply),{},{scrollToMessageId:""})})})),a()(r,S,(function(e,t){return g(g({},e),{},{reply:g(g({},e.reply),{},{inScrollToMessage:t.payload.inScrollToMessage})})})),r)}).call(this,n(21).t)},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return E}));var r=n(4),s=n.n(r),a=n(5),o=n.n(a),c=n(9),i=n(3),u=n(1),l=n(2),d=n(41),p=n(13),f=o.a.mark(h),A=o.a.mark(E),g=Object(c.createActions)(s()({},p.a.RESEND_MESSAGE_REQUESTED,(function(e){return{conversationId:e.conversationId,message:e.message}}))).resendMessageRequested;function h(e){var t,n,r,s,a;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.conversationId,r=t.message,o.next=3,Object(i.select)(Object(l.getConversation)(n));case 3:if("closed"!==o.sent.status){o.next=9;break}return o.next=8,Object(i.call)(l.setToastInformationSaga,Object(l.setToastInformation)({type:"conversation-closed-tip"}));case 8:return o.abrupt("return");case 9:if(s=r.type,a=r.content,s!==u.MessageTypes.MSG_TYPE_VIDEO||a.video_url){o.next=14;break}return o.next=13,Object(i.put)(Object(d.l)({conversationId:n,message:r,isResend:!0}));case 13:return o.abrupt("return");case 14:return o.next=16,Object(i.put)(Object(d.i)({conversationId:n,messages:[r],more:{isResend:!0}}));case 16:case"end":return o.stop()}}),f)}function E(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.takeEvery)(g,h);case 2:case"end":return e.stop()}}),A)}},function(e,t,n){"use strict";n.d(t,"e",(function(){return M})),n.d(t,"d",(function(){return j})),n.d(t,"b",(function(){return I})),n.d(t,"c",(function(){return w})),n.d(t,"f",(function(){return B})),n.d(t,"g",(function(){return R}));var r,s,a=n(24),o=n.n(a),c=n(23),i=n.n(c),u=n(4),l=n.n(u),d=n(5),p=n.n(d),f=n(9),A=n(3),g=n(27),h=n(41),E=n(2),m=n(13);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=p.a.mark(T),O=p.a.mark(B),S=p.a.mark(R);function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C=Object(f.createActions)((r={},l()(r,m.a.SEND_MESSAGES_FAILED_BY_OFFLINE,(function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}})),l()(r,m.a.RESET_MESSAGES_FAILED_BY_OFFLINE,(function(){return{}})),l()(r,m.a.RESEND_OFFLINE_MESSAGES_ONCE,(function(){return{}})),l()(r,m.a.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED,(function(e){return{conversationId:e.conversationId,messageIds:e.messageIds}})),r)),M=C.sendMessagesFailedByOffline,j=C.resetMessagesFailedByOffline,I=C.resendOfflineMessagesOnce,w=C.resendOfflineMessagesOnceSucceed;function T(){var e,t,n,r,s,a,o,c,u;return p.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Object(A.select)(E.offlineMessagesSelector);case 2:e=l.sent,t=Object.entries(e),n=[],r=p.a.mark((function e(){var t,r,o,c,u,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a[s],r=i()(t,2),o=r[0],c=r[1],e.next=4,Object(A.select)(Object(E.getMessagesSelector)(c));case 4:u=e.sent,l=c.map((function(e,t){return{conversationId:o,requestIds:[e],messages:[u[t]]}})).filter((function(e){return e.messages[0]})),n=n.concat(l);case 7:case"end":return e.stop()}}),e)})),s=0,a=t;case 7:if(!(s<a.length)){l.next=12;break}return l.delegateYield(r(),"t0",9);case 9:s++,l.next=7;break;case 12:o=y(n),l.prev=13,o.s();case 15:if((c=o.n()).done){l.next=23;break}return u=c.value,l.next=19,Object(h.g)(u);case 19:return l.next=21,Object(A.delay)(400);case 21:l.next=15;break;case 23:l.next=28;break;case 25:l.prev=25,l.t1=l.catch(13),o.e(l.t1);case 28:return l.prev=28,o.f(),l.finish(28);case 31:return l.next=33,Object(A.put)(j());case 33:case"end":return l.stop()}}),_,null,[[13,25,28,31]])}function B(e){var t,n;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.conversationId,n=e.messageIds,r.next=3,Object(A.put)(w({conversationId:t,messageIds:n}));case 3:case"end":return r.stop()}}),O)}function R(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.takeEvery)(I,T);case 2:case"end":return e.stop()}}),S)}window.addEventListener("judge-online",(function(){g.store.dispatch(I())})),t.a=(s={},l()(s,m.a.SEND_MESSAGES_FAILED_BY_OFFLINE,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=e.offlineMessages,c=(a[r]||[]).concat(s);return v(v({},e),{},{offlineMessages:v(v({},a),{},l()({},r,o()(new Set(c))))})})),l()(s,m.a.RESET_MESSAGES_FAILED_BY_OFFLINE,(function(e){return v(v({},e),{},{offlineMessages:{}})})),l()(s,m.a.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED,(function(e,t){var n=t.payload,r=n.conversationId,s=n.messageIds,a=e.messagesRelatedMap,o=a[r]||{},c=(o.all||[]).filter((function(e){return!s.includes(e)})),i=(o.failed||[]).filter((function(e){return!s.includes(e)})),u=(o.sending||[]).filter((function(e){return!s.includes(e)}));return v(v({},e),{},{messagesRelatedMap:v(v({},a),{},l()({},r,v(v({},o),{},{all:c,failed:i,sending:u})))})})),s)},function(e,t,n){var r=n(14),s=n(141);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r=n(4),s=n.n(r),a=n(9),o=n(13);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=Object(a.createActions)(s()({},o.a.DELETE_CONVERSATION_MESSAGE_HASH,(function(e){return{conversationId:e.conversationId}}))).deleteConversationMessageHash;t.a=s()({},o.a.DELETE_CONVERSATION_MESSAGE_HASH,(function(e,t){var n=t.payload.conversationId,r=e.messagesRelatedMap;return delete r[n],i(i({},e),{},{messagesRelatedMap:i({},r)})}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return h}));var r=n(4),s=n.n(r),a=n(24),o=n.n(a),c=n(55),i=n.n(c),u=n(1);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e,t){for(var n,r=e.length,s=t.length,a=0,c=0,i=new Array(r+s).fill(0);a<r||c<s;)n=a===r?t[c++]:c===s?e[a++]:/^\d+$/.test(e[a])?Object(u.greaterThan)(e[a],t[c])?e[a++]:t[c++]:e[a++],i[a+c-1]=n;return o()(new Set(i))},f=(u.MessageTypes.MSG_TYPE_OFFER,u.MessageTypes.MSG_TYPE_ORDER,u.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE),A={1:"product_entry_point",2:"order_entry_point",3:"shop_entry_point",8:"product_inactive_seller",10:"lowest_price_guaranteed",11:"poor_fulfilment"},g=function(e){var t=e.id,n=e.recipientID,r=e.message,s=e.redirectInfo,a=e.conversationId,o=e.entryPoint,c=e.replyToMessageId,u=e.shopId,l=t||i()(),p=r.content,g=r.type,h=r.textContent,E={id:l,type:g,content:p,to_id:n,shop_id:u,request_id:l,created_timestamp:Math.floor(Date.now()/1e3),chat_send_option:{force_send_cancel_order_warning:!1,comply_cancel_order_warning:!1}};if(c&&(E.content=d(d({},E.content),{},{quoted_msg_id:c})),h&&g===f&&(E.textContent=h),o&&o.type&&o.conversationId===a?E.entry_point=A[o.type]:E.entry_point="direct_chat_entry_point",s){var m=s.orderId,b=s.productId,v=s.conversationId,_=s.shopId;if(parseInt(a)===parseInt(v)){if(E.conversation_id=a,m){var O=parseInt(m);E=d(d({},E),{},{order_id:O,source_content:{order_id:O,shop_id:_},source_type:"order"})}if(b){var S=parseInt(b);E=d(d({},E),{},{product_id:S,source_content:{product_id:S,shop_id:_},source_type:"product"})}}}return E},h=function(e,t){return e===t?0:Object(u.greaterThan)(e,t)?1:-1}},,,function(e,t,n){var r=n(14),s=n(278);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){c=!0,s=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw s}}return a}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},,function(e,t){e.exports=v},,,,function(e,t,n){var r=n(14),s=n(259);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(14),s=n(264);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(14),s=n(265);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(14),s=n(269);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(14),s=n(274);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},,function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var s=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,s=n;return[s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]]].join("")}},function(e,n,r){"use strict";(function(e){r.d(n,"d",(function(){return S})),r.d(n,"a",(function(){return y})),r.d(n,"c",(function(){return x})),r.d(n,"b",(function(){return C})),r.d(n,"e",(function(){return P}));var s,a=r(4),o=r.n(a),c=r(5),i=r.n(c),u=r(9),l=r(27),d=r(3),p=r(1),f=r(2),A=r(13),g=i.a.mark(w),h=i.a.mark(T),E=i.a.mark(R),m=i.a.mark(k),b=i.a.mark(P);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=Object(u.createActions)((s={},o()(s,A.a.TRANSLATE_MESSAGES_REQUESTED,(function(e){return{messageId:e.messageId,toggle:e.toggle,isIDAndPcmall:e.isIDAndPcmall}})),o()(s,A.a.CHANGE_TRANSLATE_STATUS,(function(e){return{messageId:e.messageId,status:e.status,changeMidStatus:e.changeMidStatus}})),o()(s,A.a.SHOW_TRANSLATE_FEEDBACK,(function(e){return{messageId:e.messageId,translationSource:e.translationSource}})),o()(s,A.a.SEND_TRANSLATE_FEEDBACK,(function(e){return{quality:e.quality,messageId:e.messageId,translationModel:e.translationModel,feedbacks:e.feedbacks,otherSuggestion:e.otherSuggestion}})),s)),S=O.translateMessagesRequested,y=O.changeTranslateStatus,x=O.showTranslateFeedback,C=O.sendTranslateFeedback,M=function(e,t){return Object(d.put)(Object(f.updateRecord)({name:"messages",id:e,record:t}))};function j(e,n,r,s,a,o,c,i,u,l){var d={step2_target_language:i,step2_translation_status:!!u},p=e||!a?_(_({},{step1_target_language:o,step1_translation_status:!!c}),d):d;t({trackerName:"translationTryAgain",data:_({message_id:n,conversation_id:r,message_type:0,is_sender:s,original_language:l},p)})}function I(e,n,r,s,a){t({trackerName:"translationTryAgain",data:_({message_id:n,conversation_id:r,message_type:0,is_sender:s},e||!a?{step1_translation_status:!1,step2_translation_status:!1}:{step2_translation_status:!1})})}function w(e){var t,n,r,s,a,o,c,u,l,A,h,E,m,b,v,O,S,y,x,C,w,T,B,R,k,P,D,N,q,F,L,G,U;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.messageId,r=t.toggle,s=t.isIDAndPcmall,i.next=3,Object(d.select)(Object(f.getMessageSelector)(n));case 3:if(i.t0=i.sent,i.t0){i.next=6;break}i.t0={};case 6:return a=i.t0,o=a.conversation_id,i.next=10,Object(d.select)(Object(f.getConversation)(o));case 10:return c=i.sent,u=c.shop_id,l=Object(p.getMessageIsSend)(a,c),A=a.content||{},h=A.text,E=A.translation,m=A.mid,b=(m||{}).text,i.prev=15,v={},r?v.toggleTranslateStatus=p.TranslationStatus.PENDING:v.translateStatus=p.TranslationStatus.PENDING,i.next=20,M(n,v);case 20:return i.next=22,Object(d.call)(f.fetch,{method:"POST",resource:"messages",suffix:"retry_translate",payload:JSON.stringify({shop_id:u,message_id:n,conversation_id:o})});case 22:if(O=i.sent,y=(S=O||{}).translated,x=S.middle_translated,w=(C=y||{}).translated_text,T=C.target_language,B=C.source_language,k=(R=x||{}).translated_text,P=R.target_language,D=R.source_language,q=(N=r?!!k:!!w)?p.TranslationStatus.SUCCEED:p.TranslationStatus.FAILED,F=r?{toggleTranslateStatus:q}:{translateStatus:q},L=r?_(_({},x),{},{text:k}):_(_({},y),{},{text:w}),G=N?L:_(_({},L),{},{text:""}),j(r,n,o,l,b,P,k,T,w,D||B),s){i.next=37;break}return i.next=36,M(n,_(_({},F),{},{content:{text:h,translation:G,mid:_(_({},x),{},{text:k})}}));case 36:return i.abrupt("return");case 37:return i.next=39,M(n,_(_({},F),{},{content:{text:h,translation:r?E:G,mid:r?G:m}}));case 39:i.next=47;break;case 41:return i.prev=41,i.t1=i.catch(15),I(r,n,o,l,b),U=r?{toggleTranslateStatus:p.TranslationStatus.FAILED}:{translateStatus:p.TranslationStatus.FAILED},i.next=47,M(n,_(_({},U),{},{content:{text:h,translation:r?E:_(_({},E),{},{text:""}),mid:r?_(_({},m),{},{text:""}):m}}));case 47:case"end":return i.stop()}}),g,null,[[15,41]])}function T(e){var t,n,r,s,a;return i.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.messageId,r=t.status,s=t.changeMidStatus,a=s?{toggleTranslateStatus:r}:{translateStatus:r},o.next=4,M(n,a);case 4:case"end":return o.stop()}}),h)}var B={shopee_en:"local_en",shopee_cn:"cn_en",shopee_kr:"kr_en"};function R(e){var t,n,r,s,a,o,c,u;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.messageId,r=t.translationSource,i.next=3,Object(d.select)(Object(f.getMessageSelector)(n));case 3:if(i.t0=i.sent,i.t0){i.next=6;break}i.t0={};case 6:return s=i.t0,a=s.conversation_id,i.next=10,Object(d.select)(Object(f.getConversation)(a));case 10:return o=i.sent,c=o.shop_id,u=Object(p.getMessageIsSend)(s,o),i.next=15,Object(d.put)(Object(f.showModal)({type:"EVALUTE_MODAL",title:{key:"modal.translation_feedback.title"},actions:{cancel:{label:{key:"common.cancel"},shape:"default",handler:function(){l.store.dispatch(Object(f.closeModal)())}},confirm:{label:{key:"common.submit"},handler:function(e){l.store.dispatch(Object(f.closeModal)()),l.store.dispatch(C(_({messageId:n,translationModel:B[r]},e)))}}},additions:{trackerData:{data:{message_id:n,conversation_id:a,message_type:p.ApiMessageTypes[p.MessageTypes.MSG_TYPE_TEXT],is_sender:u},shopId:Number(c)}}}));case 15:case"end":return i.stop()}}),E)}function k(t){var n,r,s,a,o,c,u,l,p,A,g,h;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.payload,r=n.quality,s=n.messageId,a=n.translationModel,o=n.feedbacks,c=n.otherSuggestion,i.prev=1,i.next=4,Object(d.select)(Object(f.getMessageSelector)(s));case 4:if(i.t0=i.sent,i.t0){i.next=7;break}i.t0={};case 7:return u=i.t0,i.next=10,Object(d.select)(f.isSubAccountSelector);case 10:return l=i.sent,p=u.conversation_id,i.next=14,Object(d.select)(Object(f.getConversation)(p));case 14:return A=i.sent,g=A.shop_id,h={quality:r,message_id:s,conversation_id:p,translation_model:a,feedbacks:o,other_suggestion:c,to_shop_id:String(u.from_shop_id)},l&&(h.shop_id=g.toString()),i.next=20,Object(d.call)(f.fetch,{method:"POST",resource:"translation",suffix:"feedback",payload:JSON.stringify(h)});case 20:return i.next=22,Object(d.call)(f.setToastInformationSaga,Object(f.setToastInformation)({toast:{show:!0,type:"success",message:e("common.toast.translation_feedback")}}));case 22:i.next=26;break;case 24:i.prev=24,i.t1=i.catch(1);case 26:case"end":return i.stop()}}),m,null,[[1,24]])}function P(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.takeEvery)(S,w);case 2:return e.next=4,Object(d.takeEvery)(y,T);case 4:return e.next=6,Object(d.takeEvery)(x,R);case 6:return e.next=8,Object(d.takeEvery)(C,k);case 8:case"end":return e.stop()}}),b)}}).call(this,r(21).t)},function(e,n,r){"use strict";(function(e){r.d(n,"b",(function(){return b})),r.d(n,"a",(function(){return v})),r.d(n,"c",(function(){return S}));var s=r(4),a=r.n(s),o=r(5),c=r.n(o),i=r(27),u=r(9),l=r(3),d=r(2),p=r(1);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=c.a.mark(_),h=c.a.mark(O),E=c.a.mark(S),m=Object(u.createActions)({DELETE_MESSAGE_REQUESTED:function(e){return{messageId:e.messageId}},DELETE_MESSAGE_POST_REQUESTED:function(e){return{messageId:e.messageId}}}),b=m.deleteMessageRequested,v=m.deleteMessagePostRequested;function _(n){var r,s,a,o;return c.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r=n.payload.messageId,c.next=3,Object(l.select)(Object(d.getMessageSelector)(r));case 3:return s=c.sent,a=s.type,o=s.conversation_id,c.next=7,Object(l.put)(Object(d.showModal)({type:"CONFIRM_MODAL",title:{key:"message.delete.title"},actions:{cancel:{label:e("common.cancel"),handler:function(){i.store.dispatch(Object(d.closeModal)()),t({trackerName:"cancelConfirm",data:{message_id:r,message_type:a,conversation_id:o}})}},confirm:{label:e("common.confirm"),handler:function(){i.store.dispatch(Object(d.closeModal)()),i.store.dispatch(v({messageId:r})),t({trackerName:"deleteConfirm",data:{message_id:r,message_type:Object(p.getReplyTrackerMessageType)(a),conversation_id:o}})}}}}));case 7:case"end":return c.stop()}}),g)}function O(e){var n,r,s,a,o,i,u,f,g,E,m,b,v,_,O,S,y,x;return c.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload.messageId,c.prev=1,c.next=4,Object(l.select)(d.deleteConfigSelector);case 4:return r=c.sent,c.next=7,Object(l.select)(Object(d.getMessageSelector)(n));case 7:return s=c.sent,c.next=10,Object(l.call)(d.fetch,{method:"POST",parent:"messages",resource:"delete",payload:JSON.stringify({msg_id:n,type:s.type,delete_config_version:r.deleteConfigVersion})});case 10:return a=c.sent,o=s.message_option|p.MessageOption.MSG_OPT_DELETE,i=Object(d.normalize)("messages",A(A({},s),{},{message_option:o})),u=i.entities,c.next=15,Object(l.put)(Object(d.updateEntities)({entities:u}));case 15:return c.next=17,Object(l.select)(Object(d.getConversation)(s.conversation_id));case 17:if((f=c.sent).latest_message_id!==s.id){c.next=22;break}return g=Object(d.normalize)("conversations",A(A({},f),{},{last_message_option:o,latest_message_content:{text:""},latest_message_from_id:s.from_id})),E=g.entities,c.next=22,Object(l.put)(Object(d.updateEntities)({entities:E}));case 22:if(m=a.config_version,r.deleteConfigVersion!==m){c.next=25;break}return c.abrupt("return");case 25:return c.next=27,Object(l.select)(d.currentUserSelector);case 27:return b=c.sent,v=(a.region_config||[]).find((function(e){return e.region===b.country})),_=!1,O=0,v&&v.duration&&(_=!0,O=v.duration),c.next=34,Object(l.put)(Object(d.updateDelPermission)({hasDeletePermission:_,deleteConfigVersion:m,deleteConfigDuration:O}));case 34:c.next=45;break;case 36:return c.prev=36,c.t0=c.catch(1),c.next=40,Object(l.select)(Object(d.getMessageSelector)(n));case 40:return S=c.sent,y=S.type,x=S.conversation_id,c.next=44,Object(l.call)(d.setToastInformationSaga,Object(d.setToastInformation)({error:c.t0}));case 44:t({operation:p.TrackerOperation.IMPRESSION,trackerName:"error",data:{message_id:n,message_type:Object(p.getReplyTrackerMessageType)(y),conversation_id:x,error_reason:c.t0.message}});case 45:case"end":return c.stop()}}),h,null,[[1,36]])}function S(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.takeEvery)(b,_);case 2:return e.next=4,Object(l.takeEvery)(v,O);case 4:case"end":return e.stop()}}),E)}}).call(this,r(21).t)},,function(e,t,n){"use strict";var r=n(0),s=n.n(r),a=n(8),o=n(10),c=n(7),i=n(2);t.a=Object(o.a)(Object(a.connect)((function(e){return{locale:Object(i.localeSelector)(e)}}),null)((function(e){var t=e.isSend,n=e.message,r=e.locale,a=n.type,o=n.content,i=n.textContent;return s.a.createElement(c.SystemMessage,{type:a,locale:r,isSend:t,content:o,textContent:i||{}})})))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n){return e===t&&(new Date).getTime()<=n/1e6}},function(e,t,n){"use strict";(function(e){var r=n(16),s=n.n(r),a=n(0),o=n.n(a),c=n(100),i=n.n(c),u=n(221),l=n.n(u);t.a=function(t){var n=t.type,r=t.showSentLink;return o.a.createElement("div",{className:i.a.root},o.a.createElement("div",{className:i.a.label},e("common.".concat(n,".footer"))),r&&o.a.createElement("div",{className:i.a.sendStatus},o.a.createElement(s.a,{svg:l.a,className:i.a.linkArrow}),e("common.order.link_send")))}}).call(this,n(21).t)},function(e,n,r){"use strict";(function(e){var s=r(4),a=r.n(s),o=r(0),c=r.n(o),i=r(30),u=r.n(i),l=r(8),d=r(118),p=r.n(d),f=r(10),A=r(1),g=r(7),h=r(2),E=r(29);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={visitShopSellerCenterRequested:h.visitShopSellerCenterRequested,copySucceedFeedback:h.copySucceedFeedback};n.a=Object(f.a)(Object(l.connect)((function(e){return{shopAccess:Object(h.shopAccessSelector)(e)}}),v)((function(n){var r=n.isSubAccount,s=n.isSend,o=n.visitShopSellerCenterRequested,i=n.message,l=n.shopAccess,d=void 0===l?{}:l,f=n.conversationShopId,h=n.region,m=n.copySucceedFeedback,v=n.isScChat,_=i.content,O=i.textContent,S=(i.type,_||{}),y=S.shop_id,x=S.order_id,C=S.bot_order_info,M=(C=void 0===C?{}:C).shop_id,j=C.order_id,I=d.hasViewOrderAccess,w=void 0!==I&&I,T=y||M,B=x||j,R=T===f;return!R&&r?c.a.createElement("div",{className:u()(p.a.order,a()({},p.a.send,s))},c.a.createElement("span",{className:p.a.link,onClick:function(){window.open(Object(A.getMallOrderUrl)({id:x},T,h))}},e("conversation_detail.message_list.order_not_in_your_shop"))):c.a.createElement(g.OrderMessage,{region:h,hasViewOrderAccess:w,isSend:s,isScChat:v,textContent:O,handleClickMessage:function(){if(!R)return window.open(Object(A.getMallOrderUrl)(O,T,h)),null;t(b({trackerName:"clickOrderMessage"},Object(E.b)({message:i,isSend:s,conversationShopId:f}))),Object(A.redirectionWithAccess)({access:w,isSubAccount:r,action:function(){return o({shopId:T,orderId:B})},url:"https://".concat(Object(A.getSellerCenterUrl)(h),"/portal/sale/").concat(B)})},copySucceedFeedback:function(){m(),t(b({trackerName:"clickCopyOrderSN"},Object(E.b)({message:i,isSend:s,conversationShopId:f})))}})})))}).call(this,r(21).t)},function(e,n,r){"use strict";var s=r(4),a=r.n(s),o=r(1),c=r(0),i=r.n(c),u=r(10),l=r(7),d=r(8),p=r(2),f=r(12),A={handleSensitiveUrl:f.handleSensitiveUrl,changeTranslateStatus:f.changeTranslateStatus,translateMessagesRequested:f.translateMessagesRequested,scrollToMessage:f.scrollToMessage,showTranslateFeedback:f.showTranslateFeedback},g=Object(u.a)(Object(d.connect)((function(e){return{shopTranslationSettings:Object(p.shopTranslationSettingsSelector)(e),currentConversationTranslationAccess:Object(p.currentConversationTranslationAccessSelector)(e),locale:Object(p.localeSelector)(e)}}),A)((function(e){var t=e.isScChat,n=e.isSend,r=e.shopTranslationSettings,s=e.measure,a=e.handleSensitiveUrl,c=e.changeTranslateStatus,u=e.translateMessagesRequested,d=e.message,p=e.conversationShopId,f=e.currentConversationTranslationAccess,A=e.scrollToMessage,g=e.conversationId,h=e.conversationBuyerId,E=e.showTranslateFeedback,m=e.handleMessageIsSend,b=e.locale,v=d.send_status,_=d.message_option,O=d.content,S=d.id,y=d.country,x=d.translateStatus,C=d.toggleTranslateStatus,M=d.type,j=d.quoted_msg,I=d.source,w=(O||{}).translation,T=(w=void 0===w?{}:w).text,B=r[p]||{},R=B.translationPreference,k=B.autoTranslationStatus,P=B.source,D=B.inTranslationFeedbackWhitelist,N=k===o.SwitchStatus.ENABLED,q=Object(o.handleDisplayTranslation)(N,n,T,t,f);return i.a.createElement(l.TextMessage,{buyerId:h,shopId:p,sendStatus:v,messageOption:_,enableTranslation:q,translationPreference:R,translationSource:P,id:S,measure:s,translateStatus:x,toggleTranslateStatus:C,handleSensitiveUrl:a,changeTranslateStatus:c,translateMessagesRequested:u,content:O,isScChat:t,enableAutoTranslation:N,isSend:n,country:y,type:M,replyToMessage:j,scrollToMessage:A,conversationId:g,messageSource:I,showTranslateFeedback:E,inTranslationFeedbackWhitelist:D,handleMessageIsSend:m,locale:b})}))),h=r(51);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={showMediaPreviewModalRequested:p.showMediaPreviewModalRequested,scrollToMessage:f.scrollToMessage},v=Object(u.a)(Object(d.connect)((function(){return{}}),b)((function(e){var n=e.isSend,r=e.measure,s=e.showMediaPreviewModalRequested,a=e.message,u=e.scrollToMessage,d=e.handleMessageIsSend,p=e.conversationShopId,f=a.id,A=a.request_id,g=a.content,E=a.quoted_msg,b=a.conversation_id,v=Object(c.useContext)(h.a),_={data:{conversation_id:b,message_id:f===A?0:f},shopId:p};Object(c.useEffect)((function(){g.unknown_qr_code&&!n&&t(m({operation:o.TrackerOperation.IMPRESSION,trackerName:"impressionImageMessage"},_))}),[]);var O=function(){return s({messageId:f})};return i.a.createElement(l.ImageMessage,{isSend:n,imgCache:v,id:f,request_id:A,content:g,measure:r,replyToMessage:E,scrollToMessage:u,handleMessageIsSend:d,openPreviewModal:O,handleOpenQrCode:function(){O(),t(m({trackerName:"clickPreviewQrcode"},_))}})}))),_=r(35),O=r.n(_),S=r(31),y=function(e,t){var n=e.id,r=e.status,s=e.shop_id,a=e.region;Object(o.checkProductDeleted)(n,r)||(window.open("https://".concat(Object(o.getMallUrl)(a),"/product/").concat(s,"/").concat(n,"/")),t&&t(e))},x=Object(u.a)(Object(d.connect)((function(e){return{isCB:Object(p.isCBSellerSelector)(e)}}),null)((function(e){var n=e.isSend,r=e.region,s=e.message,a=e.measure,o=e.conversationShopId,c=e.conversationStatus,u=e.isCB,d=s.id,p=s.content,f=s.textContent,A=void 0===f?{}:f,g=s.conversation_id,h=p.tax_value;return i.a.createElement(l.OfferMessage,{id:d,isSend:n,country:r,measure:a,onReply:function(e){t({trackerName:e.isAccept?"clickAcceptOffer":"clickRejectOffer",data:{itemid:A.id,conversation_id:g,message_id:d},shopId:o}),function(e){O.a.put(S.default.replyOfferRequested({payload:e}))}(e)},priceBeforeTax:p.price_before_tax,taxValue:h,textContent:A,handleClickItem:y,conversationClosed:"closed"===c,isCB:u})}))),C=r(29);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var j={visitShopSellerCenterRequested:p.visitShopSellerCenterRequested},I=Object(u.a)(Object(d.connect)((function(e){return{shopAccess:Object(p.shopAccessSelector)(e)}}),j)((function(e){var n=e.isScChat,r=e.isSubAccount,s=e.visitShopSellerCenterRequested,c=e.isSend,u=e.message,d=e.shopAccess,p=void 0===d?{}:d,f=e.conversationShopId,A=p.hasViewProductAccess,g=u.textContent,h=g||{},E=h.id,m=h.status,b=h.shop_id,v=h.region,_=Object(o.checkProductDeleted)(E,m),O=b===f,S=n||!O||!r||A;return i.a.createElement(l.ProductMessage,{item:g,isSend:c,deleted:_,hasAccess:S,handleClickMessage:function(){S&&!_&&(t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trackerName:"impressionProductMessage"},Object(C.b)({message:u,isSend:c,conversationShopId:f,extraParams:{itemid:E}}))),O?r?Object(o.redirectionWithAccess)({access:!0,isSubAccount:!0,action:function(){return s({shopId:b,itemId:E})}}):n?window.open("https://".concat(Object(o.getSellerCenterUrl)(Object(o.isVisitingCNSC)()?"cn":v),"/portal/product/").concat(E)):window.open("https://".concat(Object(o.getMallUrl)(v),"/product/").concat(b,"/").concat(E,"/")):window.open("https://".concat(Object(o.getMallUrl)(v),"/product/").concat(b,"/").concat(E,"/")))}})}))),w=r(111),T={scrollToMessage:f.scrollToMessage},B=Object(u.a)(Object(d.connect)((function(){return{}}),T)((function(e){var t=e.region,n=e.message,r=e.isSend,s=e.scrollToMessage,a=e.conversationBuyerId,u=e.handleMessageIsSend,d=n.send_status,p=n.request_id,f=n.id,A=n.content,g=n.quoted_msg,E=r&&d===o.MessageSendStatus.SENDING,m=Object(c.useContext)(h.a);return i.a.createElement(l.StickerMessage,{imgCache:m,isSending:E,id:f,content:A,country:t,request_id:p,isSend:r,replyToMessage:g,scrollToMessage:s,conversationBuyerId:a,handleMessageIsSend:u})}))),R=r(108);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D={visitShopSellerCenterRequested:p.visitShopSellerCenterRequested},N=Object(u.a)(Object(d.connect)((function(e){return{isSubAccount:Object(p.isSubAccountSelector)(e),shopAccess:Object(p.shopAccessSelector)(e),shop:Object(p.currentConversationShopSelectors)(e)}}),D)((function(e){var n=e.isSend,r=e.visitShopSellerCenterRequested,s=e.isSubAccount,a=e.message,u=e.shopAccess,d=e.shop.country,p=void 0===d?"":d,f=e.conversationShopId,A={message:a,isSend:n,conversationShopId:f},g=Object(C.b)(A);Object(c.useEffect)((function(){!n&&t(P({operation:o.TrackerOperation.IMPRESSION,trackerName:"impressionVoucherForReceiverInMinichat"},g))}),[]);var h=u.hasViewVoucherAccess,E=a.content,m=a.textContent,b=void 0===m?{}:m,v=a.id,_=b.country,y=b.id,x=b.url,M=E.shop_id,j=(E.source,function(){var e;x&&(M=Object(o.getUrlParam)("shop_id",x),Object(o.getUrlParam)("source",x)),e={messageId:v},O.a.put(S.default.claimVoucherRequested({payload:e})),t(P({trackerName:"clickClaimVoucher"},g))});return i.a.createElement(l.VoucherMessage,{voucher:b,isSend:n,shopRegion:p,isSubAccount:s,hasViewVoucherAccess:h,onOperatorClick:function(e){switch(e){case o.VoucherOperateType.DETAILS:!function(){x&&(M=Object(o.getUrlParam)("shop_id",x));var e="https://".concat(Object(o.getSellerCenterUrl)(_),"/portal/marketing/vouchers/").concat(y);s?r({url:e,shopId:M}):window.open(e)}();break;case o.VoucherOperateType.CLAIM:j();break;case o.VoucherOperateType.USE:x&&(M=Object(o.getUrlParam)("shop_id",x)),window.open("https://".concat(Object(o.getMallUrl)(_),"/shop/").concat(M))}}})})));function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var F=Object(u.a)((function(e){var n=e.isSend,r=e.message,s=e.region,o=e.conversationShopId,c=r.type,u=r.content,d=function(e){var s=e.id;t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trackerName:"clickProductListMessage"},Object(C.b)({message:r,isSend:n,conversationShopId:o,extraParams:{itemid:s}})))};return i.a.createElement(l.ProductsMessage,{region:s,type:c,isSend:n,content:u,handleClickItem:function(e){y(e,d)}})})),L=Object(u.a)(Object(d.connect)((function(e){return{currentUser:Object(p.currentUserSelector)(e)}}),{})((function(e){var n=e.measure,r=e.isSend,s=e.conversation,a=e.message,o=a.id,u=a.conversation_id,d=a.request_id,p=a.textContent,f=Object(c.useContext)(h.a);return i.a.createElement(l.FeedStoryMessage,{imgCache:f,id:o,requestId:d,measure:n,isSend:r,textContent:p,handleTrackStory:function(){t({shopId:s.shop_id,trackerName:"clickHandleStoryMessage",data:{story_id:p.id,message_id:o,conversation_id:u}})}})})));function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=Object(u.a)((function(e){var n=e.measure,r=e.isSend,s=e.message,a=e.region,c=e.conversationShopId,u=s.content,d=u.cart_items,p=void 0===d?[]:d,f=u.shop_id,A=s.textContent,g=void 0===A?[]:A,h=function(e){var n=e.id;t(U({trackerName:"clickCartProduct"},Object(C.b)({message:s,isSend:r,conversationShopId:c,extraParams:{itemid:n}})))};return i.a.createElement(l.CartReminderMessage,{isSend:r,measure:n,products:g,cartItemsCount:p.length,handleClickItem:function(e){y(e,h)},handleClickMessage:function(){var e=function(e,t){var n=e.map((function(e){var n=e.model_id,r=e.item_id,s=e.group_id,a={shopId:t,itemId:r};return n&&(a.modelId=n),s&&"0"!==s&&(a.itemGroupId=s),a}));return Object(o.encode)(JSON.stringify(n))}(p,f);window.open("https://".concat(Object(o.getMallUrl)(a),"/cart?referrerItems=").concat(e,"&source=seller_chat")),t(U({trackerName:"clickCartButton"},Object(C.b)({message:s,isSend:r,conversationShopId:c})))}})})),Y=r(26),z={sendMessagesRequested:f.sendMessagesRequested},H=Object(u.a)(Object(d.connect)((function(){return{}}),z)((function(e){var t=e.isSend,n=e.measure,r=e.sendMessagesRequested,s=e.message,a=e.conversationShopId,o=e.conversationBuyerId,c=e.conversationId,u=e.isInFaqHistoryModal,d=s.content,p=s.faq_session_id,f=Object(Y.a)(u,r);return i.a.createElement(l.FaqMessage,{isSend:t,measure:n,sendMessagesRequested:f,content:d,conversationId:c,shopId:a,conversationUserId:o,faqSessionId:p})}))),V=r(17),Q=r.n(V),X=r(18),K=r.n(X),Z=r(19),J=r.n(Z),$=r(20),ee=r.n($),te=r(11),ne=r.n(te),re=r(30),se=r.n(re),ae=r(119),oe=r.n(ae),ce=function(e){J()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ne()(e);if(t){var s=ne()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return ee()(this,n)}}(n);function n(){return Q()(this,n),t.apply(this,arguments)}return K()(n,[{key:"render",value:function(){var e=this.props,t=e.conversationId,n=e.conversationShopId,r=e.conversationBuyerId,s=e.sendMessagesRequested,a=e.isSend,c=e.isInFaqHistoryModal,u=e.message,d=void 0===u?{}:u,p=d.type,f=Object(Y.a)(c,s),A=p===o.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED;return i.a.createElement("div",null,i.a.createElement("div",{className:se()(oe.a.message,a?oe.a.send:"",A?oe.a.unsupportFaq:"")},Object(o.getCustomMessageText)(d.type)),A&&i.a.createElement(l.FaqButton,{isSend:a,conversationId:t,shopId:n,conversationUserId:r,sendMessagesRequested:f}))}}]),n}(i.a.PureComponent),ie={sendMessagesRequested:f.sendMessagesRequested},ue=Object(u.a)(Object(d.connect)(null,ie)(ce)),le={sendMessagesRequested:f.sendMessagesRequested},de=Object(u.a)(Object(d.connect)((function(){return{}}),le)((function(e){var t=e.sendMessagesRequested,n=e.isSend,r=e.message,s=e.conversationShopId,a=e.conversationBuyerId,o=e.conversationId,c=e.isInFaqHistoryModal,u=r.id,d=r.content,p=r.faq_session_id,f=Object(Y.a)(c,t);return i.a.createElement(l.FaqFeedbackPromptMessage,{id:u,content:d,sendMessagesRequested:f,conversationId:o,conversationUserId:a,isSend:n,shopId:s,faqSessionId:p})}))),pe={sendMessagesRequested:f.sendMessagesRequested},fe=Object(u.a)(Object(d.connect)((function(e){return{locale:Object(p.localeSelector)(e)}}),pe)((function(e){var t=e.sendMessagesRequested,n=e.isSend,r=e.conversationShopId,s=e.conversationBuyerId,a=e.conversationId,o=e.isInFaqHistoryModal,c=e.message,u=e.locale,d=c.content,p=c.faq_session_id,f=Object(Y.a)(o,t);return i.a.createElement(l.FaqLiveAgentPromptMessage,{sendMessagesRequested:f,isSend:n,conversationId:a,shopId:r,conversationUserId:s,content:d,locale:u,faqSessionId:p})})));function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ge=Object(u.a)((function(e){var n=e.region,r=e.measure,s=e.isSend,o=void 0!==s&&s,c=e.message,u=e.conversationShopId,d=c.content,p=function(e){var n=e.id;t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trackerName:"clickBundleDealDetail"},Object(C.b)({message:c,isSend:o,conversationShopId:u,extraParams:{itemid:n}})))};return i.a.createElement(l.BundleDealMessage,{region:n,measure:r,isSend:o,content:d,handleClickItem:function(e){y(e,p)}})})),he=Object(u.a)((function(e){var t=e.measure,n=e.isSend,r=void 0!==n&&n,s=e.message.content;return i.a.createElement(l.FlashSaleMessage,{measure:t,isSend:r,content:s,handleClickItem:y})}));function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be={visitShopSellerCenterRequested:p.visitShopSellerCenterRequested},ve=Object(u.a)(Object(d.connect)((function(e){return{shopAccess:Object(p.shopAccessSelector)(e)}}),be)((function(e){var n=e.isSend,r=e.isSubAccount,s=e.visitShopSellerCenterRequested,a=e.message,c=e.shopAccess,u=void 0===c?{}:c,d=e.region,p=e.conversationShopId,f=u.hasViewOrderAccess,A=a.content,g=A.order_id,h=A.shop_id,E=a.textContent,m=Object(C.b)({message:a,isSend:n,conversationShopId:p});return i.a.createElement(l.RateReminderMessage,{isSend:n,textContent:E,hasViewOrderAccess:f,handleClickMessage:function(){n?Object(o.redirectionWithAccess)({access:f,isSubAccount:r,action:function(){return s({shopId:h,orderId:g})},url:"https://".concat(Object(o.getSellerCenterUrl)(Object(o.isVisitingCNSC)()?"cn":d),"/portal/sale/").concat(g)}):window.open("https://".concat(Object(o.getMallUrl)(d),"/user/purchase/order/").concat(g,"/?shopid=").concat(h))},trackRateButton:function(){t(me({trackerName:"clickRateButton"},m))},trackRateProduct:function(){t(me({trackerName:"clickRateProduct"},m))}})}))),_e=r(229),Oe={fetchFaqMessagesRequested:f.fetchFaqMessagesRequested,updateCurrentFaqId:f.updateCurrentFaqId},Se=Object(u.a)(Object(d.connect)((function(e){return{locale:Object(p.localeSelector)(e)}}),Oe)((function(e){return i.a.createElement(_e.a,e)}))),ye=r(6),xe=r.n(ye),Ce=r(87),Me=r.n(Ce),je=o.MessageTypes.MSG_TYPE_SELECTED_OPTION,Ie=function(e){J()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ne()(e);if(t){var s=ne()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return ee()(this,n)}}(n);function n(e){var r;return Q()(this,n),(r=t.call(this,e)).renderOption=r.renderOption.bind(xe()(r)),r.sendMessage=r.sendMessage.bind(xe()(r)),r}return K()(n,[{key:"sendMessage",value:function(e){var t=e.request_live_agent,n=e.payload,r=e.text,s=this.props;(0,s.sendMessagesRequested)({conversationId:s.conversationId,messages:[{type:je,content:{text:r,payload:n,request_live_agent:t}}]})}},{key:"renderOption",value:function(e,t){var n,r=this,s=e.text,o=e.variant,c=this.props,u=c.message,l=c.currentConversationMaxOptionHideTime,d=u.created_timestamp<l,p=se()(Me.a.option,(n={},a()(n,Me.a.primary,1===o),a()(n,Me.a.invalid,d),n));return i.a.createElement("div",{key:t,className:p,title:s,onClick:function(){if(d)return null;r.sendMessage(e)}},s)}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSensitiveUrl,r=t.message,s=r.content,a=s.title,o=s.options,c=void 0===o?[]:o,u=r.message_option;return i.a.createElement("div",{className:Me.a.root},i.a.createElement("div",{className:Me.a.title},i.a.createElement(l.Text,{text:a,messageOption:u,handleSensitiveUrl:n})),c.map((function(t,n){return e.renderOption(t,n)})))}}]),n}(c.PureComponent),we={handleSensitiveUrl:f.handleSensitiveUrl,sendMessagesRequested:f.sendMessagesRequested},Te=Object(u.a)(Object(d.connect)((function(e){return{conversation:Object(p.currentConversationSelector)(e),currentConversationMaxOptionHideTime:Object(p.currentConversationMaxOptionHideTimeSelectors)(e)}}),we)(Ie)),Be=Object(u.a)((function(e){var t=e.isSend,n=e.message.content;return i.a.createElement(l.AddOnDealMessage,{content:n,isSend:t,handleClickItem:y})})),Re={showMediaPreviewModalRequested:p.showMediaPreviewModalRequested,scrollToMessage:f.scrollToMessage},ke=Object(d.connect)((function(e,t){return{videoInfo:Object(p.selectVideoInfoByKey)(t.message.request_id)(e)}}),Re)((function(e){var n=e.isSend,r=e.videoInfo,s=e.showMediaPreviewModalRequested,a=e.message,c=e.conversationShopId,u=e.scrollToMessage,d=e.conversationBuyerId,p=e.handleMessageIsSend,f=a.id,A=a.conversation_id,g=a.to_id,h=a.from_id,E=a.request_id,m=a.content,b=a.send_status,v=a.quoted_msg,_=n&&b===o.MessageSendStatus.SENDING;return i.a.createElement(l.VideoMessage,{id:f,isSend:n,content:m,isSending:_,videoInfo:r,onPlayVideo:function(e){t({trackerName:"clickPlayInVideoMessage",data:{message_id:f===E?0:f,conversation_id:A,is_sender:n,to_user_id:g,from_user_id:h,video_original_duration:m.duration_seconds},conversationShopId:c}),s({messageId:e})},replyToMessage:v,scrollToMessage:u,conversationBuyerId:d,handleMessageIsSend:p})})),Pe=Object(u.a)((function(e){return i.a.createElement(ke,e)})),De={handleSensitiveUrl:f.handleSensitiveUrl,showMediaPreviewModalRequested:p.showMediaPreviewModalRequested},Ne=Object(u.a)(Object(d.connect)((function(){return{}}),De)((function(e){var t=e.isSend,n=e.measure,r=e.showMediaPreviewModalRequested,s=e.message,a=e.handleSensitiveUrl,o=e.conversationShopId,u=s.content,d=s.id,p=s.request_id,f=s.message_option,A=s.business_tag,g=Object(c.useContext)(h.a),E={shopId:o,data:{message_id:d,business_tag:A}};return i.a.createElement(l.ImageWithTextMessage,{content:u,measure:n,messageId:d,requestId:p,isSend:t,imgCache:g,messageOption:f,handleSensitiveUrl:a,showMediaPreviewModalRequested:r,trackerData:E})}))),qe={evaluationRequested:f.evaluationRequested},Fe=Object(u.a)(Object(d.connect)((function(e){return{locale:Object(p.localeSelector)(e),currentUser:Object(p.currentUserSelector)(e)}}),qe)((function(e){var t=e.measure,n=e.evaluationRequested,r=e.message,s=e.conversationId,a=e.isSend,o=e.locale,c=e.isInFaqHistoryModal,u=e.currentUser,d=e.conversationShopId,p=r.id,f=r.from_shop_id,A=r.textContent,g=r.to_id;return i.a.createElement(l.RateCardMessage,{measure:t,rateShopId:f,onSubmit:n,conversationId:s,isSend:a,textContent:A,locale:o,isInFaqHistoryModal:c,isSelfReceived:g===u.id,conversationShopId:d,messageId:p})})));function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue={sendMessagesRequested:f.sendMessagesRequested},We=Object(u.a)(Object(d.connect)((function(e){return{locale:Object(p.localeSelector)(e)}}),Ue)((function(e){var t=e.isSend,n=void 0!==t&&t,r=e.conversationId,s=e.conversationShopId,a=e.conversationBuyerId,o=e.sendMessagesRequested,c=e.message,u=e.isInFaqHistoryModal,d=e.locale,p=c.content,f=c.faq_session_id,A=Object(Y.a)(u,o);return i.a.createElement(l.NewFaqMessage,{isSend:n,sendMessagesRequested:A,content:p,conversationId:r,shopId:s,conversationUserId:a,locale:d,handleSendMessage:function(e){var t=e.type,n=e.content;A({conversationId:r,conversationUserId:a,messages:[{shopId:s,type:t,content:Ge(Ge({},n),{},{faq_session_id:f})}]})},faqSessionId:f})})));function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var He,Ve=o.MessageTypes.MSG_TYPE_FAQ_QUESTION_LIST,Qe=o.MessageTypes.MSG_TYPE_FAQ_QUESTION,Xe=o.MessageTypes.MSG_TYPE_FAQ_CATEGORY_CHOICE,Ke={sendMessagesRequested:f.sendMessagesRequested},Ze=Object(u.a)(Object(d.connect)((function(e){return{locale:Object(p.localeSelector)(e)}}),Ke)((function(e){var t=e.isSend,n=void 0!==t&&t,r=e.conversationId,s=e.conversationShopId,a=e.conversationBuyerId,o=e.sendMessagesRequested,c=e.message,u=e.isInFaqHistoryModal,d=e.locale,p=c.content,f=c.type,A=c.faq_session_id,g=Object(Y.a)(u,o);return i.a.createElement(l.FaqListMessage,{isSend:n,content:p,type:f,locale:d,handleSendMessage:function(e){g({conversationId:r,conversationUserId:a,messages:[{shopId:s,type:f===Ve?Qe:Xe,content:ze(ze({},e),{},{faq_session_id:A})}]})}})}))),Je=Object(u.a)(Object(d.connect)((function(e){return{currentBuyerShopId:Object(p.currentBuyerShopIdSelector)(e)}}),null)((function(e){var t=e.isSend,n=e.message,r=e.currentBuyerShopId,s=e.conversationId,a=e.measure,o=n.content.bot_data,c=n.faq_session_id;return i.a.createElement(l.ChatbotMessage,{isSend:t,message:o,shopId:r,conversationId:s,measure:a,faqSessionId:c})}))),$e=(He={},a()(He,o.MessageTypes.MSG_TYPE_TEXT,g),a()(He,o.MessageTypes.MSG_TYPE_IMAGE,v),a()(He,o.MessageTypes.MSG_TYPE_OFFER,x),a()(He,o.MessageTypes.MSG_TYPE_ORDER,w.a),a()(He,o.MessageTypes.MSG_TYPE_STICKER,B),a()(He,o.MessageTypes.MSG_TYPE_PRODUCT,I),a()(He,o.MessageTypes.MSG_TYPE_NOTIFICATION,R.a),a()(He,o.MessageTypes.MSG_TYPE_VOUCHER,N),a()(He,o.MessageTypes.MSG_TYPE_ITEM_LIST,F),a()(He,o.MessageTypes.MSG_TYPE_FEED_STORY,L),a()(He,o.MessageTypes.MSG_TYPE_SHOPPING_CART,W),a()(He,o.MessageTypes.MSG_TYPE_FAQ,H),a()(He,o.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT,g),a()(He,o.MessageTypes.MSG_TYPE_FAQ_QUESTION,g),a()(He,o.MessageTypes.MSG_TYPE_FAQ_FEEDBACK,g),a()(He,o.MessageTypes.MSG_TYPE_FAQ_FEEDBACK_PROMPT,de),a()(He,o.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,fe),a()(He,o.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,ve),a()(He,o.MessageTypes.MSG_TYPE_BUNDLE_MESSAGE,Se),a()(He,o.MessageTypes.MSG_TYPE_BUNDLE_DEAL,ge),a()(He,o.MessageTypes.MSG_TYPE_FLASH_SALE,he),a()(He,o.MessageTypes.MSG_TYPE_OPTION_PACK,Te),a()(He,o.MessageTypes.MSG_TYPE_SELECTED_OPTION,g),a()(He,o.MessageTypes.MSG_TYPE_ADD_ON_DEAL,Be),a()(He,o.MessageTypes.MSG_TYPE_VIDEO,Pe),a()(He,o.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT,Ne),a()(He,o.MessageTypes.MSG_TYPE_RATE_CARD,Fe),a()(He,o.MessageTypes.MSG_TYPE_NEW_FAQ,We),a()(He,o.MessageTypes.MSG_TYPE_FAQ_CATEGORY_CHOICE,g),a()(He,o.MessageTypes.MSG_TYPE_FAQ_TYPE_CHOICE,g),a()(He,o.MessageTypes.MSG_TYPE_FAQ_QUESTION_LIST,Ze),a()(He,o.MessageTypes.MSG_TYPE_FAQ_CATEGORY_LIST,Ze),a()(He,o.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,g),a()(He,o.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,(function(e){return i.a.createElement(w.a,e)})),a()(He,o.MessageTypes.FAQ_TYPE_BOT_RESPONSE_MESSAGE,Je),a()(He,o.MessageTypes.MSG_TYPE_SECURITY_TIPS,Object(u.a)(l.SecurityTipsMessage)),He);n.a=function(e){return $e[e]||ue}},function(e,t,n){"use strict";var r=n(0),s=n.n(r),a=n(7),o=function(e){var t=e.measure,n=e.evaluationRequested,r=e.message,o=r.textContent,c=r.id;return s.a.createElement(a.EvaluationMessage,{measure:t,content:o,onSubmit:function(e){return n(e)},messageId:c})},c=n(8),i=n(10),u={evaluationRequested:n(12).evaluationRequested};t.a=Object(i.a)(Object(c.connect)((function(){return{}}),u)((function(e){return s.a.createElement(o,e)})))},,function(e,t,n){var r=n(14),s=n(261);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t){e.exports=_},function(e,t,n){var r=n(14),s=n(263);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(14),s=n(272);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(14),s=n(273);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(14),s=n(275);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},,,,,,,,,,,,,,,,function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(70);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function i(e,t,n,r){var s=t&&t.prototype instanceof d?t:d,a=Object.create(s.prototype),o=new S(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(s,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===s)throw a;return{value:void 0,done:!0}}for(n.method=s,n.arg=a;;){var o=n.delegate;if(o){var c=v(o,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var i=u(e,t,n);if("normal"===i.type){if(r=n.done?"completed":"suspendedYield",i.arg===l)continue;return{value:i.arg,done:n.done}}"throw"===i.type&&(r="completed",n.method="throw",n.arg=i.arg)}}}(e,n,o),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=i;var l={};function d(){}function p(){}function f(){}var A={};A[s]=function(){return this};var g=Object.getPrototypeOf,h=g&&g(g(y([])));h&&h!==t&&n.call(h,s)&&(A=h);var E=f.prototype=d.prototype=Object.create(A);function m(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var r;this._invoke=function(s,a){function o(){return new t((function(r,o){!function r(s,a,o,c){var i=u(e[s],e,a);if("throw"!==i.type){var l=i.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,c)}),(function(e){r("throw",e,o,c)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,c)}))}c(i.arg)}(s,a,r,o)}))}return r=r?r.then(o,o):o()}}function v(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,v(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var s=r.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function y(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=E.constructor=f,f.constructor=p,p.displayName=c(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,o,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},m(b.prototype),b.prototype[a]=function(){return this},e.AsyncIterator=b,e.async=function(t,n,r,s,a){void 0===a&&(a=Promise);var o=new b(i(t,n,r,s),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},m(E),c(E,o,"Generator"),E[s]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=y,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),i=n.call(a,"finallyLoc");if(c&&i){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var s=r.arg;O(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:y(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){(t=n(15)(!0)).push([e.i,"._31xcV2AYAe7PQCE5go9tBW {\n  height: 100%;\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  box-sizing: border-box;\n  -ms-scroll-chaining: none;\n      overscroll-behavior: contain;\n}\n\n.jHfK1c-Py0hqmZG0XqDnq {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  box-sizing: border-box;\n}\n","",{version:3,sources:["style.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,WAAW;EACX,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;EACtB,yBAA4B;MAA5B,4BAA4B;AAC9B;;AAEA;EACE,MAAM;EACN,SAAS;EACT,OAAO;EACP,QAAQ;EACR,YAAY;EACZ,sBAAsB;AACxB",file:"style.css",sourcesContent:[".root {\n  height: 100%;\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  box-sizing: border-box;\n  overscroll-behavior: contain;\n}\n\n.empty {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  box-sizing: border-box;\n}\n"]}]),t.locals={root:"_31xcV2AYAe7PQCE5go9tBW",empty:"jHfK1c-Py0hqmZG0XqDnq"},e.exports=t},,,,,,,function(e,t){e.exports=O},function(e,t,n){var r=n(14),s=n(262);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t){e.exports=S},function(e,t,n){var r=n(14),s=n(266);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t){var n,r,s=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var i,u=[],l=!1,d=-1;function p(){l&&i&&(l=!1,i.length?u=i.concat(u):d=-1,u.length&&f())}function f(){if(!l){var e=c(p);l=!0;for(var t=u.length;t;){for(i=u,u=[];++d<t;)i&&i[d].run();d=-1,t=u.length}i=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function A(e,t){this.fun=e,this.array=t}function g(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new A(e,t)),1!==u.length||l||c(f)},A.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){var r=n(57),s=n.n(r),a=n(16),o=n.n(a),c=n(17),i=n.n(c),u=n(18),l=n.n(u),d=n(6),p=n.n(d),f=n(19),A=n.n(f),g=n(20),h=n.n(g),E=n(11),m=n.n(E),b=n(0),v=n.n(b),_=n(201),O=n.n(_),S=n(202),y=n.n(S),x=n(203),C=n.n(x),M=n(204),j=n.n(M),I=n(1),w=n(2),T=n(205),B=n.n(T),R=n(97),k=n.n(R),P=n(206),D=n(51),N=n(207),q=n(208),F=n(108),L=n(112),G=n(113),U=n(231),W=n(53),Y=n(26),z=I.MessageTypes.MSG_TYPE_TEXT,H=I.MessageTypes.MSG_TYPE_WEBVIEW,V=I.MessageTypes.MSG_TYPE_NOTIFICATION,Q=I.MessageTypes.MSG_TYPE_RATE_CARDS,X=I.MessageTypes.MSG_TYPE_SHOPPING_CART,K=function(t){A()(r,t);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var s=m()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return h()(this,n)}}(r);function r(e){var t;return i()(this,r),(t=n.call(this,e)).keyMapper=t.keyMapper.bind(p()(t)),t.getListRef=t.getListRef.bind(p()(t)),t.scrollUpHandler=Object(I.memFn)(Y.f,10),t.handleWheel=t.handleWheel.bind(p()(t)),t.rowRenderer=t.rowRenderer.bind(p()(t)),t.handleScroll=t.handleScroll.bind(p()(t)),t.handleGoToBottom=t.handleGoToBottom.bind(p()(t)),t.handleRowsRender=t.handleRowsRender.bind(p()(t)),t.handleScrollToMessage=t.handleScrollToMessage.bind(p()(t)),t.addExposedMessageId=t.addExposedMessageId.bind(p()(t)),t.handleAutoSizerResized=t.handleAutoSizerResized.bind(p()(t)),t.handleConversationChanged=t.handleConversationChanged.bind(p()(t)),t.handleMsgListChanged=t.handleMsgListChanged.bind(p()(t)),t.handleMsgListLengthUnchange=t.handleMsgListLengthUnchange.bind(p()(t)),t.debounceMarkMessage=Object(I.debounce)(t.handleMarkMessage.bind(p()(t)),300),t.debounceFetchMoreMessage=Object(I.debounce)(t.fetchMoreMessage.bind(p()(t)),300),t.dobouceUpdateCurrentConversationCanRead=Object(I.debounce)(t.updateCurrentConversationCanRead.bind(p()(t)),100),t.containerProps={onWheel:t.handleWheel},t._cache=new j.a({fixedWidth:!0,keyMapper:t.keyMapper}),t.imgCache={},t.listNode=null,t.startIndex=0,t.stopIndex=0,t.scrollTop=0,t.targetMsgRow=0,t.targetRowInfo=null,t.exposedMessageIds=[],t.hasSourceMessageMap={},t.stickyScrollPosition=null,t.messageScrollDirection=null,t.state={firstUnreadMsgId:null,shouldRenderNewMessageTip:!1},t}return l()(r,[{key:"addExposedMessageId",value:function(e){this.exposedMessageIds.push(e)}},{key:"getListRef",value:function(e){this.listNode=e}},{key:"keyMapper",value:function(e){var t=this.props.messageList[e];return t&&t.id}},{key:"onMeasure",value:function(e,t){var n,r;t(),this.targetRowInfo&&Object(W.c)(this.targetRowInfo.range,e)&&(null===(n=this.listNode)||void 0===n||null===(r=n.scrollToRow)||void 0===r||r.call(n,this.targetRowInfo.index))}},{key:"cleanTargetRowInfo",value:function(){this.targetRowInfo=null}},{key:"componentDidMount",value:function(){this.onAppendMessage(),this.shouldScrollToBottom=!0,w.EventBus.on("scrollToMessage",this.handleScrollToMessage)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this,r=Object.keys(e),s=Object.keys(this.props);return r.length!==s.length||t.shouldRenderNewMessageTip!==this.state.shouldRenderNewMessageTip||t.firstUnreadMsgId!==this.state.firstUnreadMsgId||r.some((function(t){var r=e[t],s=n.props[t],a=!1;switch(t){case"currentConversation":a=r.id!==s.id;break;case"unreadMessageIds":a=!Object(Y.c)(r,s);break;case"messageList":a=!Object(Y.b)(r,s);break;default:a=r!==s}return a}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.conversationId,n=e.messageList,r=e.unreadMessageIds,s=this.props,a=s.conversationId,o=s.messageList,c=s.unreadMessageIds,i={};this.conversationChanged=t!==a,(this.conversationChanged||c.length&&!r.length)&&(i.shouldRenderNewMessageTip=!1),this.conversationChanged?(this.handleConversationChanged(),i.firstUnreadMsgId=Object(W.d)(n,r)):o.length!==n.length?this.handleMsgListChanged(e):this.handleMsgListLengthUnchange(e),Object(I.checkEmptyObject)(i)||this.setState(i)}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.messageList,n=e.unreadMessageIds;if(this.conversationChanged){this.conversationChanged=!1;var r=this.state.firstUnreadMsgId;if(r){var s=Object(W.e)(t,r),a=37*n.length>this.containerHeight?"start":"end";this.onAppendMessage({index:s,alignment:a})}else this.onAppendMessage()}else this.messageScrollDirection&&(1===this.messageScrollDirection?this.onAppendMessage():-1===this.messageScrollDirection&&this.onPrependMessage(),this.messageScrollDirection=null)}},{key:"componentWillUnmount",value:function(){w.EventBus.removeListener("scrollToMessage",this.handleScrollToMessage)}},{key:"handleAutoSizerResized",value:function(e){var t=e.height;this.shouldScrollToBottom&&t&&(this.shouldScrollToBottom=!1,this.onAppendMessage())}},{key:"handleScrollToMessage",value:function(e){var t,n,r=Object(W.e)(this.props.messageList,e);r>=0&&(this.targetMsgRow=r,null===(t=this.listNode)||void 0===t||null===(n=t.scrollToRow)||void 0===n||n.call(t,r))}},{key:"handleConversationChanged",value:function(){var e,t,n=this.props,r=n.messageList;(0,n.setCurrentConversationCanRead)({canRead:!0}),this.scrollTop=0,this.startIndex=0,this.stopIndex=0,this.cleanTargetRowInfo(),this.scrollUpHandler.reset(),this.hasSourceMessageMap={},this.shouldScrollToBottom=!0,null===(e=this.listNode)||void 0===e||null===(t=e.forceUpdateGrid)||void 0===t||t.call(e);var s=Object(W.e)(r,this.state.firstUnreadMsgId);s>-1&&this._cache.clear(s)}},{key:"handleMsgListLengthUnchange",value:function(e){var t,n,r=e.messageList,s=e.hasMoreOlderMessage,a=(e.unreadMessageIds,e.currentConversationCanRead,this.props),o=a.messageList,c=(a.unreadMessageIds,a.hasMoreOlderMessage);(Object(W.a)(o,r,this.startIndex,this.stopIndex)||c&&!s)&&(null===(t=this.listNode)||void 0===t||null===(n=t.forceUpdateGrid)||void 0===n||n.call(t));var i=Object(Y.d)(r),u=Object(Y.d)(o);if(i&&u){var l=i.type,d=i.request_id,p=i.errorCode,f=i.message_option,A=i.textContent,g=i.send_status,h=u.request_id,E=u.retryRequestId,m=u.errorCode,b=u.message_option,v=u.send_status,_=u.textContent;switch(l){case z:d!==h&&d!==E||!(g!==v||p!==m&&p===I.MessageErrorCode.BLACKLIST||f!==b&&0!==f)||(this.messageScrollDirection=1);break;case X:!_&&A&&(this.messageScrollDirection=1)}}}},{key:"handleMsgListChanged",value:function(e){var t=this.props.messageList,n=e.currentConversation,r=e.messageList,s=e.unreadMessageIds,a=e.currentConversationCanRead,o=t.length,c=r.length,i=Object(Y.d)(r),u=i&&Object(I.getMessageIsSend)(i,n),l=!0,d=Object(Y.e)(r,s);(a||!s.length||u||this.stopIndex>=d)&&(l=!1),this.setState({shouldRenderNewMessageTip:l}),Object(W.b)(r,t)?!u&&o&&o-1!==this.stopIndex||(this.cleanTargetRowInfo(),this.messageScrollDirection=1,this.onAppendMessage()):(this.cleanTargetRowInfo(),this.stickyScrollPosition={index:this.startIndex+c-o,stickyScrollTop:this.scrollTop},this.messageScrollDirection=-1)}},{key:"handleWheel",value:function(e){this.targetRowInfo&&e.deltaY<0&&this.cleanTargetRowInfo()}},{key:"handleMarkMessage",value:function(){var e=this.props.unreadMessageIds.length;if(e){var t=this.props,n=t.showChatWindow,r=t.showConversationDetail,s=t.messageList,a=t.unreadMessageIds,o=t.markMessagesRequested,c=t.currentConversation,i=c.status,u=c.id,l=a[e-1],d=Object(W.e)(s,l);n&&r&&"closed"!==i&&this.stopIndex>=d&&o({isRead:!0,conversationId:u,latestMessageId:l})}}},{key:"onAppendMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,n=void 0===t?"end":t,r=e.index,s=void 0===r?null:r,a=this.props,o=a.inScrollToMessage,c=a.messageList;if(!o&&c.length){var i,u,l,d,p,f,A=null,g=s||c.length-1,h="end"===n;h?this.targetRowInfo={index:g,range:[this.startIndex,g]}:A=null===(i=this.listNode)||void 0===i||null===(u=i.getOffsetForRow)||void 0===u?void 0:u.call(i,{index:g,alignment:n}),h?null===(l=this.listNode)||void 0===l||null===(d=l.scrollToRow)||void 0===d||d.call(l,g<0?0:g):null===(p=this.listNode)||void 0===p||null===(f=p.scrollToPosition)||void 0===f||f.call(p,A)}}},{key:"onPrependMessage",value:function(){var e,t,n,r,s=this.stickyScrollPosition||{},a=s.index,o=s.stickyScrollTop,c=(null===(e=this.listNode)||void 0===e||null===(t=e.getOffsetForRow)||void 0===t?void 0:t.call(e,{index:a,alignment:"start"}))||0;null===(n=this.listNode)||void 0===n||null===(r=n.scrollToPosition)||void 0===r||r.call(n,c+o)}},{key:"handleGoToBottom",value:function(){var e=this.props,t=e.conversationId,n=e.inScrollToMessage,r=e.fetchRequested,s=e.deleteConversationMessageHash,a=e.setInScrollToMessage,o=e.currentConversation;n?(n&&a({inScrollToMessage:!1}),t&&s({conversationId:t}),r({conversation:o,needReset:!0}),this.shouldScrollToBottom=!0):this.onAppendMessage()}},{key:"fetchMoreMessage",value:function(e){var t=this.props,n=t.messageList,r=t.fetchRequested,s=t.conversationId;n.length&&r({direction:e,conversationId:s})}},{key:"updateCurrentConversationCanRead",value:function(e){var t=this.props,n=t.currentConversationCanRead,r=t.setCurrentConversationCanRead;e!==n&&r({canRead:e})}},{key:"handleScroll",value:function(e){var t=e.clientHeight,n=e.scrollHeight,r=e.scrollTop,s=this.props,a=s.messageList,o=s.inScrollToMessage,c=s.hasMoreOlderMessage,i=s.hasMoreLatestMessage,u=s.handleComponentScroll;if(n>0&&(this.targetRowInfo&&this.scrollUpHandler.check(this.scrollTop,r)&&this.cleanTargetRowInfo(),this.scrollTop>r?(u("up"),!1!==c&&r<200&&0!==t&&this.debounceFetchMoreMessage("older")):(u("down"),o&&i&&r>n-t-30&&this.debounceFetchMoreMessage("latest"))),this.stopIndex>0){var l,d=a.length,p=r>0?n-r-t<=60||(null===(l=this.targetRowInfo)||void 0===l?void 0:l.index)===d-1:!(d>0)||this.stopIndex>=d-1;this.dobouceUpdateCurrentConversationCanRead(p)}this.scrollTop=r}},{key:"handleRowsRender",value:function(e){var t,n,r=e.startIndex,s=e.stopIndex;this.startIndex=r,this.stopIndex=s,this.debounceMarkMessage(),this.targetRowInfo&&Object(W.c)(this.targetRowInfo.range,r)?this.targetRowInfo.range=[r,this.targetRowInfo.range[1]]:this.cleanTargetRowInfo(),this.targetMsgRow>0&&(null===(t=this.listNode)||void 0===t||null===(n=t.scrollToRow)||void 0===n||n.call(t,this.targetMsgRow),this.targetMsgRow=null)}},{key:"rowRenderer",value:function(e){var t=this,n=e.index,r=(e.key,e.parent),s=e.style,a=this.props.messageList[n];if(!a)return null;var o=this.props,c=o.shop,i=o.isScChat,u=o.currentUser,l=o.isSubAccount,d=o.messageList,p=o.hasMoreOlderMessage,f=o.resendMessageRequested,A=o.fillMessageRequested,g=o.cancelSendingMessageRequested,h=o.showWarningMessageIds,E=o.conversationId,m=o.conversationShopId,b=o.conversationBuyerId,_=o.conversationStatus,O=o.messagesFillStatusMap,S=o.currentFaqSessionInfo,y=d[n-1]||{},x=y.type,M=y.to_id,j=y.content,w=void 0===j?{}:j,T=y.created_timestamp,B=a.type,R=a.content,k=void 0===R?{}:R,P=a.to_id,D=a.id,N=a.created_timestamp,q=Object(L.a)(B),U=O[D],W=O["source-".concat(D)];B===H&&(k.type===Q?P===u.id?q=G.a:(q=F.a,U=null,W=null):(U=null,W=null));var Y=x===V||Object(I.getMessageIsRatecard)(x,w)&&(u.id!==M||l),z=1e3*N,X=1e3*T,K=z&&!X||z-X>3e5||0===n&&!p?Object(I.customizeTime)(z):null;return v.a.createElement(C.a,{key:D,parent:r,rowIndex:n,columnIndex:0,cache:this._cache},(function(e){var r=e.measure;return v.a.createElement(q,{index:n,style:s,shop:c,message:a,measure:function(){return t.onMeasure(n,r)},timeFlag:K,isScChat:i,isSubAccount:l,isLastMessage:n===d.length-1,newMessageFlag:D===t.state.firstUnreadMsgId,isLastSystemMessage:Y,hasSourceMessageMap:t.hasSourceMessageMap,resendMessageRequested:f,fillMessageRequested:A,addExposedMessageId:t.addExposedMessageId,exposedMessageIds:t.exposedMessageIds,cancelSendingMessageRequested:g,showWarningMessageIds:h,conversationId:E,conversationShopId:m,conversationBuyerId:b,conversationStatus:_,messageFillStatus:U,messageSourceFillStatus:W,currentFaqSessionInfo:S})}))}},{key:"render",value:function(){var t=this,n=this.props,r=n.locale,s=n.isScChat,a=n.messageList,c=void 0===a?[]:a,i=n.unreadMessageIds,u=void 0===i?[]:i,l=n.currentConversation,d=n.translateTips,p=n.updateTranslateTips,f=n.shopTranslationSettings,A=n.messagesFillStatusMap,g=n.currentConversationTranslationAccess,h=n.currentConversationCanRead,E=n.toBottomHasConflict,m=l.status,b=l.shop_id,_=l.to_name,S=l.to_id,x=l.latest_message_from_id,C=c.filter((function(e){return u.includes(e.id)})),M=C.length?C[C.length-1]:null,j=c.length||1,w=S!==x,T=(M||{}).content,R=(void 0===T?{}:T).translation,F=(R=void 0===R?{}:R).text,L=(f[b]||{}).autoTranslationStatus===I.SwitchStatus.ENABLED,G=Object(I.handleDisplayTranslation)(L,w,F,s,g),U=(!d[b]||"closed"!==d[b])&&(L||g),W=e("auto_translation.".concat(L?"":"buyer.","suggestion")),Y="closed"===m;return v.a.createElement("div",{className:k.a.messageSection,id:"messageSection"},U&&v.a.createElement(P.a,{translationTips:W,currentConversation:l,updateTranslateTips:p}),v.a.createElement(y.a,{onResize:this.handleAutoSizerResized},(function(e){var n=e.width,r=e.height;return v.a.createElement(N.a,null,v.a.createElement(D.a.Provider,{value:t.imgCache},v.a.createElement(O.a,{width:n,height:r,ref:t.getListRef,rowCount:j,rowHeight:t._cache.rowHeight,className:k.a.grid,containerProps:t.containerProps,containerStyle:{},estimatedRowSize:37,overscanRowCount:10,deferredMeasurementCache:t._cache,onScroll:t.handleScroll,rowRenderer:t.rowRenderer,onRowsRendered:t.handleRowsRender,differProp:A})))})),v.a.createElement("div",{className:k.a.layers},!E&&!h&&v.a.createElement("div",{id:"toBottomButton",className:k.a.iconWrapper,onClick:this.handleGoToBottom},v.a.createElement(o.a,{svg:B.a})),this.state.shouldRenderNewMessageTip&&!Y&&v.a.createElement(q.a,{locale:r,shopId:b,username:_,message:M||{},onClick:this.handleGoToBottom,enableTranslation:G})))}}]),r}(v.a.Component);t.a=s()(K,{dataKey:"messageList",penddingController:function(e,t,n){return!t||n!==I.DataFetchStatus.INIT_PENDING},scrollController:U.a})}).call(this,n(21).t)},function(e,t){e.exports=y},function(e,t){e.exports=x},function(e,t){e.exports=C},function(e,t){e.exports=M},function(e,t){e.exports=j},function(e,t,n){"use strict";var r=n(17),s=n.n(r),a=n(18),o=n.n(a),c=n(6),i=n.n(c),u=n(19),l=n.n(u),d=n(20),p=n.n(d),f=n(11),A=n.n(f),g=n(0),h=n.n(g),E=n(44),m=function(e){l()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var s=A()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return s()(this,n),(r=t.call(this,e)).handleClose=r.handleClose.bind(i()(r)),r}return o()(n,[{key:"handleClose",value:function(){var e=this.props,t=e.currentConversation;(0,e.updateTranslateTips)({shopId:t.shop_id,flag:"closed"})}},{key:"render",value:function(){var e=this.props.translationTips;return h.a.createElement(E.Alert,{isBar:!0,showIcon:!0,closeable:!0,content:e,onClose:this.handleClose,needFloat:!0})}}]),n}(h.a.PureComponent);t.a=m},function(e,t,n){"use strict";var r=n(2),s=n(8),a=(n(260),n(7)),o={closeMediaPreview:r.closeChatbotMediaPreview};t.a=Object(s.connect)((function(e){return{imageUrl:Object(r.chatbotImageSelector)(e)}}),o)(a.ChatbotProvider)},function(e,n,r){"use strict";var s=r(16),a=r.n(s),o=r(17),c=r.n(o),i=r(18),u=r.n(i),l=r(19),d=r.n(l),p=r(20),f=r.n(p),A=r(11),g=r.n(A),h=r(0),E=r.n(h),m=r(1),b=r(209),v=r.n(b),_=r(115),O=r.n(_),S=function(e){d()(r,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var s=g()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return f()(this,n)}}(r);function r(){return c()(this,r),n.apply(this,arguments)}return u()(r,[{key:"componentDidMount",value:function(){var e=this.props,n=e.message,r=e.shopId,s=n.id,a=n.conversation_id;t({operation:m.TrackerOperation.IMPRESSION,trackerName:"impressionOrClickUnreadBriefMessage",data:{message_id:s,conversation_id:a},shopId:r})}},{key:"render",value:function(){var e=this.props,n=e.username,r=e.message,s=e.onClick,o=e.shopId,c=e.enableTranslation,i=e.locale,u=r.id,l=r.conversation_id;return E.a.createElement("div",{className:O.a.root,onClick:function(){t({trackerName:"impressionOrClickUnreadBriefMessage",data:{message_id:u,conversation_id:l},shopId:o}),s&&s()}},E.a.createElement("div",{className:O.a.newMessage},n,": ",Object(m.previewMessage)(r,c,!0,i)),E.a.createElement(a.a,{svg:v.a,className:O.a.newMessageArrow}))}}]),r}(E.a.PureComponent);n.a=S},function(e,t){e.exports=I},function(e,t){e.exports=w},function(e,t){e.exports=T},function(e,t,n){"use strict";(function(e){var r=n(40),s=n.n(r),a=n(16),o=n.n(a),c=n(0),i=n.n(c),u=n(8),l=n(2),d=n(1),p=n(44),f=n(7),A=n(213),g=n(214),h=n.n(g),E=n(215),m=n.n(E),b=n(117),v=n.n(b),_=d.MessageTypes.MSG_TYPE_OFFER;t.a=Object(u.connect)((function(e){return{currentConversationToName:Object(l.currentConversationToNameSelector)(e)}}),{})((function(t){var n=t.message;if(!n)return i.a.createElement(i.a.Fragment,null);var r,a=t.currentConversationToName,c=t.buyerId,u=t.shop,l=n.type,g=n.textContent,E=n.to_id,b=n.errorCode,O=n.message_option,S=E===c;if(l===_&&g){var y=g.buyer_id===c,x=g.status,C=function(t,n){if([d.OfferStatus.ACCEPTED,d.OfferStatus.REJECTED].includes(t)){var r=t.slice(0,t.length-2);return n?S?null:e("conversation_detail.message_list.".concat(r,"_offer")):S?e("conversation_detail.message_list.".concat(r,"_offer_user"),{username:a}):null}if(d.OfferStatus.CANCELLED)return n?e("conversation_detail.message_list.cancel_offer",{username:a}):e("conversation_detail.message_list.cancel_offer_self")}(x,y);switch(x){case d.OfferStatus.ACCEPTED:C&&(r=i.a.createElement(p.Alert,{content:C,type:d.AlertType.normal,showIcon:!0,icon:i.a.createElement(o.a,{className:v.a.successIcon,svg:m.a})}));break;case d.OfferStatus.REJECTED:case d.OfferStatus.CANCELLED:C&&(r=i.a.createElement(p.Alert,{content:C,type:d.AlertType.normal}))}}var M={showIcon:!0,icon:i.a.createElement(o.a,{className:v.a.warnIcon,svg:h.a}),type:d.AlertType.normal};if(b===d.MessageErrorCode.FORBIDDEN)r=i.a.createElement(p.Alert,s()({content:e("conversation_detail.message_list.error_message_blocked",{username:a})},M));else if(b===d.MessageErrorCode.BLACKLIST)r=i.a.createElement(p.Alert,s()({content:i.a.createElement(f.BlacklistHint,null)},M));else if(b===d.MessageErrorCode.UNVERIFIED_PHONE_NUMBER)r=i.a.createElement(p.Alert,s()({content:e("conversation_detail.message_list.unverified_phone_number")},M));else if(S&&(Object(d.hasTargetMessageOption)(O,d.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)||Object(d.hasTargetMessageOption)(O,d.MessageOption.MSG_OPT_CANCELORDER_WARNING_SENT))){var j=u&&u.country?u.country.toLowerCase():"sg";r=i.a.createElement(p.Alert,s()({content:i.a.createElement(A.a,{code:O,region:j})},M))}return r?i.a.createElement("span",{className:v.a.metaContent},r):i.a.createElement(i.a.Fragment,null)}))}).call(this,n(21).t)},function(e,t,n){"use strict";(function(e){var r=n(0),s=n.n(r),a=n(149),o=n.n(a),c=n(1);t.a=function(t){var n=t.code,a=Object(r.useRef)(null),i=function(){var e=t.region;window.open("".concat(c.cancelOrderPolicy[e]||c.cancelOrderPolicy.sg))};Object(r.useEffect)((function(){if(a&&a.current){var e=a.current.firstElementChild;if(e)return e.className=o.a.policy,e.addEventListener("click",i),function(){e.removeEventListener("click",i)}}}),[a]);var u=Object(c.hasTargetMessageOption)(n,c.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND),l=Object(c.hasTargetMessageOption)(n,c.MessageOption.MSG_OPT_CANCELORDER_WARNING_SENT);if(!u&&!l)return null;var d=u?e("cancel_order.meta.not_send"):l?e("cancel_order.meta.send_it"):"";return s.a.createElement("span",{ref:a,className:o.a.root,dangerouslySetInnerHTML:{__html:d}})}}).call(this,n(21).t)},function(e,t){e.exports=B},function(e,t){e.exports=R},function(e,t,n){"use strict";(function(e){var r=n(0),s=n.n(r),a=n(98),o=n.n(a),c=s.a.memo((function(){return s.a.createElement("div",{className:o.a.newMessageTip},s.a.createElement("span",{className:o.a.prevLine}),s.a.createElement("span",{className:o.a.newMessageContent},e("conversation_detail.message_list.unread_messages")),s.a.createElement("span",{className:o.a.postLine}))}));t.a=c}).call(this,n(21).t)},function(e,t,n){"use strict";(function(e){var r=n(56),s=n.n(r),a=n(16),o=n.n(a),c=n(0),i=n.n(c),u=n(99),l=n.n(u),d=n(1),p=n(150),f=n.n(p),A=i.a.memo((function(t){var n=t.message,r=t.resendMessage,a=n.send_status,c=n.errorCode,u=n.message_option,p=a===d.MessageSendStatus.FAILED,A=c===d.MessageErrorCode.BLACKLIST,g=Object(d.hasTargetMessageOption)(u,d.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND),h=i.a.createElement("div",{className:l.a.iconWrap},i.a.createElement(o.a,{svg:f.a,className:l.a.iconBase}));return p?A?h:i.a.createElement("div",{className:l.a.iconWrap},i.a.createElement(s.a,{content:e("conversation_detail.message_list.resend")},i.a.createElement(o.a,{svg:f.a,className:l.a.icon,onClick:r}))):g?h:i.a.createElement(i.a.Fragment,null)}));A.displayName="ErrorContent",t.a=A}).call(this,n(21).t)},function(e,t,n){"use strict";(function(e){var r=n(56),s=n.n(r),a=n(16),o=n.n(a),c=n(0),i=n.n(c),u=n(151),l=n.n(u),d=n(7),p=n(1),f=n(219),A=n.n(f),g=n(2),h=n(8),E=p.MessageTypes.MSG_TYPE_VIDEO,m=p.MessageTypes.MSG_TYPE_IMAGE,b=p.MessageTypes.MSG_TYPE_STICKER,v=i.a.memo((function(t){var n=t.type,r=t.status,a=t.videoUploaded,c=t.handleCancelMessage;return r===p.MessageSendStatus.SENDING?i.a.createElement("div",{className:l.a.sendingWrap},n!==E||a?[m,b].includes(n)?null:i.a.createElement(d.LoadingSpin,{theme:"dark"}):i.a.createElement(s.a,{content:e("common.cancel")},i.a.createElement(o.a,{svg:A.a,className:l.a.icon,onClick:c}))):null}));t.a=Object(h.connect)((function(e,t){var n=!1;return t.type===E&&(n="successful"===(Object(g.selectVideoInfoByKey)(t.requestId)(e)||{}).status),{videoUploaded:n}}),{})(v)}).call(this,n(21).t)},function(e,t){e.exports=k},function(e,n,r){"use strict";(function(e){var s=r(16),a=r.n(s),o=r(0),c=r.n(o),i=r(8),u=r(65),l=r.n(u),d=r(45),p=r.n(d),f=r(110),A=r(7),g=r(2),h=r(1),E=r(222),m=r.n(E),b=r(223),v=r.n(b),_=r(224),O=r.n(_),S=r(225),y=r.n(S),x=r(226),C=r.n(x),M=r(227),j=r.n(M),I={unpaid:v.a,to_ship:O.a,shipping:y.a,completed:C.a,cancelled:j.a,refund:m.a},w=function(n){var r=n.content,s=n.isSendByMe,o=n.currentUserShopId,i=n.isSubAccount,u=n.isScChat,d=n.buyerShopId,g=n.shopId,E=n.messageId,m=n.hasAccess,b=n.showSentLink,v=n.conversationId,_=n.visitShopSellerCenterRequested,O="";i||(O="https://".concat(Object(h.getSellerCenterUrl)(),"/portal/sale/").concat(r.id));var S=Object(h.getMallOrderUrl)(r,s?d:o),y=r.id,x=r.status,C=r.image,M=r.image_hash,j=r.products_count,w=r.local_payment,T=e(Object(h.getOrderStatusTransifyKey)(x)),B=e("conversation_detail.message_list.order_total_price",{orderTotalPrice:w}),R=e(Object(h.formatTransifyKeyWithNumber)("conversation_detail.message_list.order_product_count",j),{orderProductCount:j});return c.a.createElement("div",{className:p.a.root,onClick:function(){t({shopId:g,trackerName:"clickVisitOrderInSellerCenter",data:{order_id:y,message_id:E,conversation_id:v}}),u?Object(h.redirectionWithAccess)({access:m,isSubAccount:i,action:function(){return _({shopId:g,orderId:y})},url:O}):window.open(S)},style:{cursor:m?"pointer":"default"}},c.a.createElement("div",{className:p.a.detailBlock},c.a.createElement(A.ProductImage,{src:C,hash:M}),c.a.createElement("div",{className:p.a.content},c.a.createElement("div",{className:l.a.orderStatus},c.a.createElement(a.a,{svg:I[x],className:"".concat(l.a.statusIcon," ").concat(l.a[x])}),c.a.createElement("div",{className:l.a.statusText,title:T},T)),c.a.createElement("div",{className:l.a.detail},c.a.createElement("div",{className:l.a.payment,title:B},B),c.a.createElement("div",{className:p.a.divider}),c.a.createElement("div",{className:l.a.sourceCount,title:R},R)))),c.a.createElement(f.a,{type:"order",showSentLink:b}))};w.displayName="OrderMessageSource",n.a=Object(i.connect)((function(e){return{buyerShopId:Object(g.currentBuyerShopIdSelector)(e),currentUserShopId:Object(g.currentUserShopIdSelector)(e)}}),null)(w)}).call(this,r(21).t)},function(e,t){e.exports=P},function(e,t){e.exports=D},function(e,t){e.exports=N},function(e,t){e.exports=q},function(e,t){e.exports=F},function(e,t){e.exports=L},function(e,t){e.exports=G},function(e,n,r){"use strict";(function(e){var s=r(0),a=r.n(s),o=r(30),c=r.n(o),i=r(66),u=r.n(i),l=r(45),d=r.n(l),p=r(110),f=r(7),A=r(1),g=A.ProductStatusUsingNumber.DELETED,h=A.ProductStatusUsingNumber.BANNED,E=A.ProductStatusUsingNumber.SOLD_OUT,m=A.ProductStatusUsingNumber.NORMAL,b=A.ProductStatusUsingNumber.DELISTED,v=[g,h,E,b],_=a.a.memo((function(n){var r=n.content,s=n.isSubAccount,o=n.isScChat,i=n.messageId,l=n.hasAccess,h=n.showSentLink,E=n.conversationId,b=n.visitShopSellerCenterRequested,_=r.id,O=r.status,S=r.shop_id,y=r.region,x=r.name,C=r.image,M=r.image_hash,j=r.original_price,I=r.actual_price,w=r.stock,T=O===g,B=s?"":"https://".concat(Object(A.getSellerCenterUrl)(),"/portal/product/").concat(_),R="https://".concat(Object(A.getMallUrl)(y),"/product/").concat(S,"/").concat(_),k=Object(A.getProductStatusTransifyKey)(O),P=O===m?e(Object(A.formatTransifyKeyWithNumber)(k,w),{productStock:w}):e(k),D=c()(u.a.status,[m,g].includes(O)?u.a[O]:u.a.invalid);return a.a.createElement("div",{className:d.a.root,onClick:function(){T||(t({shopId:S,trackerName:"clickVisitProductInSellerCenter",data:{product_id:_,message_id:i,conversation_id:E}}),o?Object(A.redirectionWithAccess)({access:!!l,isSubAccount:s,action:function(){return b({shopId:S,itemId:_})},url:B}):window.open(R))},style:{cursor:l?"pointer":"default"}},a.a.createElement("div",{className:d.a.detailBlock},T?a.a.createElement(f.UnavailableProduct,{className:u.a.productDeleted}):a.a.createElement(a.a.Fragment,null,a.a.createElement(f.ProductImage,{src:C,hash:M,isProductInvalid:v.includes(O)}),a.a.createElement("div",{className:d.a.content},a.a.createElement("div",{className:d.a.productName,title:x},x),a.a.createElement("div",{className:c()(d.a.productDetail,j?u.a.origin:"")},j&&a.a.createElement("div",{title:j,className:u.a.originalPrice},j),a.a.createElement("div",{className:u.a.price,title:I},I),a.a.createElement("div",{className:d.a.divider}),a.a.createElement("div",{className:D,title:P},P))))),a.a.createElement(p.a,{type:"product",showSentLink:h}))}));_.displayName="ProductMessageSource",n.a=_}).call(this,r(21).t)},function(e,t,n){"use strict";(function(e){var r=n(0),s=n.n(r),a=n(30),o=n.n(a),c=n(234),i=n(235),u=n(1),l=n(68),d=n.n(l);t.a=function(t){var n=t.isSend,r=t.message,a=t.updateCurrentFaqId,l=t.conversationShopId,p=t.fetchFaqMessagesRequested,f=t.handleMessageIsSend,A=t.locale,g=r.id,h=r.content.messages,E=void 0===h?[]:h,m=r.textContent,b=(void 0===m?{messages:[]}:m).messages,v=(void 0===b?[]:b).filter((function(e){return"webview"!==e.type})).map((function(e){var t=function(e){return{username:e.from_user_name,content:Object(u.previewMessage)(e,!1,!1,A)}}(e),n=t.username,r=t.content;return s.a.createElement("div",{key:"faq-".concat(e.id),className:d.a.preview},"".concat(n,": ").concat(r))}));return s.a.createElement(c.a,{onClose:function(){return a({id:null})},title:e("conversation_list.conversation_cell.new_bundle_message_message"),className:d.a.container,label:s.a.createElement("div",{onClick:function(){return p({sourceId:g,shopId:l,reset:!0})},className:o()(d.a.root,n?d.a.send:d.a.receive)},s.a.createElement("div",{className:d.a.header},e("conversation_list.conversation_cell.new_bundle_message_message")),s.a.createElement("div",{style:{height:"".concat(18*(E.length>3?3:E.length),"px")}},v),s.a.createElement("div",{className:d.a.footer},e("faq_history.see_all")))},s.a.createElement(i.a,{fetchFaqMessagesRequested:p,handleMessageIsSend:f}))}}).call(this,n(21).t)},function(e,t){e.exports=U},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),s=function(e,t,n,s,a,o,c){var i=e!==t;i&&(c&&s===r.DataFetchStatus.FAILED&&c(),n(e));var u=o.current;u&&clearTimeout(u),o.current=setTimeout((function(){i&&!s.toLowerCase().includes("init")&&a(r.DataFetchStatus.SUCCEED)}),10)}},,,function(e,t,n){"use strict";var r=n(23),s=n.n(r),a=n(0),o=n.n(a),c=n(230),i=n.n(c),u=n(16),l=n.n(u),d=n(76),p=n.n(d),f=n(101),A=n.n(f),g=function(e){var t=e.title,n=e.closeModal,r=e.noCancel,s="".concat(A.a.root," ").concat(r?"":A.a.hasCancel);return o.a.createElement("div",{className:s},o.a.createElement("div",{className:A.a.title},t),!r&&o.a.createElement(l.a,{svg:p.a,className:A.a.cancel,onClick:n}))},h=n(120),E=n.n(h),m=function(e){var t,n=e.label,r=e.title,c=e.children,u=e.closeable,l=e.onClick,d=e.className,p=e.getModalVisible,f=e.onClose,A=Object(a.useState)(!1),h=s()(A,2),m=h[0],b=h[1],v=function(){var e=m;b(!e),"function"==typeof p&&p(!e),"function"==typeof f&&e&&f()};return t="#".concat(window.miniChatContainerId),o.a.createElement("div",{className:E.a.root},o.a.createElement("div",{onClick:function(e){return function(e){var t=function(){e.stopPropagation(),v()};"function"==typeof l?l(t):t()}(e)}},n),o.a.createElement(i.a,{isOpen:m,className:E.a.content,overlayClassName:E.a.overlay,shouldReturnFocusAfterClose:!1,onRequestClose:u?v:null,parentSelector:function(){return document.querySelector(t)}},o.a.createElement("div",{className:d},o.a.createElement(g,{title:r,closeModal:v}),c)))};m.defaultProps={closeable:!1},t.a=m},function(e,t,n){"use strict";var r=n(0),s=n.n(r),a=n(8),o=n(12),c=n(2),i=n(74),u=n(113),l=n(112),d=n(1),p=n(61),f=n.n(p),A=d.MessageTypes.MSG_TYPE_WEBVIEW,g=d.MessageTypes.MSG_TYPE_RATE_CARDS,h={},E=s.a.createContext({}),m=function(e){var t=e.isScChat,n=e.currentUser,a=e.isSubAccount,o=e.messageList,c=e.fillMessageRequested,p=e.messageHttpStatus,m=e.fetchFaqMessagesRequested,b=e.sourceId,v=e.shop,_=e.conversationId,O=e.conversationShopId,S=e.conversationBuyerId,y=e.conversationStatus,x=e.handleMessageIsSend,C=e.messagesFillStatusMap,M=e.currentFaqSessionInfo,j=function(){},I=Object(r.useRef)({});return s.a.createElement("div",{className:f.a.list},s.a.createElement(E.Provider,{value:I.current},s.a.createElement(i.a,{makeItem:function(e,r){if(e&&e.content){var o=e.id,i=e.type,p=e.content,E=void 0===p?{}:p,b=e.to_id,I=e.from_user_name,w=e.created_timestamp,T=b===S,B=Object(d.customizeTime)(1e3*w),R=Object(l.a)(i);return e.type===A&&E.type===g&&b===n.id&&(R=u.a),s.a.createElement("div",{key:o,className:f.a.baseMessage},function(e,t,n){var r=[s.a.createElement("span",{key:"name",className:f.a.username},e),s.a.createElement("span",{key:"split",className:f.a.split}),s.a.createElement("span",{key:"time",className:f.a.stamp},t)],a="".concat(f.a.header," ").concat(n?f.a.right:"");return s.a.createElement("div",{className:a},n?r.reverse():r)}(I,B,T),s.a.createElement(R,{className:f.a.message,index:r,shop:v,message:e,isScChat:t,newMessageFlag:!1,currentUser:n,isSubAccount:a,hasSourceMessageMap:h,fillMessageRequested:c,fetchFaqMessagesRequested:m,conversationId:_,conversationShopId:O,conversationBuyerId:S,conversationStatus:y,measure:j,replyOfferRequested:j,evaluationRequested:j,claimVoucherRequested:j,sendMessagesRequested:j,resendMessageRequested:j,translateMessagesRequested:j,messageFillStatus:C[o],handleMessageIsSend:x,isInFaqHistoryModal:!0,currentFaqSessionInfo:M}))}},listData:o,status:p,onLoadMore:function(){return m({sourceId:b,shopId:O})},onRefresh:function(){return m({sourceId:b,shopId:O,reset:!o.length})}})))},b={changeTranslateStatus:o.changeTranslateStatus,fillMessageRequested:o.fillMessageRequested};t.a=Object(a.connect)((function(e){return{sourceId:Object(c.faqIdSelector)(e),isScChat:Object(c.isScChatSelector)(e),translateTips:Object(c.tipsSelector)(e),isSubAccount:Object(c.isSubAccountSelector)(e),messageList:Object(c.faqHistoryMessagesSelector)(e),currentUser:Object(c.currentUserSelector)(e),messageHttpStatus:Object(c.faqHistoryhttpStatusSelector)(e),currentConversation:Object(c.currentConversationSelector)(e),conversationId:Object(c.currentConversationIdSelector)(e),conversationShopId:Object(c.currentConversationShopIdSelectors)(e),conversationBuyerId:Object(c.currentConversationBuyerIdSelectors)(e),conversationStatus:Object(c.currentConversationStatusSelectors)(e),shop:Object(c.currentConversationShopSelectors)(e),messagesFillStatusMap:Object(c.messageFillStatusMapSelector)(e),currentFaqSessionInfo:Object(c.currentFaqSessionInfoSelector)(e)}}),b)((function(e){return s.a.createElement(m,e)}))},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(t=n(15)(!0)).push([e.i,"._61IkPwaOcwo1jAenPujlR {\n  height: 100%;\n  flex-grow: 1;\n}\n\n._2sGXb6ehhJorlSpyRxDgoR {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n._23cvBXwOyu7fgpbeq6EbXs {\n  outline: 0 none;\n  -ms-scroll-chaining: none;\n      overscroll-behavior: contain;\n}\n\n.X2ZMp12tNJNZNYkr2vOtY {\n  position: absolute;\n  bottom: 40px;\n  right: 20px;\n  height: 36px;\n  cursor: pointer;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,OAAO;EACP,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,eAAe;EACf,yBAA4B;MAA5B,4BAA4B;AAC9B;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,YAAY;EACZ,eAAe;AACjB",file:"index.css",sourcesContent:[".message-section {\n  height: 100%;\n  flex-grow: 1;\n}\n\n.layers {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.grid {\n  outline: 0 none;\n  overscroll-behavior: contain;\n}\n\n.iconWrapper {\n  position: absolute;\n  bottom: 40px;\n  right: 20px;\n  height: 36px;\n  cursor: pointer;\n}\n"]}]),t.locals={"message-section":"_61IkPwaOcwo1jAenPujlR",messageSection:"_61IkPwaOcwo1jAenPujlR",layers:"_2sGXb6ehhJorlSpyRxDgoR",grid:"_23cvBXwOyu7fgpbeq6EbXs",iconWrapper:"X2ZMp12tNJNZNYkr2vOtY"},e.exports=t},function(e,t){e.exports=W},function(e,t,n){(t=n(15)(!0)).push([e.i,".CNKrzIWP-OkPpQbrM0-Oc {\n  left: 0;\n  bottom: 0;\n  color: #fff;\n  display: flex;\n  width: 100%;\n  padding: 8px;\n  font-size: 14px;\n  cursor: pointer;\n  align-items: center;\n  flex-direction: row;\n  box-sizing: border-box;\n  background-color: rgba(0, 0, 0, 0.4);\n}\n\n._2LEwxR8mP8Hv2694ScqODt {\n  line-height: 16px;\n  flex-grow: 1;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.mp1XuJKArBi6lSqIbY4gZ {\n  cursor: pointer;\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  flex-shrink: 0;\n  flex-grow: 0;\n  color: #fff;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,OAAO;EACP,SAAS;EACT,WAAW;EACX,aAAa;EACb,WAAW;EACX,YAAY;EACZ,eAAe;EACf,eAAe;EACf,mBAAmB;EACnB,mBAAmB;EACnB,sBAAsB;EACtB,oCAAoC;AACtC;;AAEA;EACE,iBAAiB;EACjB,YAAY;EACZ,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,eAAe;EACf,qBAAqB;EACrB,WAAW;EACX,YAAY;EACZ,cAAc;EACd,YAAY;EACZ,WAAW;AACb",file:"index.css",sourcesContent:[".root {\n  left: 0;\n  bottom: 0;\n  color: #fff;\n  display: flex;\n  width: 100%;\n  padding: 8px;\n  font-size: 14px;\n  cursor: pointer;\n  align-items: center;\n  flex-direction: row;\n  box-sizing: border-box;\n  background-color: rgba(0, 0, 0, 0.4);\n}\n\n.new-message {\n  line-height: 16px;\n  flex-grow: 1;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.new-message-arrow {\n  cursor: pointer;\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  flex-shrink: 0;\n  flex-grow: 0;\n  color: #fff;\n}\n"]}]),t.locals={root:"CNKrzIWP-OkPpQbrM0-Oc","new-message":"_2LEwxR8mP8Hv2694ScqODt",newMessage:"_2LEwxR8mP8Hv2694ScqODt","new-message-arrow":"mp1XuJKArBi6lSqIbY4gZ",newMessageArrow:"mp1XuJKArBi6lSqIbY4gZ"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,"._5wLVI4F5D56T_QINbHigx {\n  color: #2673dd;\n  cursor: pointer;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,cAAc;EACd,eAAe;AACjB",file:"index.css",sourcesContent:[".policy {\n  color: #2673dd;\n  cursor: pointer;\n}\n"]}]),t.locals={policy:"_5wLVI4F5D56T_QINbHigx"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,"._1h-PJarm5zOGfI4Kd7x5DV {\n  display: flex;\n  justify-content: center;\n  margin-top: 4px;\n}\n\n._3q08mydrgKxqLotXJ8as-0 {\n  width: 12px;\n  height: 14px;\n  margin-right: 6px;\n  vertical-align: middle;\n}\n\n._3sO9mEp57-R5MMKwt0gW-8 {\n  color: #eda500;\n}\n\n.kkVI0DaO88q3pdFrdKQ1C {\n  color: #30b566;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,uBAAuB;EACvB,eAAe;AACjB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,sBAAsB;AACxB;;AAEA;EAEE,cAAc;AAChB;;AAEA;EAEE,cAAc;AAChB",file:"index.css",sourcesContent:[".meta-content {\n  display: flex;\n  justify-content: center;\n  margin-top: 4px;\n}\n\n.icon {\n  width: 12px;\n  height: 14px;\n  margin-right: 6px;\n  vertical-align: middle;\n}\n\n.warn-icon {\n  composes: icon;\n  color: #eda500;\n}\n\n.success-icon {\n  composes: icon;\n  color: #30b566;\n}\n"]}]),t.locals={"meta-content":"_1h-PJarm5zOGfI4Kd7x5DV",metaContent:"_1h-PJarm5zOGfI4Kd7x5DV",icon:"_3q08mydrgKxqLotXJ8as-0","warn-icon":"_3sO9mEp57-R5MMKwt0gW-8 _3q08mydrgKxqLotXJ8as-0",warnIcon:"_3sO9mEp57-R5MMKwt0gW-8 _3q08mydrgKxqLotXJ8as-0","success-icon":"kkVI0DaO88q3pdFrdKQ1C _3q08mydrgKxqLotXJ8as-0",successIcon:"kkVI0DaO88q3pdFrdKQ1C _3q08mydrgKxqLotXJ8as-0"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,"._3Zuz4gS_09RAlIXs-A3_mD {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-top: 1em;\n  line-height: 1.5;\n  color: #bbb;\n  font-size: 12px;\n  text-align: center\n}\n._3Zuz4gS_09RAlIXs-A3_mD ._1rI3ImajL8yA946BPU7dMq {\n    margin: 0 1em;\n  }\n._3Zuz4gS_09RAlIXs-A3_mD ._3loxdyn6L6DBQ9VfS0cTt0 {\n    flex-grow: 1;\n    height: 1px;\n    background-color: #f0f0f0;\n  }\n._3Zuz4gS_09RAlIXs-A3_mD ._3RtylBfyYcKudVkKnM5yZL {\n    height: 1px;\n    flex-grow: 1;\n    background-color: #f0f0f0;\n  }\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,gBAAgB;EAChB,WAAW;EACX,eAAe;EACf;AAiBF;AAfE;IACE,aAAa;EACf;AAEA;IACE,YAAY;IACZ,WAAW;IACX,yBAAyB;EAC3B;AAEA;IACE,WAAW;IACX,YAAY;IACZ,yBAAyB;EAC3B",file:"index.css",sourcesContent:[".new-message-tip {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-top: 1em;\n  line-height: 1.5;\n  color: #bbb;\n  font-size: 12px;\n  text-align: center;\n\n  & .new-message-content {\n    margin: 0 1em;\n  }\n\n  & .prev-line {\n    flex-grow: 1;\n    height: 1px;\n    background-color: #f0f0f0;\n  }\n\n  & .post-line {\n    height: 1px;\n    flex-grow: 1;\n    background-color: #f0f0f0;\n  }\n}\n"]}]),t.locals={"new-message-tip":"_3Zuz4gS_09RAlIXs-A3_mD",newMessageTip:"_3Zuz4gS_09RAlIXs-A3_mD","new-message-content":"_1rI3ImajL8yA946BPU7dMq",newMessageContent:"_1rI3ImajL8yA946BPU7dMq","prev-line":"_3loxdyn6L6DBQ9VfS0cTt0",prevLine:"_3loxdyn6L6DBQ9VfS0cTt0","post-line":"_3RtylBfyYcKudVkKnM5yZL",postLine:"_3RtylBfyYcKudVkKnM5yZL"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,"._1OBdIbU3mbzAF_Wf2Y1dsb {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-right: 0.5em;\n  line-height: 0;\n}\n\n._3pPRsL_qAjGKA_rsOK0Dcr {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n._2P-7k3CcHlC1xVXT3w6ft {\n}\n\n._2P-7k3CcHlC1xVXT3w6ft:hover {\n    cursor: pointer;\n  }\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,mBAAmB;EACnB,mBAAmB;EACnB,cAAc;AAChB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,cAAc;EACd,cAAc;EACd,cAAc;AAChB;;AAEA;AAMA;;AAHE;IACE,eAAe;EACjB",file:"index.css",sourcesContent:[".icon-wrap {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-right: 0.5em;\n  line-height: 0;\n}\n\n.icon-base {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.icon {\n  composes: icon-base;\n\n  &:hover {\n    cursor: pointer;\n  }\n}\n"]}]),t.locals={"icon-wrap":"_1OBdIbU3mbzAF_Wf2Y1dsb",iconWrap:"_1OBdIbU3mbzAF_Wf2Y1dsb","icon-base":"_3pPRsL_qAjGKA_rsOK0Dcr",iconBase:"_3pPRsL_qAjGKA_rsOK0Dcr",icon:"_2P-7k3CcHlC1xVXT3w6ft _3pPRsL_qAjGKA_rsOK0Dcr"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,"._3XGhcShPisq9pcfbaAgkRZ {\n  margin-right: 0.5em;\n}\n\n._3yU4skyrFSHEIeWhoShPiP {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n._48E3pSpTGEtSNHGAjIImu {\n}\n\n._48E3pSpTGEtSNHGAjIImu:hover {\n    cursor: pointer;\n  }\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,cAAc;EACd,cAAc;EACd,cAAc;AAChB;;AAEA;AAMA;;AAHE;IACE,eAAe;EACjB",file:"index.css",sourcesContent:[".sending-wrap {\n  margin-right: 0.5em;\n}\n\n.icon-base {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.icon {\n  composes: icon-base;\n\n  &:hover {\n    cursor: pointer;\n  }\n}\n"]}]),t.locals={"sending-wrap":"_3XGhcShPisq9pcfbaAgkRZ",sendingWrap:"_3XGhcShPisq9pcfbaAgkRZ","icon-base":"_3yU4skyrFSHEIeWhoShPiP",iconBase:"_3yU4skyrFSHEIeWhoShPiP",icon:"_48E3pSpTGEtSNHGAjIImu _3yU4skyrFSHEIeWhoShPiP"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,".XDmo9IE35MNe8WisLWggN {\n  display: flex;\n  align-items: center;\n  margin-bottom: 2px;\n}\n\n._39HepnO1KPMCYNVKy7rNkT {\n  height: 0.875em;\n  width: 0.875em;\n  margin-right: 4px\n}\n\n._39HepnO1KPMCYNVKy7rNkT._23yCV6z_n_2OTSxbaYAiQa {\n    color: #f5a623;\n  }\n\n._39HepnO1KPMCYNVKy7rNkT._3aCxZMI7TNn69omQV7abgA {\n    color: #4185f4;\n  }\n\n._39HepnO1KPMCYNVKy7rNkT._23QVT7AQjjNvU9MEfj2YfQ {\n    color: #4185f4;\n  }\n\n._39HepnO1KPMCYNVKy7rNkT._2YJcuErDHH9esdgfczxkU9 {\n    color: #54cc77;\n  }\n\n._39HepnO1KPMCYNVKy7rNkT.JWsuVVAa_QXpxyxTL-BRL {\n    color: #888;\n  }\n\n._39HepnO1KPMCYNVKy7rNkT.z7KCZsqDxDrv3pvfVBow- {\n    color: #888;\n  }\n\n._2zQQZy5sgXw692lv_yT45O,\n._35XJWTzwovv_dWFzJP8p-l,\n._2dbU6vUXDuLezkX_BsWTY9 {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n._2zQQZy5sgXw692lv_yT45O {\n  color: #333;\n  font-weight: 700;\n  max-width: 102px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n._3QaTSSUDRyFw6sjLB6yVxv {\n  line-height: 16px;\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n}\n\n._35XJWTzwovv_dWFzJP8p-l {\n  display: inline-block;\n  color: #333;\n  max-width: 136px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.IDgMNDimWvakiUKgQ4iXg {\n  display: inline-block;\n  font-size: 12px;\n  max-width: 66px;\n  overflow: hidden;\n  margin-right: 4px;\n  color: #888;\n  text-overflow: ellipsis;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,cAAc;EACd;AAyBF;;AAvBE;IACE,cAAc;EAChB;;AAEA;IACE,cAAc;EAChB;;AAEA;IACE,cAAc;EAChB;;AAEA;IACE,cAAc;EAChB;;AAEA;IACE,WAAW;EACb;;AAEA;IACE,WAAW;EACb;;AAGF;;;EAGE,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,WAAW;EACX,gBAAgB;EAChB,gBAAgB;EAChB,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,iBAAiB;EACjB,aAAa;EACb,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;EACE,qBAAqB;EACrB,WAAW;EACX,gBAAgB;EAChB,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,qBAAqB;EACrB,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,iBAAiB;EACjB,WAAW;EACX,uBAAuB;AACzB",file:"index.css",sourcesContent:[".order-status {\n  display: flex;\n  align-items: center;\n  margin-bottom: 2px;\n}\n\n.status-icon {\n  height: 0.875em;\n  width: 0.875em;\n  margin-right: 4px;\n\n  &.unpaid {\n    color: #f5a623;\n  }\n\n  &.to_ship {\n    color: #4185f4;\n  }\n\n  &.shipping {\n    color: #4185f4;\n  }\n\n  &.completed {\n    color: #54cc77;\n  }\n\n  &.cancelled {\n    color: #888;\n  }\n\n  &.refund {\n    color: #888;\n  }\n}\n\n.status-text,\n.payment,\n.count {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.status-text {\n  color: #333;\n  font-weight: 700;\n  max-width: 102px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.detail {\n  line-height: 16px;\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n}\n\n.payment {\n  display: inline-block;\n  color: #333;\n  max-width: 136px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.source-count {\n  display: inline-block;\n  font-size: 12px;\n  max-width: 66px;\n  overflow: hidden;\n  margin-right: 4px;\n  color: #888;\n  text-overflow: ellipsis;\n}\n"]}]),t.locals={"order-status":"XDmo9IE35MNe8WisLWggN",orderStatus:"XDmo9IE35MNe8WisLWggN","status-icon":"_39HepnO1KPMCYNVKy7rNkT",statusIcon:"_39HepnO1KPMCYNVKy7rNkT",unpaid:"_23yCV6z_n_2OTSxbaYAiQa",to_ship:"_3aCxZMI7TNn69omQV7abgA",toShip:"_3aCxZMI7TNn69omQV7abgA",shipping:"_23QVT7AQjjNvU9MEfj2YfQ",completed:"_2YJcuErDHH9esdgfczxkU9",cancelled:"JWsuVVAa_QXpxyxTL-BRL",refund:"z7KCZsqDxDrv3pvfVBow-","status-text":"_2zQQZy5sgXw692lv_yT45O",statusText:"_2zQQZy5sgXw692lv_yT45O",payment:"_35XJWTzwovv_dWFzJP8p-l",count:"_2dbU6vUXDuLezkX_BsWTY9",detail:"_3QaTSSUDRyFw6sjLB6yVxv","source-count":"IDgMNDimWvakiUKgQ4iXg",sourceCount:"IDgMNDimWvakiUKgQ4iXg"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,"._3VyY5RtTBtr5emVYwKqGJ8 {\n  font-size: 16px;\n  width: calc(100% - 1em);\n  padding: 0.5em;\n  background-color: #f7f8fb;\n  height: 57px;\n  box-sizing: content-box;\n}\n\n.fAO56mDbWSZFIIE1TWbuV {\n  height: 2em;\n  width: 100%;\n  position: relative;\n}\n\n._1m51AjyP8DyeGCda1b0ypi {\n  height: 100%;\n  margin-left: 2em;\n  padding-left: 0.5em\n}\n\n._1m51AjyP8DyeGCda1b0ypi.k80CbJP0djiv1Cn0iK9GD {\n    display: flex;\n    align-items: center;\n  }\n\n._1z8UZNbMnpxKMDvG2vX5nQ {\n  font-size: 12px;\n  line-height: 15px;\n  color: #333;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n._1Z7mfUC3NQgU-AdXWMYjEb {\n  margin-bottom: 4px;\n}\n\n._2hia4TB2bwVdm5SWXkper {\n  padding-top: 2px;\n}\n\n._2GaCsPNFARNJ47FivUWYFF {\n  margin-top: 0.125em;\n}\n\n._1ssM8CeoISb5_YYf-vkWLw {\n  height: 10px;\n  padding-left: 4px;\n  border-left: 1px solid #ccc;\n  margin-left: 4px;\n}\n\n._3bO7xlxYaw0GS7nBLvP5LJ {\n  display: flex;\n  font-size: 12px;\n  white-space: nowrap;\n  align-items: center\n}\n\n._3bO7xlxYaw0GS7nBLvP5LJ ._1ssM8CeoISb5_YYf-vkWLw {\n    margin-left: 4px;\n    padding-left: 4px;\n  }\n","",{version:3,sources:["common.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,uBAAuB;EACvB,cAAc;EACd,yBAAyB;EACzB,YAAY;EACZ,uBAAuB;AACzB;;AAEA;EACE,WAAW;EACX,WAAW;EACX,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,gBAAgB;EAChB;AAMF;;AAJE;IACE,aAAa;IACb,mBAAmB;EACrB;;AAGF;EACE,eAAe;EACf,iBAAiB;EACjB,WAAW;EACX,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;AACzB;;AAEA;EAEE,kBAAkB;AACpB;;AAEA;EAEE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,2BAA2B;EAC3B,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,eAAe;EACf,mBAAmB;EACnB;AAMF;;AAJE;IACE,gBAAgB;IAChB,iBAAiB;EACnB",file:"common.css",sourcesContent:[".root {\n  font-size: 16px;\n  width: calc(100% - 1em);\n  padding: 0.5em;\n  background-color: #f7f8fb;\n  height: 57px;\n  box-sizing: content-box;\n}\n\n.detail-block {\n  height: 2em;\n  width: 100%;\n  position: relative;\n}\n\n.content {\n  height: 100%;\n  margin-left: 2em;\n  padding-left: 0.5em;\n\n  &.no-model {\n    display: flex;\n    align-items: center;\n  }\n}\n\n.name {\n  font-size: 12px;\n  line-height: 15px;\n  color: #333;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.product-name {\n  composes: name;\n  margin-bottom: 4px;\n}\n\n.order-name {\n  composes: name;\n  padding-top: 2px;\n}\n\n.order-detail {\n  margin-top: 0.125em;\n}\n\n.divider {\n  height: 10px;\n  padding-left: 4px;\n  border-left: 1px solid #ccc;\n  margin-left: 4px;\n}\n\n.product-detail {\n  display: flex;\n  font-size: 12px;\n  white-space: nowrap;\n  align-items: center;\n\n  & .divider {\n    margin-left: 4px;\n    padding-left: 4px;\n  }\n}\n"]}]),t.locals={root:"_3VyY5RtTBtr5emVYwKqGJ8","detail-block":"fAO56mDbWSZFIIE1TWbuV",detailBlock:"fAO56mDbWSZFIIE1TWbuV",content:"_1m51AjyP8DyeGCda1b0ypi","no-model":"k80CbJP0djiv1Cn0iK9GD",noModel:"k80CbJP0djiv1Cn0iK9GD",name:"_1z8UZNbMnpxKMDvG2vX5nQ","product-name":"_1Z7mfUC3NQgU-AdXWMYjEb _1z8UZNbMnpxKMDvG2vX5nQ",productName:"_1Z7mfUC3NQgU-AdXWMYjEb _1z8UZNbMnpxKMDvG2vX5nQ","order-name":"_2hia4TB2bwVdm5SWXkper _1z8UZNbMnpxKMDvG2vX5nQ",orderName:"_2hia4TB2bwVdm5SWXkper _1z8UZNbMnpxKMDvG2vX5nQ","order-detail":"_2GaCsPNFARNJ47FivUWYFF",orderDetail:"_2GaCsPNFARNJ47FivUWYFF",divider:"_1ssM8CeoISb5_YYf-vkWLw","product-detail":"_3bO7xlxYaw0GS7nBLvP5LJ",productDetail:"_3bO7xlxYaw0GS7nBLvP5LJ"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,"._30MNTcAgB2k4FyWtnh4uSy {\n  padding-top: 0.25em;\n  border-top: 1px dashed #f1f3f4;\n  display: flex;\n  margin-top: 0.5em;\n  justify-content: space-between;\n}\n\n._3PMq8nviWjl2Tse19eNXXm,\n._1dZtoUmRzxgaUft5UObpYI,\n._2ubLNbS4cIJT9QidNsE8Rd {\n  font-size: 12px;\n  line-height: 14px;\n  transform: scale(0.916);\n}\n\n._3PMq8nviWjl2Tse19eNXXm {\n  color: #555;\n}\n\n.-fTmm8Ohrw966bqR-s32i {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n._1dZtoUmRzxgaUft5UObpYI {\n  color: #888;\n  max-width: 120px;\n  white-space: nowrap;\n}\n\n._2ubLNbS4cIJT9QidNsE8Rd {\n  color: #395692;\n  cursor: pointer;\n  margin-left: 1.33em;\n}\n\n.Pj0j0l3omr59Y4zqzUDmA {\n  color: #ccc;\n  cursor: default;\n}\n\n.avbHaVJf6ZbUi7PvMZwEm {\n  display: flex;\n  align-items: center;\n  color: #888;\n  font-size: 11px;\n  transform: scale(0.9);\n}\n\n._3lHBphxrYJtHKjw9-ytpVb {\n  width: 10px;\n  height: 10px;\n  color: #888;\n  line-height: 12px;\n  margin-right: 4px;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,mBAAmB;EACnB,8BAA8B;EAC9B,aAAa;EACb,iBAAiB;EACjB,8BAA8B;AAChC;;AAEA;;;EAGE,eAAe;EACf,iBAAiB;EACjB,uBAAuB;AACzB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,yBAAyB;AAC3B;;AAEA;EACE,WAAW;EACX,gBAAgB;EAChB,mBAAmB;AACrB;;AAEA;EACE,cAAc;EACd,eAAe;EACf,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,WAAW;EACX,eAAe;EACf,qBAAqB;AACvB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,WAAW;EACX,iBAAiB;EACjB,iBAAiB;AACnB",file:"index.css",sourcesContent:[".root {\n  padding-top: 0.25em;\n  border-top: 1px dashed #f1f3f4;\n  display: flex;\n  margin-top: 0.5em;\n  justify-content: space-between;\n}\n\n.label,\n.status-text,\n.link {\n  font-size: 12px;\n  line-height: 14px;\n  transform: scale(0.916);\n}\n\n.label {\n  color: #555;\n}\n\n.actions {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.status-text {\n  color: #888;\n  max-width: 120px;\n  white-space: nowrap;\n}\n\n.link {\n  color: #395692;\n  cursor: pointer;\n  margin-left: 1.33em;\n}\n\n.no-access {\n  color: #ccc;\n  cursor: default;\n}\n\n.send-status {\n  display: flex;\n  align-items: center;\n  color: #888;\n  font-size: 11px;\n  transform: scale(0.9);\n}\n\n.link-arrow {\n  width: 10px;\n  height: 10px;\n  color: #888;\n  line-height: 12px;\n  margin-right: 4px;\n}\n"]}]),t.locals={root:"_30MNTcAgB2k4FyWtnh4uSy",label:"_3PMq8nviWjl2Tse19eNXXm","status-text":"_1dZtoUmRzxgaUft5UObpYI",statusText:"_1dZtoUmRzxgaUft5UObpYI",link:"_2ubLNbS4cIJT9QidNsE8Rd",actions:"-fTmm8Ohrw966bqR-s32i","no-access":"Pj0j0l3omr59Y4zqzUDmA",noAccess:"Pj0j0l3omr59Y4zqzUDmA","send-status":"avbHaVJf6ZbUi7PvMZwEm",sendStatus:"avbHaVJf6ZbUi7PvMZwEm","link-arrow":"_3lHBphxrYJtHKjw9-ytpVb",linkArrow:"_3lHBphxrYJtHKjw9-ytpVb"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,"._2pAfAdXvinKA8zBTFO5jNC {\n  color: #bbb;\n  margin-right: 4px;\n  max-width: 44px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  text-decoration: line-through;\n}\n\n._35BsFn6JEQ4l7A-_r8D-Dm {\n  color: #333;\n  max-width: 130px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n._2sJpfR-fDIZcstwmewxFqG {\n  font-size: 12px;\n  max-width: 72px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  transform: scale(0.91) translateX(-3px)\n}\n\n._2sJpfR-fDIZcstwmewxFqG._1McGJ_PtPzSc4cOVhKEKb- {\n    color: #888;\n  }\n\n._2sJpfR-fDIZcstwmewxFqG._1z-vF9TiXxfkt_co8CVVfD,\n  ._2sJpfR-fDIZcstwmewxFqG._8DpSxwGHbk8ECb-poR647 {\n    border-radius: 1px;\n    padding: 0 0.33em;\n  }\n\n._2sJpfR-fDIZcstwmewxFqG._1z-vF9TiXxfkt_co8CVVfD {\n    background-color: #fdecec;\n    color: #ef4747;\n  }\n\n._2sJpfR-fDIZcstwmewxFqG._8DpSxwGHbk8ECb-poR647 {\n    background-color: #e7e7e7;\n    color: #888;\n  }\n\n._24xnKvGy7n2RWgfCXXoaJm ._35BsFn6JEQ4l7A-_r8D-Dm {\n    max-width: 82px;\n  }\n\n._3kVa6hME7en6tZ0Bn_wlYx > div {\n    background:#F7F8FB;\n  }\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,iBAAiB;EACjB,eAAe;EACf,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;EACvB,6BAA6B;AAC/B;;AAEA;EACE,WAAW;EACX,gBAAgB;EAChB,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;EACvB;AAqBF;;AAnBE;IACE,WAAW;EACb;;AAEA;;IAEE,kBAAkB;IAClB,iBAAiB;EACnB;;AAEA;IACE,yBAAyB;IACzB,cAAc;EAChB;;AAEA;IACE,yBAAyB;IACzB,WAAW;EACb;;AAIA;IACE,eAAe;EACjB;;AAIA;IACE,kBAAkB;EACpB",file:"index.css",sourcesContent:[".original-price {\n  color: #bbb;\n  margin-right: 4px;\n  max-width: 44px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  text-decoration: line-through;\n}\n\n.price {\n  color: #333;\n  max-width: 130px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.status {\n  font-size: 12px;\n  max-width: 72px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  transform: scale(0.91) translateX(-3px);\n\n  &.normal {\n    color: #888;\n  }\n\n  &.invalid,\n  &.deleted {\n    border-radius: 1px;\n    padding: 0 0.33em;\n  }\n\n  &.invalid {\n    background-color: #fdecec;\n    color: #ef4747;\n  }\n\n  &.deleted {\n    background-color: #e7e7e7;\n    color: #888;\n  }\n}\n\n.origin {\n  & .price {\n    max-width: 82px;\n  }\n}\n\n.product-deleted {\n  & > div {\n    background:#F7F8FB;\n  }\n}\n"]}]),t.locals={"original-price":"_2pAfAdXvinKA8zBTFO5jNC",originalPrice:"_2pAfAdXvinKA8zBTFO5jNC",price:"_35BsFn6JEQ4l7A-_r8D-Dm",status:"_2sJpfR-fDIZcstwmewxFqG",normal:"_1McGJ_PtPzSc4cOVhKEKb-",invalid:"_1z-vF9TiXxfkt_co8CVVfD",deleted:"_8DpSxwGHbk8ECb-poR647",origin:"_24xnKvGy7n2RWgfCXXoaJm","product-deleted":"_3kVa6hME7en6tZ0Bn_wlYx",productDeleted:"_3kVa6hME7en6tZ0Bn_wlYx"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,".hIUzfpaVECkDIJLAUT8nQ {\n  box-sizing: border-box;\n  padding: 0 7.5px;\n}\n\n.iO_LmGZJlY5GQPtrLCqYA {\n  padding-bottom: 0.75em;\n}\n\n._3mU2lmG0OMgpVc1ILR5IIj {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n._1kXjVAWsG7Wpv7gjTen4dO {\n  align-items: center;\n  justify-content: flex-end;\n}\n\n._3i7qVUWGc_4XFFvwGuSjs {\n  justify-content: flex-start;\n}\n\n._1gSD02QgxKPVWzCL8H5HFX {\n  font-size: 12px;\n  margin-top: 12px;\n  line-height: 1.167em;\n  color: rgba(0, 0, 0, 0.4);\n  text-align: center;\n}\n\n.IPmaWbEyb3XJP81UoHa1X {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n._10NdzHgUq2t2h34mnkJYUk {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: row;\n}\n\n._19znMMOdpg_sjc3xP_X5mc {\n  position: relative;\n}\n\n._1qIaUEuhc5NIRCucR2SxcQ {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 0.75em;\n  flex-shrink: 0;\n}\n\n.UETBdTZGJjcRkr-epsTSU {\n  opacity: 0.6;\n  -webkit-filter: grayscale(50%);\n          filter: grayscale(50%);\n}\n\n.SLd4tyhTFjdOFDPaea5VH {\n  background-color: rgba(0, 0, 0, 0.6);\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 1.2em 1.2em;\n}\n\n._356u6qBl91x3AhxxLiPAHC {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease\n}\n\n._356u6qBl91x3AhxxLiPAHC:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n\n._1X-toVNEZ4Je3bmFQOkgev {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease\n}\n\n._1X-toVNEZ4Je3bmFQOkgev:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n\n._3OuqACWfFzF5fJj67xKjLa ._356u6qBl91x3AhxxLiPAHC:hover {\n    color: #555;\n    cursor: not-allowed;\n  }\n\n._22aPtuolP_b-r6xWDYesLO {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.24;\n  color: #333;\n  font-size: 14px;\n  font-weight: 500;\n  word-break: break-all;\n}\n\n.aQ2AzGIMlMyp8Af90Ry_7 {\n  margin-right: 0.25em;\n  position: relative;\n  color: #bbb\n}\n\n.aQ2AzGIMlMyp8Af90Ry_7::after {\n    content: '';\n    width: 100%;\n    height: 1px;\n    position: absolute;\n    left: 0;\n    top: 50%;\n    background-color: #bbb;\n  }\n\n._3_4WU1PfpfkSvjau4c885o {\n  margin-top: 0.5em;\n  line-height: 1.16;\n  color: #555;\n  font-size: 12px;\n}\n\n._9oDU3A3Hpv8zCxKSVucO7 {\n  margin-left: 0.5em;\n  color: #888;\n}\n\n._3vWueDaR1oqWg_9uQj5Bu3 {\n  font-size: 14px;\n  line-height: 1.36em;\n  color: #333;\n  display: flex;\n  align-items: center;\n}\n\n._1W9kkQHUmqXvAl5gnu2E2a {\n  color: #ff4742;\n}\n\n._95FFIz3GMqLSZsSyjL3p0 {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n._2VJTxxq1zDHPvdgFtynXcQ {\n  width: 2.25em;\n  height: 2.25em;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n._2MOKj1O3NhdC3XGC1PHHiU {\n  width: 100%;\n  height: 100%;\n}\n\n._3sVJ2x7tt7f9ox0PsE2qJ {\n  width: 2.25em;\n  flex-shrink: 0;\n}\n\n._3lFdhGA0mPqi-e22KMHVPn {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n._2j6LIO-m2B-zONTTMttHp1 {\n  flex-grow: 1;\n  overflow: hidden;\n}\n\n._27CywXexvaQLq5OwN8hVyl {\n  display: flex;\n  flex-direction: row;\n}\n\n.Oe4T3cTQbo4rnZzSd-rQd {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 1em;\n  flex-shrink: 0;\n}\n\n.HHnxRisfJdk1An5JIz2Y0 {\n  margin-bottom: 0.428em;\n}\n\n._2QEERxNkYoE0GLwuHEcWWK {\n  font-size: 14px;\n  color: #01bfa5;\n}\n\n._3Q7MX1PUFdtnzKLc3UdX9z {\n  margin: 0 0.428em;\n  color: rgba(136, 136, 136, 0.4);\n}\n\n._222nHElIK9k9niZwYrLu2T {\n  line-height: 1.142;\n  font-size: 14px;\n  color: #555;\n  font-weight: bold;\n}\n\n._2Z_8hAKzyLRNZazhpL4zsq {\n  line-height: 1.16em;\n  font-size: 12px;\n  color: #888;\n}\n\n.qECB0-PzoHjr-k6NJHDll {\n  margin-right: 1.333em;\n}\n\n._3H0-oXxxnRlyKLUYpPq0-R {\n  background-color: #f4f4f4;\n  font-size: 16px;\n  height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding-left: 0.75em;\n}\n\n._1zo0NC_PnWRIG4TcgizX5u {\n  height: 1em;\n  width: 1em;\n}\n\n.RkUm5cXsYvXWI-mFPi9_8 {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.42);\n  margin-left: 1em;\n}\n\n._3IpazX4jsFewcvd_xgdDaD {\n  font-size: 16px;\n  height: 3.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n._3CRjohg_9glx8EXdakoLi- {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n._34wG4_h5rLP4uSPWajJrCp {\n  height: 2.25em;\n  width: 2.25em;\n  margin: 0 0.75em\n}\n\n._34wG4_h5rLP4uSPWajJrCp > * {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n  }\n\n._34wG4_h5rLP4uSPWajJrCp > div {\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: bold;\n  }\n\n._2zuF5J9VpNTbrMmIHCBWcK {\n  font-size: 14px;\n  color: #555;\n}\n\n._1XkSwZoXiDI-Oyl5siW3qt {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  margin: 0 0.75em;\n}\n\n@-webkit-keyframes _2bHD5BSYqz1gXwqln93m-Y {\n  from {\n    transform: rotateZ(0);\n  }\n\n  to {\n    transform: rotateZ(360deg);\n  }\n}\n\n@keyframes _2bHD5BSYqz1gXwqln93m-Y {\n  from {\n    transform: rotateZ(0);\n  }\n\n  to {\n    transform: rotateZ(360deg);\n  }\n}\n\n._12HH49fG8dEWOGmO0gNpQ2 {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n\n._1T0GTHcs44T0oqc9gfk3pA {\n  padding: 0.667em 0.857em;\n  font-size: 14px;\n  line-height: 1.143em;\n  border-radius: 2px;\n  background-color: #d7e4ff;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,gBAAgB;AAClB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EAEE,mBAAmB;EACnB,yBAAyB;AAC3B;;AAEA;EAEE,2BAA2B;AAC7B;;AAEA;EACE,eAAe;EACf,gBAAgB;EAChB,oBAAoB;EACpB,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,oBAAoB;EACpB,cAAc;AAChB;;AAEA;EACE,YAAY;EACZ,8BAAsB;UAAtB,sBAAsB;AACxB;;AAEA;EACE,oCAAoC;EACpC,4BAA4B;EAC5B,2BAA2B;EAC3B,4BAA4B;AAC9B;;AAEA;EACE,WAAW;EACX,eAAe;EACf,cAAc;EACd,qBAAqB;EACrB;AAMF;;AAJE;IACE,cAAc;IACd,eAAe;EACjB;;AAGF;EACE,WAAW;EACX,eAAe;EACf,cAAc;EACd,qBAAqB;EACrB;AAMF;;AAJE;IACE,cAAc;IACd,eAAe;EACjB;;AAIA;IACE,WAAW;IACX,mBAAmB;EACrB;;AAGF;EACE,gBAAgB;EAChB,uBAAuB;EACvB,iBAAiB;EACjB,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,qBAAqB;AACvB;;AAEA;EACE,oBAAoB;EACpB,kBAAkB;EAClB;AAWF;;AATE;IACE,WAAW;IACX,WAAW;IACX,WAAW;IACX,kBAAkB;IAClB,OAAO;IACP,QAAQ;IACR,sBAAsB;EACxB;;AAGF;EACE,iBAAiB;EACjB,iBAAiB;EACjB,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE,eAAe;EACf,mBAAmB;EACnB,WAAW;EACX,aAAa;EACb,mBAAmB;AACrB;;AAEA;EAEE,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,kBAAkB;EAClB,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,YAAY;AACd;;AAEA;EACE,aAAa;EACb,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,iBAAiB;EACjB,cAAc;AAChB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,eAAe;EACf,cAAc;AAChB;;AAEA;EACE,iBAAiB;EACjB,+BAA+B;AACjC;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,WAAW;EACX,iBAAiB;AACnB;;AAEA;EACE,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,qBAAqB;AACvB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,WAAW;EACX,aAAa;EACb,mBAAmB;EACnB,2BAA2B;EAC3B,oBAAoB;AACtB;;AAEA;EACE,WAAW;EACX,UAAU;AACZ;;AAEA;EACE,eAAe;EACf,0BAA0B;EAC1B,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,cAAc;EACd,yBAAyB;EACzB,kBAAkB;EAClB,aAAa;EACb,mBAAmB;EACnB,8BAA8B;AAChC;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,mBAAmB;EACnB,2BAA2B;AAC7B;;AAEA;EACE,cAAc;EACd,aAAa;EACb;AAeF;;AAbE;IACE,WAAW;IACX,YAAY;IACZ,kBAAkB;EACpB;;AAEA;IACE,WAAW;IACX,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,iBAAiB;EACnB;;AAGF;EACE,eAAe;EACf,WAAW;AACb;;AAEA;EACE,aAAa;EACb,cAAc;EACd,mBAAmB;EACnB,uBAAuB;EACvB,gBAAgB;AAClB;;AAEA;EACE;IACE,qBAAqB;EACvB;;EAEA;IACE,0BAA0B;EAC5B;AACF;;AARA;EACE;IACE,qBAAqB;EACvB;;EAEA;IACE,0BAA0B;EAC5B;AACF;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,wBAAwB;EACxB,eAAe;EACf,oBAAoB;EACpB,kBAAkB;EAClB,yBAAyB;AAC3B",file:"index.css",sourcesContent:[".root {\n  box-sizing: border-box;\n  padding: 0 7.5px;\n}\n\n.last-message {\n  padding-bottom: 0.75em;\n}\n\n.message {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n.message-send {\n  composes: message;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.message-receive {\n  composes: message;\n  justify-content: flex-start;\n}\n\n.message-time {\n  font-size: 12px;\n  margin-top: 12px;\n  line-height: 1.167em;\n  color: rgba(0, 0, 0, 0.4);\n  text-align: center;\n}\n\n.product-origin {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.product-origin-info {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: row;\n}\n\n.image-wrapper {\n  position: relative;\n}\n\n.product-image {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 0.75em;\n  flex-shrink: 0;\n}\n\n.sold-out {\n  opacity: 0.6;\n  filter: grayscale(50%);\n}\n\n.background-settings {\n  background-color: rgba(0, 0, 0, 0.6);\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 1.2em 1.2em;\n}\n\n.view-link {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n\n  &:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n}\n\n.view-mall-link {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n\n  &:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n}\n\n.banned {\n  & .view-link:hover {\n    color: #555;\n    cursor: not-allowed;\n  }\n}\n\n.product-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.24;\n  color: #333;\n  font-size: 14px;\n  font-weight: 500;\n  word-break: break-all;\n}\n\n.origin-price {\n  margin-right: 0.25em;\n  position: relative;\n  color: #bbb;\n\n  &::after {\n    content: '';\n    width: 100%;\n    height: 1px;\n    position: absolute;\n    left: 0;\n    top: 50%;\n    background-color: #bbb;\n  }\n}\n\n.product-price {\n  margin-top: 0.5em;\n  line-height: 1.16;\n  color: #555;\n  font-size: 12px;\n}\n\n.product-stock {\n  margin-left: 0.5em;\n  color: #888;\n}\n\n.deleted-product {\n  font-size: 14px;\n  line-height: 1.36em;\n  color: #333;\n  display: flex;\n  align-items: center;\n}\n\n.banned-product {\n  composes: product-price;\n  color: #ff4742;\n}\n\n.view-product-block {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.avatar-wrap {\n  width: 2.25em;\n  height: 2.25em;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.avatar {\n  width: 100%;\n  height: 100%;\n}\n\n.avatar-placeholder {\n  width: 2.25em;\n  flex-shrink: 0;\n}\n\n.order-origin {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.order-origin-info {\n  flex-grow: 1;\n  overflow: hidden;\n}\n\n.order-info {\n  display: flex;\n  flex-direction: row;\n}\n\n.order-product-image {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 1em;\n  flex-shrink: 0;\n}\n\n.status-wrap {\n  margin-bottom: 0.428em;\n}\n\n.order-status {\n  font-size: 14px;\n  color: #01bfa5;\n}\n\n.pipe {\n  margin: 0 0.428em;\n  color: rgba(136, 136, 136, 0.4);\n}\n\n.order-product-name {\n  line-height: 1.142;\n  font-size: 14px;\n  color: #555;\n  font-weight: bold;\n}\n\n.order-detail {\n  line-height: 1.16em;\n  font-size: 12px;\n  color: #888;\n}\n\n.order-sn {\n  margin-right: 1.333em;\n}\n\n.shop-information {\n  background-color: #f4f4f4;\n  font-size: 16px;\n  height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding-left: 0.75em;\n}\n\n.shop-avatar {\n  height: 1em;\n  width: 1em;\n}\n\n.shop-name {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.42);\n  margin-left: 1em;\n}\n\n.shop-origin {\n  font-size: 16px;\n  height: 3.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.shop-origin-info {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.shop-origin-avatar {\n  height: 2.25em;\n  width: 2.25em;\n  margin: 0 0.75em;\n\n  & > * {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n  }\n\n  & > div {\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: bold;\n  }\n}\n\n.shop-origin-name {\n  font-size: 14px;\n  color: #555;\n}\n\n.view-shop-block {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  margin: 0 0.75em;\n}\n\n@keyframes rotate {\n  from {\n    transform: rotateZ(0);\n  }\n\n  to {\n    transform: rotateZ(360deg);\n  }\n}\n\n.bubble {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n\n.offer-tips {\n  padding: 0.667em 0.857em;\n  font-size: 14px;\n  line-height: 1.143em;\n  border-radius: 2px;\n  background-color: #d7e4ff;\n}\n"]}]),t.locals={root:"hIUzfpaVECkDIJLAUT8nQ","last-message":"iO_LmGZJlY5GQPtrLCqYA",lastMessage:"iO_LmGZJlY5GQPtrLCqYA",message:"_3mU2lmG0OMgpVc1ILR5IIj","message-send":"_1kXjVAWsG7Wpv7gjTen4dO _3mU2lmG0OMgpVc1ILR5IIj",messageSend:"_1kXjVAWsG7Wpv7gjTen4dO _3mU2lmG0OMgpVc1ILR5IIj","message-receive":"_3i7qVUWGc_4XFFvwGuSjs _3mU2lmG0OMgpVc1ILR5IIj",messageReceive:"_3i7qVUWGc_4XFFvwGuSjs _3mU2lmG0OMgpVc1ILR5IIj","message-time":"_1gSD02QgxKPVWzCL8H5HFX",messageTime:"_1gSD02QgxKPVWzCL8H5HFX","product-origin":"IPmaWbEyb3XJP81UoHa1X",productOrigin:"IPmaWbEyb3XJP81UoHa1X","product-origin-info":"_10NdzHgUq2t2h34mnkJYUk",productOriginInfo:"_10NdzHgUq2t2h34mnkJYUk","image-wrapper":"_19znMMOdpg_sjc3xP_X5mc",imageWrapper:"_19znMMOdpg_sjc3xP_X5mc","product-image":"_1qIaUEuhc5NIRCucR2SxcQ",productImage:"_1qIaUEuhc5NIRCucR2SxcQ","sold-out":"UETBdTZGJjcRkr-epsTSU",soldOut:"UETBdTZGJjcRkr-epsTSU","background-settings":"SLd4tyhTFjdOFDPaea5VH",backgroundSettings:"SLd4tyhTFjdOFDPaea5VH","view-link":"_356u6qBl91x3AhxxLiPAHC",viewLink:"_356u6qBl91x3AhxxLiPAHC","view-mall-link":"_1X-toVNEZ4Je3bmFQOkgev",viewMallLink:"_1X-toVNEZ4Je3bmFQOkgev",banned:"_3OuqACWfFzF5fJj67xKjLa","product-name":"_22aPtuolP_b-r6xWDYesLO",productName:"_22aPtuolP_b-r6xWDYesLO","origin-price":"aQ2AzGIMlMyp8Af90Ry_7",originPrice:"aQ2AzGIMlMyp8Af90Ry_7","product-price":"_3_4WU1PfpfkSvjau4c885o",productPrice:"_3_4WU1PfpfkSvjau4c885o","product-stock":"_9oDU3A3Hpv8zCxKSVucO7",productStock:"_9oDU3A3Hpv8zCxKSVucO7","deleted-product":"_3vWueDaR1oqWg_9uQj5Bu3",deletedProduct:"_3vWueDaR1oqWg_9uQj5Bu3","banned-product":"_1W9kkQHUmqXvAl5gnu2E2a _3_4WU1PfpfkSvjau4c885o",bannedProduct:"_1W9kkQHUmqXvAl5gnu2E2a _3_4WU1PfpfkSvjau4c885o","view-product-block":"_95FFIz3GMqLSZsSyjL3p0",viewProductBlock:"_95FFIz3GMqLSZsSyjL3p0","avatar-wrap":"_2VJTxxq1zDHPvdgFtynXcQ",avatarWrap:"_2VJTxxq1zDHPvdgFtynXcQ",avatar:"_2MOKj1O3NhdC3XGC1PHHiU","avatar-placeholder":"_3sVJ2x7tt7f9ox0PsE2qJ",avatarPlaceholder:"_3sVJ2x7tt7f9ox0PsE2qJ","order-origin":"_3lFdhGA0mPqi-e22KMHVPn",orderOrigin:"_3lFdhGA0mPqi-e22KMHVPn","order-origin-info":"_2j6LIO-m2B-zONTTMttHp1",orderOriginInfo:"_2j6LIO-m2B-zONTTMttHp1","order-info":"_27CywXexvaQLq5OwN8hVyl",orderInfo:"_27CywXexvaQLq5OwN8hVyl","order-product-image":"Oe4T3cTQbo4rnZzSd-rQd",orderProductImage:"Oe4T3cTQbo4rnZzSd-rQd","status-wrap":"HHnxRisfJdk1An5JIz2Y0",statusWrap:"HHnxRisfJdk1An5JIz2Y0","order-status":"_2QEERxNkYoE0GLwuHEcWWK",orderStatus:"_2QEERxNkYoE0GLwuHEcWWK",pipe:"_3Q7MX1PUFdtnzKLc3UdX9z","order-product-name":"_222nHElIK9k9niZwYrLu2T",orderProductName:"_222nHElIK9k9niZwYrLu2T","order-detail":"_2Z_8hAKzyLRNZazhpL4zsq",orderDetail:"_2Z_8hAKzyLRNZazhpL4zsq","order-sn":"qECB0-PzoHjr-k6NJHDll",orderSn:"qECB0-PzoHjr-k6NJHDll","shop-information":"_3H0-oXxxnRlyKLUYpPq0-R",shopInformation:"_3H0-oXxxnRlyKLUYpPq0-R","shop-avatar":"_1zo0NC_PnWRIG4TcgizX5u",shopAvatar:"_1zo0NC_PnWRIG4TcgizX5u","shop-name":"RkUm5cXsYvXWI-mFPi9_8",shopName:"RkUm5cXsYvXWI-mFPi9_8","shop-origin":"_3IpazX4jsFewcvd_xgdDaD",shopOrigin:"_3IpazX4jsFewcvd_xgdDaD","shop-origin-info":"_3CRjohg_9glx8EXdakoLi-",shopOriginInfo:"_3CRjohg_9glx8EXdakoLi-","shop-origin-avatar":"_34wG4_h5rLP4uSPWajJrCp",shopOriginAvatar:"_34wG4_h5rLP4uSPWajJrCp","shop-origin-name":"_2zuF5J9VpNTbrMmIHCBWcK",shopOriginName:"_2zuF5J9VpNTbrMmIHCBWcK","view-shop-block":"_1XkSwZoXiDI-Oyl5siW3qt",viewShopBlock:"_1XkSwZoXiDI-Oyl5siW3qt",bubble:"_12HH49fG8dEWOGmO0gNpQ2","offer-tips":"_1T0GTHcs44T0oqc9gfk3pA",offerTips:"_1T0GTHcs44T0oqc9gfk3pA",rotate:"_2bHD5BSYqz1gXwqln93m-Y"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,"._3zns27sM9pIPMitJbJTcuc {\n  font-size: 14px;\n  border-radius: 2px;\n  background-color: #f5f6f8;\n  max-width: 240px;\n  padding: 8px;\n  line-height: 16px\n}\n\n._3zns27sM9pIPMitJbJTcuc._FG6xBZoyUVWDkOKoBAVD {\n    background-color: #d7e4ff;\n  }\n\n._3n_VEeltmXIKleIPke7p7z {\n  color: #395692;\n  text-decoration: underline;\n  cursor: pointer;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,kBAAkB;EAClB,yBAAyB;EACzB,gBAAgB;EAChB,YAAY;EACZ;AAKF;;AAHE;IACE,yBAAyB;EAC3B;;AAGF;EACE,cAAc;EACd,0BAA0B;EAC1B,eAAe;AACjB",file:"index.css",sourcesContent:[".order {\n  font-size: 14px;\n  border-radius: 2px;\n  background-color: #f5f6f8;\n  max-width: 240px;\n  padding: 8px;\n  line-height: 16px;\n\n  &.send {\n    background-color: #d7e4ff;\n  }\n}\n\n.link {\n  color: #395692;\n  text-decoration: underline;\n  cursor: pointer;\n}\n"]}]),t.locals={order:"_3zns27sM9pIPMitJbJTcuc",send:"_FG6xBZoyUVWDkOKoBAVD",link:"_3n_VEeltmXIKleIPke7p7z"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,"._3uVN1xhiPgOdvNDRZBtHr8 {\n  margin: 0;\n  box-sizing: border-box;\n  max-width: 29.5em;\n  padding: 8px;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  border-radius: 2px;\n  color: #333;\n  font-size: 14px;\n  background-color: #f5f6f8\n}\n\n._3uVN1xhiPgOdvNDRZBtHr8._10V8TmtFupYFXByshFbH8A {\n    background-color: #d7e4ff;\n    color: #333;\n  }\n\n.o4xK5IN7I_Og8b49vKyLA {\n  max-width: 240px;\n  line-height: 21px;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,SAAS;EACT,sBAAsB;EACtB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,qBAAqB;EACrB,kBAAkB;EAClB,WAAW;EACX,eAAe;EACf;AAMF;;AAJE;IACE,yBAAyB;IACzB,WAAW;EACb;;AAGF;EACE,gBAAgB;EAChB,iBAAiB;AACnB",file:"index.css",sourcesContent:[".message {\n  margin: 0;\n  box-sizing: border-box;\n  max-width: 29.5em;\n  padding: 8px;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  border-radius: 2px;\n  color: #333;\n  font-size: 14px;\n  background-color: #f5f6f8;\n\n  &.send {\n    background-color: #d7e4ff;\n    color: #333;\n  }\n}\n\n.unsupport-faq {\n  max-width: 240px;\n  line-height: 21px;\n}\n"]}]),t.locals={message:"_3uVN1xhiPgOdvNDRZBtHr8",send:"_10V8TmtFupYFXByshFbH8A","unsupport-faq":"o4xK5IN7I_Og8b49vKyLA",unsupportFaq:"o4xK5IN7I_Og8b49vKyLA"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,"._1j5d8cvhor_R-eU8Qi3zRP {\n  width: 100%;\n  font-size: 20px;\n  height: 1.1em;\n  text-align: left;\n  position: relative;\n}\n\n._1ZqrPyv3nHeMPeJGQs60ml {\n  max-width: 100%;\n  height: 1.2em;\n  line-height: 1.1em;\n  font-weight: 500\n}\n\n._1ZqrPyv3nHeMPeJGQs60ml._1rIcIdhZ_srqCjcH0MAJRf {\n    max-width: 80%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n._16JPm10NXWtKixnRuTgBSc {\n  height: 0.7em;\n  width: 0.7em;\n  color: #bbb;\n  position: absolute;\n  top: 0;\n  right: -0.2em;\n  cursor: pointer;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,eAAe;EACf,aAAa;EACb,gBAAgB;EAChB,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,aAAa;EACb,kBAAkB;EAClB;AAQF;;AANE;IACE,cAAc;IACd,gBAAgB;IAChB,uBAAuB;IACvB,mBAAmB;EACrB;;AAGF;EACE,aAAa;EACb,YAAY;EACZ,WAAW;EACX,kBAAkB;EAClB,MAAM;EACN,aAAa;EACb,eAAe;AACjB",file:"index.css",sourcesContent:[".root {\n  width: 100%;\n  font-size: 20px;\n  height: 1.1em;\n  text-align: left;\n  position: relative;\n}\n\n.title {\n  max-width: 100%;\n  height: 1.2em;\n  line-height: 1.1em;\n  font-weight: 500;\n\n  &.has-cancel {\n    max-width: 80%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n}\n\n.cancel {\n  height: 0.7em;\n  width: 0.7em;\n  color: #bbb;\n  position: absolute;\n  top: 0;\n  right: -0.2em;\n  cursor: pointer;\n}\n"]}]),t.locals={root:"_1j5d8cvhor_R-eU8Qi3zRP",title:"_1ZqrPyv3nHeMPeJGQs60ml","has-cancel":"_1rIcIdhZ_srqCjcH0MAJRf",hasCancel:"_1rIcIdhZ_srqCjcH0MAJRf",cancel:"_16JPm10NXWtKixnRuTgBSc"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,"._15_uMmuonnTw0UCEDORtT- {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n}\n\n._2PHIZXX9EiRgvbQtvQDubs {\n  padding: 1.5em;\n  border-radius: 3px;\n  background: #fff;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em 0 rgba(0, 0, 0, 0.05), 0 1em 1em 0 rgba(0, 0, 0, 0.09);\n}\n\n._2PHIZXX9EiRgvbQtvQDubs:focus {\n  outline: none;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,OAAO;EACP,QAAQ;EACR,MAAM;EACN,SAAS;EACT,8BAA8B;EAC9B,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,YAAY;AACd;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;EACtB,0EAA0E;AAC5E;;AAEA;EACE,aAAa;AACf",file:"index.css",sourcesContent:[".overlay {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n}\n\n.content {\n  padding: 1.5em;\n  border-radius: 3px;\n  background: #fff;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em 0 rgba(0, 0, 0, 0.05), 0 1em 1em 0 rgba(0, 0, 0, 0.09);\n}\n\n.content:focus {\n  outline: none;\n}\n"]}]),t.locals={overlay:"_15_uMmuonnTw0UCEDORtT-",content:"_2PHIZXX9EiRgvbQtvQDubs"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,"._1zafb29X67OX0Rm_0qzJGh {\n  height: 645px;\n  margin-top: 24px;\n  margin-right: -21px;\n  margin-bottom: -24px;\n}\n\n.LDz0Dq7pML923HYs9zVmg {\n  font-size: 12px;\n  color: #bbb;\n  padding-right: 16px;\n  margin-bottom: 8px;\n}\n\n._1p7TMVjy_Gbt7LeWGM-ZOd {\n  padding: 0;\n  margin-bottom: 16px;\n  padding-right: 16px;\n  margin-top: -4px;\n}\n\n._1Rz3tNtpi3Viv2yVE8gM0x {\n  text-align: right;\n}\n\n._1605I46joGT0Ot1AfnRjzy {\n  color: #888;\n}\n\n._2AsLfdssbSXBa9uiFsUIkp {\n  color: #bbb;\n}\n\n._1yTJSmnBZBKg65byQFatTj {\n  display: inline-block;\n  width: 0;\n  margin-left: 8px;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,gBAAgB;EAChB,mBAAmB;EACnB,oBAAoB;AACtB;;AAEA;EACE,eAAe;EACf,WAAW;EACX,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,UAAU;EACV,mBAAmB;EACnB,mBAAmB;EACnB,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,qBAAqB;EACrB,QAAQ;EACR,gBAAgB;AAClB",file:"index.css",sourcesContent:[".list {\n  height: 645px;\n  margin-top: 24px;\n  margin-right: -21px;\n  margin-bottom: -24px;\n}\n\n.header {\n  font-size: 12px;\n  color: #bbb;\n  padding-right: 16px;\n  margin-bottom: 8px;\n}\n\n.message {\n  padding: 0;\n  margin-bottom: 16px;\n  padding-right: 16px;\n  margin-top: -4px;\n}\n\n.right {\n  text-align: right;\n}\n\n.username {\n  color: #888;\n}\n\n.stamp {\n  color: #bbb;\n}\n\n.split {\n  display: inline-block;\n  width: 0;\n  margin-left: 8px;\n}\n"]}]),t.locals={list:"_1zafb29X67OX0Rm_0qzJGh",header:"LDz0Dq7pML923HYs9zVmg",message:"_1p7TMVjy_Gbt7LeWGM-ZOd",right:"_1Rz3tNtpi3Viv2yVE8gM0x",username:"_1605I46joGT0Ot1AfnRjzy",stamp:"_2AsLfdssbSXBa9uiFsUIkp",split:"_1yTJSmnBZBKg65byQFatTj"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,"._3O82p2memlng7tcEwAGMft {\n  width: 240px;\n  padding: 8px;\n  background-color: #fff;\n  border-radius: 2px;\n  box-sizing: border-box;\n  cursor: pointer;\n  transition: all 0.2s ease\n}\n\n._3O82p2memlng7tcEwAGMft.bO3UXl2EOZucz1-aizAnR {\n    border: 0.25em solid #d7e4ff;\n  }\n\n._3O82p2memlng7tcEwAGMft.WDwf45vWP7-1nl-yGTs5e {\n    border: 0.25em solid #f1f3f4;\n  }\n\n.tAVL13GN4v_5PaIUOzgLQ {\n  width: 600px;\n  height: 672px;\n}\n\n._8vB6v5PFehXJMtwqioiPx {\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 12px;\n  line-height: 14px;\n  margin-bottom: 16px;\n  color: #555;\n}\n\n._1E7BqUAizKcdZG5aLkon11 {\n  font-size: 12px;\n  line-height: 14px;\n  text-align: right;\n  padding-top: 8px;\n  border-top: 1px dashed #f1f3f4;\n  color: #395692;\n  margin-top: 8px;\n}\n\n._3JjGB_k4kg4HhIzlYAJ9Ty {\n  font-size: 12px;\n  color: #888;\n  line-height: 18px;\n  width: 220px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n  white-space: nowrap;\n  height: 18px;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,YAAY;EACZ,sBAAsB;EACtB,kBAAkB;EAClB,sBAAsB;EACtB,eAAe;EACf;AASF;;AAPE;IACE,4BAA4B;EAC9B;;AAEA;IACE,4BAA4B;EAC9B;;AAGF;EACE,YAAY;EACZ,aAAa;AACf;;AAEA;EACE,WAAW;EACX,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;EACvB,eAAe;EACf,iBAAiB;EACjB,mBAAmB;EACnB,WAAW;AACb;;AAEA;EACE,eAAe;EACf,iBAAiB;EACjB,iBAAiB;EACjB,gBAAgB;EAChB,8BAA8B;EAC9B,cAAc;EACd,eAAe;AACjB;;AAEA;EACE,eAAe;EACf,WAAW;EACX,iBAAiB;EACjB,YAAY;EACZ,uBAAuB;EACvB,gBAAgB;EAChB,qBAAqB;EACrB,mBAAmB;EACnB,YAAY;AACd",file:"index.css",sourcesContent:[".root {\n  width: 240px;\n  padding: 8px;\n  background-color: #fff;\n  border-radius: 2px;\n  box-sizing: border-box;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &.send {\n    border: 0.25em solid #d7e4ff;\n  }\n\n  &.receive {\n    border: 0.25em solid #f1f3f4;\n  }\n}\n\n.container {\n  width: 600px;\n  height: 672px;\n}\n\n.header {\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 12px;\n  line-height: 14px;\n  margin-bottom: 16px;\n  color: #555;\n}\n\n.footer {\n  font-size: 12px;\n  line-height: 14px;\n  text-align: right;\n  padding-top: 8px;\n  border-top: 1px dashed #f1f3f4;\n  color: #395692;\n  margin-top: 8px;\n}\n\n.preview {\n  font-size: 12px;\n  color: #888;\n  line-height: 18px;\n  width: 220px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n  white-space: nowrap;\n  height: 18px;\n}\n"]}]),t.locals={root:"_3O82p2memlng7tcEwAGMft",send:"bO3UXl2EOZucz1-aizAnR",receive:"WDwf45vWP7-1nl-yGTs5e",container:"tAVL13GN4v_5PaIUOzgLQ",header:"_8vB6v5PFehXJMtwqioiPx",footer:"_1E7BqUAizKcdZG5aLkon11",preview:"_3JjGB_k4kg4HhIzlYAJ9Ty"},e.exports=t},function(e,t,n){(t=n(15)(!0)).push([e.i,"._2DHthNBqDPxDjC1c6JvkZH {\n  background: #f5f6f8;\n  padding: 8px;\n  width: 224px;\n  word-break: break-all;\n  font-size: 14px;\n  box-sizing: content-box;\n}\n\n._3pWLUxyM1FZ7-NdZqZbKY_ {\n  box-sizing: content-box;\n  border-top: 1px solid #e8e8e8;\n  height: 36px;\n  line-height: 36px;\n  width: 224px;\n  word-break: break-all;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #888;\n  cursor: pointer;\n  text-align: center;\n  white-space: nowrap;\n}\n\n._7-vPwOgwWBYpZj0E5MyHX {\n  padding-bottom: 8px;\n  line-height: 21px;\n}\n\n._2la8jPuCjpqKzvP_S2sWAE {\n  color: #ee4d2d;\n}\n\n._1DekCN6MP9k1IUvBQZzeom {\n  color: #ccc;\n  cursor: default;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,mBAAmB;EACnB,YAAY;EACZ,YAAY;EACZ,qBAAqB;EACrB,eAAe;EACf,uBAAuB;AACzB;;AAEA;EACE,uBAAuB;EACvB,6BAA6B;EAC7B,YAAY;EACZ,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,gBAAgB;EAChB,uBAAuB;EACvB,WAAW;EACX,eAAe;EACf,kBAAkB;EAClB,mBAAmB;AACrB;;AAEA;EACE,mBAAmB;EACnB,iBAAiB;AACnB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,WAAW;EACX,eAAe;AACjB",file:"index.css",sourcesContent:[".root {\n  background: #f5f6f8;\n  padding: 8px;\n  width: 224px;\n  word-break: break-all;\n  font-size: 14px;\n  box-sizing: content-box;\n}\n\n.option {\n  box-sizing: content-box;\n  border-top: 1px solid #e8e8e8;\n  height: 36px;\n  line-height: 36px;\n  width: 224px;\n  word-break: break-all;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #888;\n  cursor: pointer;\n  text-align: center;\n  white-space: nowrap;\n}\n\n.title {\n  padding-bottom: 8px;\n  line-height: 21px;\n}\n\n.primary {\n  color: #ee4d2d;\n}\n\n.invalid {\n  color: #ccc;\n  cursor: default;\n}\n"]}]),t.locals={root:"_2DHthNBqDPxDjC1c6JvkZH",option:"_3pWLUxyM1FZ7-NdZqZbKY_",title:"_7-vPwOgwWBYpZj0E5MyHX",primary:"_2la8jPuCjpqKzvP_S2sWAE",invalid:"_1DekCN6MP9k1IUvBQZzeom"},e.exports=t},,function(e,t,n){"use strict";n.r(t),n.d(t,"getModule",(function(){return N})),n.d(t,"default",(function(){return q}));var r=n(54),s=n.n(r),a=n(0),o=n.n(a),c=n(93),i=n(40),u=n.n(i),l=n(4),d=n.n(l),p=n(17),f=n.n(p),A=n(18),g=n.n(A),h=n(6),E=n.n(h),m=n(19),b=n.n(m),v=n(20),_=n.n(v),O=n(11),S=n.n(O),y=n(8),x=n(200),C=n(2),M=n(12),j=["fetchMessagesRequested","messageHttpStatus"];function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){b()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S()(e);if(t){var s=S()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return _()(this,n)}}(n);function n(e){var r;return f()(this,n),(r=t.call(this,e)).fetchRequested=r.fetchRequested.bind(E()(r)),r}return g()(n,[{key:"fetchRequested",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needReset,n=void 0!==t&&t,r=e.direction,s=this.props,a=s.messageList,o=s.currentConversation,c=s.fetchMessagesRequested,i={conversationId:o.id,direction:"up"===r||"older"===r?"older":"latest"};if(n)i.read=!0,i.reset=!0;else if(!a.length)return;c(w({},i))}},{key:"render",value:function(){var e=this.props,t=(e.fetchMessagesRequested,e.messageHttpStatus),n=s()(e,j);return o.a.createElement(x.a,u()({},n,{status:t,fetchRequested:this.fetchRequested}))}}]),n}(o.a.PureComponent),B={updateTranslateTips:C.updateTranslateTips,markMessagesRequested:C.markMessagesRequested,fetchMessagesRequested:M.fetchMessagesRequested,resendMessageRequested:M.resendMessageRequested,fillMessageRequested:M.fillMessageRequested,setCurrentConversationCanRead:C.setCurrentConversationCanRead,cancelSendingMessageRequested:M.cancelSendingMessageRequested,deleteConversationMessageHash:M.deleteConversationMessageHash,setInScrollToMessage:M.setInScrollToMessage},R=Object(y.connect)((function(e){return{isScChat:Object(C.isScChatSelector)(e),translateTips:Object(C.tipsSelector)(e),hasMoreOlderMessage:Object(C.hasMoreOlderMessageSelector)(e),hasMoreLatestMessage:Object(C.hasMoreLatestMessageSelector)(e),isSubAccount:Object(C.isSubAccountSelector)(e),messageList:Object(C.curConvsMessageSelector)(e),showChatWindow:Object(C.showChatWindowSelector)(e),unreadMessageIds:Object(C.unreadMessageIdsSelector)(e),messageHttpStatus:Object(C.messageHttpStatusSelector)(e),showConversationDetail:Object(C.showConversationDetailSelector)(e),currentConversationCanRead:Object(C.currentConversationCanReadSelector)(e),showWarningMessageIds:Object(C.showWarningMessageIdsSelector)(e),conversationId:Object(C.currentConversationIdSelector)(e),conversationShopId:Object(C.currentConversationShopIdSelectors)(e),conversationBuyerId:Object(C.currentConversationBuyerIdSelectors)(e),conversationStatus:Object(C.currentConversationStatusSelectors)(e),shop:Object(C.currentConversationShopSelectors)(e),inScrollToMessage:Object(C.inScrollToMessageSelector)(e)||Object(C.inlocationSelector)(e),shopTranslationSettings:Object(C.shopTranslationSettingsSelector)(e),currentConversationTranslationAccess:Object(C.currentConversationTranslationAccessSelector)(e),messagesFillStatusMap:Object(C.messageFillStatusMapSelector)(e),locale:Object(C.localeSelector)(e),currentFaqSessionInfo:Object(C.currentFaqSessionInfoSelector)(e),toBottomHasConflict:Object(C.toBottomHasConflictSelector)(e)}}),B)(T),k=M.reducerMap,P=M.sagas,D=s()(M,["reducerMap","sagas"]),N=function(){return{id:"message-section",reducerMap:k,sagas:P,actionsMap:D,retained:!0}};function q(e){return o.a.createElement(c.DynamicModuleLoader,{modules:[N()]},o.a.createElement(R,e))}}]))}).call(this,n("G/w+").collectTrackerTask)},JKOH:function(e,t){e.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M6 2.25v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75H3a.75.75 0 01-.75-.75V3A.75.75 0 013 2.25h3zm-1.5 4.5v1.5h9v-1.5h-9zm0 3.25v1.5h6V10h-6zm3-8.5h3a.75.75 0 01.75.75V3h-4.5v-.75a.75.75 0 01.75-.75z"></path></svg>'},Wx0F:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M8 16A8 8 0 118 0a8 8 0 010 16zm.8-7V4H7.3v5h1.5zm0 3v-1.5H7.3V12h1.5z"></path></svg>'},ZkkK:function(e,t){e.exports='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M9.192 0L9.9.707 3.536 7.071 0 3.536l.707-.708 2.828 2.828z"></path></svg>'},kPLt:function(e,t){e.exports='<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#filter0_i_618_17152)"><circle cx="18" cy="18" r="18" fill="white"></circle></g><path d="M18.5764 24.7373C18.2573 25.0791 17.7308 25.0886 17.4004 24.7585L10.5 17.8649L11.6554 16.6271L18.5559 23.5208C18.8863 23.8508 18.8954 24.3955 18.5764 24.7373Z" fill="#EE4D2D"></path><path d="M17.421 24.7373C17.74 25.0791 18.2665 25.0886 18.5969 24.7585L25.5 17.8622L24.3446 16.6245L17.4415 23.5208C17.1111 23.8508 17.1019 24.3955 17.421 24.7373Z" fill="#EE4D2D"></path><path d="M18 24.9776C17.5453 24.9776 17.1766 24.5963 17.1766 24.1258L17.1766 8L18.8234 8L18.8234 24.1258C18.8234 24.5963 18.4548 24.9776 18 24.9776Z" fill="#EE4D2D"></path><line x1="10.1113" y1="26.1389" x2="25.8913" y2="26.1389" stroke="#EE4D2D" stroke-width="1.5"></line><defs><filter id="filter0_i_618_17152" x="0" y="0" width="36" height="36" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="-0.5"></feOffset><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.09 0"></feColorMatrix><feBlend mode="normal" in2="shape" result="effect1_innerShadow_618_17152"></feBlend></filter></defs></svg>'},oeg4:function(e,t){e.exports='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.99996 8.14645L11.1464 3L11.8535 3.70711L6.70707 8.85355C6.31655 9.24408 5.68338 9.24408 5.29286 8.85355L0.146408 3.70711L0.853516 3L5.99996 8.14645Z" fill="white"></path></svg>'},ucpa:function(e,t){e.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M6 2.25v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75H3a.75.75 0 01-.75-.75V3A.75.75 0 013 2.25h3zm1.409 8.553L5.288 8.682l-1.061 1.06 3.182 3.183 6.364-6.364-1.06-1.061-5.304 5.303zM7.5 1.5h3a.75.75 0 01.75.75V3h-4.5v-.75a.75.75 0 01.75-.75z"></path></svg>'}}]);